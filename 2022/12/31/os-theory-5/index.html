<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Charles">
    
    <meta name="author" content="Charles">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    
        
            <link rel="preconnect" href="https://npm.elemecdn.com" crossorigin>
        
    
    <!--- Seo Part-->
    
    <link rel="canonical" href="http://charles2530.github.io/2022/12/31/os-theory-5/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="post by Charles in 2022-12-31 17:31:13">
<meta property="og:type" content="article">
<meta property="og:title" content="OS_theory_5">
<meta property="og:url" content="http://charles2530.github.io/2022/12/31/os-theory-5/index.html">
<meta property="og:site_name" content="Charles&#39;s Castle">
<meta property="og:description" content="post by Charles in 2022-12-31 17:31:13">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://charles2530.github.io/image/os_lesson/part_5/5.1_1.png">
<meta property="og:image" content="https://charles2530.github.io/image/os_lesson/part_5/5.1_2.png">
<meta property="og:image" content="https://charles2530.github.io/image/os_lesson/part_5/5.1_3.png">
<meta property="og:image" content="https://charles2530.github.io/image/os_lesson/part_5/5.1_4.png">
<meta property="og:image" content="https://charles2530.github.io/image/os_lesson/part_5/5.1_5.png">
<meta property="og:image" content="https://charles2530.github.io/image/os_lesson/part_5/5.1_6.png">
<meta property="og:image" content="https://charles2530.github.io/image/os_lesson/part_5/5.1_7.png">
<meta property="og:image" content="https://charles2530.github.io/image/os_lesson/part_5/5.1_8.png">
<meta property="og:image" content="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/Bus.drawio.svg">
<meta property="og:image" content="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/IO_bus.svg">
<meta property="og:image" content="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/IO_Controller.svg">
<meta property="og:image" content="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6IO.svg">
<meta property="og:image" content="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/%E4%B8%AD%E6%96%AD%E9%A9%B1%E5%8A%A8.svg">
<meta property="og:image" content="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/DMA.svg">
<meta property="og:image" content="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/%E5%B1%82%E6%AC%A1%E5%85%B3%E7%B3%BB.svg">
<meta property="og:image" content="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/single_buffer.svg">
<meta property="og:image" content="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/double_buffer.svg">
<meta property="og:image" content="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/buffer_pool.svg">
<meta property="og:image" content="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/SPOOLing.svg">
<meta property="article:published_time" content="2022-12-31T09:31:13.000Z">
<meta property="article:modified_time" content="2023-06-17T06:13:59.322Z">
<meta property="article:author" content="Du Jinyang">
<meta property="article:tag" content="OS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://charles2530.github.io/image/os_lesson/part_5/5.1_1.png">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="https://charles2530.github.io/image/background/favicon.png" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="https://charles2530.github.io/image/background/favicon.png">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="https://charles2530.github.io/image/background/favicon.png">
    <!--- Page Info-->
    
    <title>
        
            OS_theory_5 -
        
        Charles&#39;s Castle
    </title>
    
<link rel="stylesheet" href="/css/style.css">


    
        <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/css/build/styles.css">
    

    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/fonts/fonts.css">
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/fonts/Satoshi/satoshi.css">
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/fonts/Chillax/chillax.css">
    <!--- Font Part-->
    
    
    
    

    <!--- Inject Part-->
    
        
            
                
                    <script data-swup-reload-script> var _hmt = _hmt || []; (function() { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?8e0e5f382d14d87cbeadc33a36e71e86"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s); })(); </script>
                
    
            
    
    <script id="hexo-configurations">
    let Global = window.Global || {};
    Global.hexo_config = {"hostname":"charles2530.github.io","root":"/","language":"en","path":"search.xml"};
    Global.theme_config = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":true,"list":["lol","Neo","God"]},"code_block":{"copy":true,"style":"mac","font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":6,"number":false,"expand":true,"init_open":true},"copyright":true,"lazyload":true,"recommendation":{"enable":true,"title":"recommend_articles","limit":3,"mobile_limit":2,"placeholder":"https://charles2530.github.io/image/background/p3.jfif","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":"#1890ff"},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":true},"scroll_progress":{"bar":true,"percentage":true},"website_counter":{"url":"https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js","enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"single_page":true,"open_graph":true,"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"https://charles2530.github.io/image/background/background-light1.jpg","dark":"https://charles2530.github.io/image/background/background-dark1.jpg"},"title":"Charles's Castle","subtitle":{"text":["Happiness is best!","Never give up!","Everyday is a gift!"],"hitokoto":{"enable":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#000000","dark":"#d1d1b6"},"text_style":{"title_size":"3.2rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":true,"links":{"github":"https://github.com/Charles2530/","zhihu":"https://www.zhihu.com/people/yang-guang-xiao-zi-55-55","email":"charles2530@163.com"},"qrs":{"weixin":"https://charles2530.github.io/image/background/Wechat_icon.png"}}},"plugins":{"feed":{"enable":true},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null},{"name":null,"artist":null,"url":null,"cover":null}]},"mermaid":{"enable":true,"version":"9.3.0"}},"version":"2.4.4","navbar":{"auto_hide":true,"color":{"left":"#f78736","right":"#367df7","transparency":35},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Categories":{"path":"/categories","icon":"fas fa-bookmark"},"Tags":{"path":"/tags","icon":"fas fa-tags"},"About":{"icon":"fa-regular fa-user","submenus":{"Me":"/about","Github":"https://github.com/Charles2530/","Blog":"https://charles2530.github.io","Statistics":"https://tongji.baidu.com/"}}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":"This is Charles's Castle","links":{"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Photos":{"icon":"fa-solid fa-image","path":"/masonry/"},"Essays":{"icon":"fa-solid fa-message-lines","path":"/essay/"},"Friends":{"icon":"fa-solid fa-user-group","path":"/friends/"}}},"article_date_format":"auto","categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}},"footerStart":"2022/12/27 00:00:00"};
    Global.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
    Global.data_config = {"masonry":true};
  </script>
    
    <!--- Fontawesome Part-->
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/fontawesome/fontawesome.min.css">
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/fontawesome/brands.min.css">
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/fontawesome/solid.min.css">
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/fontawesome/regular.min.css">
    
    
    
    
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Charles's Castle" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>



    <body>
        <div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="swup-progress-icon">
            <i class="fa-solid fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container" id="swup">

    

    <div class="main-content-container">


        <div class="main-content-header">
            <header class="navbar-container">
    
    <div class="navbar-content">
        <div class="left">
            
                <a class="logo-image" href="http://charles2530.github.io/">
                    <img src="https://charles2530.github.io/image/background/logo.jpg">
                </a>
            
            <a class="logo-title" href="http://charles2530.github.io/">
                
                Charles&#39;s Castle
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/"  >
                                    
                                        
                                            <i class="fa-regular fa-house"></i>
                                        
                                        HOME
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/categories"  >
                                    
                                        
                                            <i class="fas fa-bookmark"></i>
                                        
                                        CATEGORIES
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/tags"  >
                                    
                                        
                                            <i class="fas fa-tags"></i>
                                        
                                        TAGS
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="has-dropdown" 
                                    href="#" onClick="return false;">
                                    
                                        
                                            <i class="fa-regular fa-user"></i>
                                        
                                        ABOUT&nbsp;<i class="fa-solid fa-chevron-down"></i>
                                    
                                </a>
                                <!-- Submenu -->
                                
                                    <ul class="sub-menu">
                                    
                                        <li>
                                        <a href="/about">ME
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a target="_blank" rel="noopener" href="https://github.com/Charles2530/">GITHUB
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a href="https://charles2530.github.io">BLOG
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a target="_blank" rel="noopener" href="https://tongji.baidu.com/">STATISTICS
                                        </a>
                                        </li>
                                    
                                    </ul>
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile drawer -->
    <div class="navbar-drawer w-full absolute top-0 left-0 bg-background-color">
        <ul class="drawer-navbar-list flex flex-col justify-start items-center">
            
                
                    <li class="drawer-navbar-item text-base my-1.5 flex justify-center items-center">
                        <a class="rounded-3xl py-1.5 px-5 hover:border hover:!text-primary active:!text-primary group " 
                        href="/"  >
                             
                                
                                    <i class="fa-regular fa-house"></i>
                                
                                HOME
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item text-base my-1.5 flex justify-center items-center">
                        <a class="rounded-3xl py-1.5 px-5 hover:border hover:!text-primary active:!text-primary group " 
                        href="/categories"  >
                             
                                
                                    <i class="fas fa-bookmark"></i>
                                
                                CATEGORIES
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item text-base my-1.5 flex justify-center items-center">
                        <a class="rounded-3xl py-1.5 px-5 hover:border hover:!text-primary active:!text-primary group " 
                        href="/tags"  >
                             
                                
                                    <i class="fas fa-tags"></i>
                                
                                TAGS
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item text-base my-1.5 flex justify-center items-center">
                        <a class="rounded-3xl py-1.5 px-5 hover:border hover:!text-primary active:!text-primary group has-dropdown" 
                        href="#" onClick="return false;">
                            
                                
                                    <i class="fa-regular fa-user"></i>
                                
                                ABOUT&nbsp;<i class="group-hover:rotate-180 transition-transform fa-solid fa-chevron-down"></i>
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                              
                        
                            <li class="text-base flex justify-center items-center hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                <a class="py-0.5" href="/about">ME</a>
                            </li>
                        
                            <li class="text-base flex justify-center items-center hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                <a class="py-0.5" target="_blank" rel="noopener" href="https://github.com/Charles2530/">GITHUB</a>
                            </li>
                        
                            <li class="text-base flex justify-center items-center hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                <a class="py-0.5" href="https://charles2530.github.io">BLOG</a>
                            </li>
                        
                            <li class="text-base flex justify-center items-center hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                <a class="py-0.5" target="_blank" rel="noopener" href="https://tongji.baidu.com/">STATISTICS</a>
                            </li>
                        
                    
            

        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="post-page-container">
    <div class="article-content-container">

        <div class="article-title">
            
                
                
                <img src="https://charles2530.github.io/image/background/p4.jpg" alt="OS_theory_5" class="max-w-none"/>
                
                <h1 class="article-title-cover">OS_theory_5</h1>
            
            </div>
            
                    
        
        
            <div class="article-header">
                <div class="avatar">
                    <img src="https://charles2530.github.io/image/background/logo2.jpg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">Charles</span>
                        
                            <span class="author-label">Lv7</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2022-12-31 17:31:13</span>
        <span class="mobile">2022-12-31 17:31:13</span>
        <span class="hover-info">Created</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2023-06-17 14:13:59</span>
            <span class="mobile">2023-06-17 14:13:59</span>
            <span class="hover-info">Updated</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                
                    
                        
                        <li>
                            <a href="/categories/Lesson/">Lesson</a>&nbsp;
                        </li>
                    
                    
                
                    
                        
                            <li>></li>
                        
                        <li>
                            <a href="/categories/Lesson/OS/">OS</a>&nbsp;
                        </li>
                    
                    
                
                    
                        
                            <li>></li>
                        
                        <li>
                            <a href="/categories/Lesson/OS/OS-theory/">OS-theory</a>&nbsp;
                        </li>
                    
                    
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/OS/">OS</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fa-regular fa-typewriter"></i>&nbsp;<span>6.1k Words</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fa-regular fa-clock"></i>&nbsp;<span>21 Mins</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        


        <div class="article-content markdown-body">
            <h1 id="os_theory_5"><a class="markdownIt-Anchor" href="#os_theory_5"></a> OS_theory_5</h1>
<h2 id="io设备的基本概念和分类"><a class="markdownIt-Anchor" href="#io设备的基本概念和分类"></a> I/O设备的基本概念和分类</h2>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://charles2530.github.io/image/os_lesson/part_5/5.1_1.png"
                      alt="" 
                ></p>
<h2 id="io控制器"><a class="markdownIt-Anchor" href="#io控制器"></a> I/O控制器</h2>
<h3 id="定义"><a class="markdownIt-Anchor" href="#定义"></a> 定义</h3>
<blockquote>
<p>CPU无法直接控制I/0设备的机械部件，因此I/0设备还要有一个电子部件作为CPU和I/0设备机械部件之间的“中介”，用于实现CPU对设备的控制。</p>
<p>这个电子部件就是<code>I/0控制器</code>，又称<code>设备控制器</code>。CPU可控制I/0控制器，又由/0控制器来控制设备的机械部件。</p>
</blockquote>
<h3 id="io控制器的功能"><a class="markdownIt-Anchor" href="#io控制器的功能"></a> I/O控制器的功能</h3>
<blockquote>
<p>1.<code>接受和识别CPU发出的命令</code>:<br />
如CPU发来的 read/write 命令，I/0控制器中会有相应的<code>控制寄存器</code>来存放命令和参数。</p>
<p>2.<code>向CPU报告设备的状态</code>：<br />
l/O控制器中会有相应的<code>状态寄存器</code>，用于记录I/o设备的当前状态。如:1表示空闲，0表示忙碌。</p>
<p>3.<code>数据交换</code>:<br />
l/o控制器中会设置相应的<code>数据寄存器</code>。输出时,数据寄存器用于暂存CPU发来的数据，之后再由控制器传送设备。输入时，数据寄存器用于暂存设备发来的数据，之后CPU从数据寄存器中取走数据。</p>
<p>4.<code>地址识别</code>:<br />
类似于内存的地址，为了区分设备控制器中的各个寄存器，也需要给各个寄存器设置一个特定的“地址”。I/0控制器通过CPU提供的“地址”来判断CPU要读/写的是哪个寄存器。</p>
</blockquote>
<h3 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h3>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://charles2530.github.io/image/os_lesson/part_5/5.1_2.png"
                      alt="" 
                ></p>
<h2 id="io控制方式"><a class="markdownIt-Anchor" href="#io控制方式"></a> I/O控制方式</h2>
<h3 id="程序直接控制方式"><a class="markdownIt-Anchor" href="#程序直接控制方式"></a> 程序直接控制方式</h3>
<blockquote>
<p>优点:实现简单。在读/写指令之后，加上实现循环检查的一系列指令即可(因此才称为“程序直接控制方式”)</p>
<p>缺点:<code>CPU和I/0设备只能串行工作，CPU需要一直轮询检查长期处于“忙等”状态</code>，CPU利用率低。</p>
</blockquote>
<h3 id="中断驱动方式"><a class="markdownIt-Anchor" href="#中断驱动方式"></a> 中断驱动方式</h3>
<blockquote>
<p>优点:与“程序直接控制方式”相比，在“中断驱动方式”中，I/O控制器会通过中断信号主动报告I/0已完成，CPU不再需要不停地轮询。<code>CPU和I/0设备可并行工作</code>，CPU利用率得到明显提升。</p>
<p>缺点:每个字在I/0设备与内存之间的传输，都需要经过CPU。而<code>频繁的中断处理会消耗较多的CPU时间</code>。</p>
</blockquote>
<h3 id="dma方式直接存储器存取"><a class="markdownIt-Anchor" href="#dma方式直接存储器存取"></a> DMA方式（直接存储器存取）</h3>
<blockquote>
<p>优点:数据传输以“块”为单位，CPU介入频率进一步降低。数据的传输不再需要先经过CPU再写入内存，数据传输效率进一步增加。CPU和I/0设备的并行性得到提升。</p>
<p>缺点: CPU每发出一条I/0指令，只能读/写一个或多个连续的数据块。</p>
</blockquote>
<h3 id="通道控制方式"><a class="markdownIt-Anchor" href="#通道控制方式"></a> 通道控制方式</h3>
<blockquote>
<p>缺点:实现复杂，需要专门的通道硬件支持。</p>
<p>优点: <code>CPU、通道、I/0设备可并行工作，资源利用率很高</code>。</p>
</blockquote>
<h3 id="总结-2"><a class="markdownIt-Anchor" href="#总结-2"></a> 总结</h3>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://charles2530.github.io/image/os_lesson/part_5/5.1_3.png"
                      alt="" 
                ></p>
<h2 id="io软件层次结构"><a class="markdownIt-Anchor" href="#io软件层次结构"></a> I/O软件层次结构</h2>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://charles2530.github.io/image/os_lesson/part_5/5.1_4.png"
                      alt="" 
                ></p>
<blockquote>
<p><code>逻辑设备表</code>的作用:建立逻辑设备名到物理设备名的映射关系;根据设备类型选择调用相应的驱动程序</p>
</blockquote>
<blockquote>
<p>理解并记住I/O软件<code>各个层次之间的顺序</code>，要能够推理判断某个处理应该是在哪个层次完成的(最常考的是设备独立性软件、设备驱动程序这两层。只需理解一个特点即可:<code>直接涉及到硬件具体细节、且与中断无关的操作肯定是在设备驱动程序层完成的: 没有涉及硬件的、对各种设备都需要进行的管理工作都是在设备独立性软件层完成的</code>)</p>
</blockquote>
<h2 id="io核心子系统"><a class="markdownIt-Anchor" href="#io核心子系统"></a> I/O核心子系统</h2>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://charles2530.github.io/image/os_lesson/part_5/5.1_5.png"
                      alt="" 
                ></p>
<h2 id="假脱机技术"><a class="markdownIt-Anchor" href="#假脱机技术"></a> 假脱机技术</h2>
<blockquote>
<p>“脱机”——脱离主机的控制进行的输入/输出操作。</p>
<p>引入脱机技术后，缓解了CPU与慢速I/o设备的速度矛盾。另一方面，即使CPU在忙碌，也可以提前将数据输入到磁带;即使慢速的输出设备正在忙碌，也可以提前将数据输出到磁带。</p>
</blockquote>
<blockquote>
<p>&quot;假脱机技术”，又称“SPOOLing 技术”是用软件的方式模拟脱机技术。</p>
</blockquote>
<h3 id="总结-3"><a class="markdownIt-Anchor" href="#总结-3"></a> 总结</h3>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://charles2530.github.io/image/os_lesson/part_5/5.1_6.png"
                      alt="" 
                ></p>
<h2 id="设备的分配与回收"><a class="markdownIt-Anchor" href="#设备的分配与回收"></a> 设备的分配与回收</h2>
<h3 id="分配方式"><a class="markdownIt-Anchor" href="#分配方式"></a> 分配方式</h3>
<h4 id="安全分配方式"><a class="markdownIt-Anchor" href="#安全分配方式"></a> 安全分配方式</h4>
<blockquote>
<p><code>安全分配方式</code>:为进程分配一个设备后就将进程阻塞，本次I/0完成后才将进程唤醒。</p>
<p>eg:进程请求打印机打印输出：一个时段内每个进程只能使用一个设备。</p>
<p>优点:破坏了“请求和保持”条件，不会死锁。</p>
<p>缺点: 对于一个进程来说，CPU和I/0设备只能串行工作。</p>
</blockquote>
<h4 id="不安全分配方式"><a class="markdownIt-Anchor" href="#不安全分配方式"></a> 不安全分配方式</h4>
<blockquote>
<p><code>不安全分配方式</code>: 进程发出I/O请求后，系统为其分配I/0设备，进程可继续执行，之后还可以发出新的I/0请求。只有某个I/0请求得不到满足时才将进程阻塞。</p>
<p>eg:进程请求打印机打印输出：一个进程可以同时使用多个设备。</p>
<p>优点:进程的计算任务和/0任务可以并行处理，使进程迅速推进。</p>
<p>缺点:有可能发生死锁。(死锁避免、死锁的检测和解除)</p>
</blockquote>
<h3 id="总结-4"><a class="markdownIt-Anchor" href="#总结-4"></a> 总结</h3>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://charles2530.github.io/image/os_lesson/part_5/5.1_7.png"
                      alt="" 
                ></p>
<h2 id="缓冲区管理"><a class="markdownIt-Anchor" href="#缓冲区管理"></a> 缓冲区管理</h2>
<h3 id="缓冲区的作用"><a class="markdownIt-Anchor" href="#缓冲区的作用"></a> 缓冲区的作用</h3>
<blockquote>
<p>1.缓和CPU与I/O设备之间速度不匹配的矛盾<br />
2.减少对CPU的中断频率，放宽对CPU中断相应时间的限制<br />
3.解决数据粒度不匹配的问题<br />
4.提高CPU与I/O设备之间的并行性</p>
</blockquote>
<h3 id="总结-5"><a class="markdownIt-Anchor" href="#总结-5"></a> 总结</h3>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://charles2530.github.io/image/os_lesson/part_5/5.1_8.png"
                      alt="" 
                ></p>
<h1 id="设备管理"><a class="markdownIt-Anchor" href="#设备管理"></a> 设备管理</h1>
<h2 id="io硬件"><a class="markdownIt-Anchor" href="#io硬件"></a> I/O硬件</h2>
<h3 id="总线"><a class="markdownIt-Anchor" href="#总线"></a> 总线</h3>
<p>这是在对总线的抽象,<code>CPU</code>,<code>Memory</code>,<code>I/O</code>部件挂载在总线上,通过总线交流</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/Bus.drawio.svg"
                      alt="Bus" 
                ></p>
<p><strong>Bus</strong></p>
<p>地址总线传递地址，数据总线传递数据，控制总线传递控制信号。<br />
以<code>CPU</code>读入数据为例,<code>CPU</code>发出请求,<code>address bus</code>传递地址,读到的数据通过<code>data bus</code>传递给<code>CPU</code>。</p>
<h3 id="io系统"><a class="markdownIt-Anchor" href="#io系统"></a> I/O系统</h3>
<p>这是对<code>I/O</code>的抽象,可见<code>I/O</code>被拆分开,<code>channel processor</code>可以看成分发器,<code>System Bus</code>传来的请求在这里处理,然后发送信号到<code>I/O bus</code>,控制不同的<code>I/O</code>设备.<br />
<strong>IO</strong>:<br />
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/IO_bus.svg"
                      alt="IO" 
                ></p>
<p><code>I/O Bus</code>连接了不同的<code>I/O</code>设备,不同<code>I/O</code>设备的传输数量差了很多倍数量级,键盘打字的速度再快也比不上硬盘的读入,因此,需要对不同设备分别管理.</p>
<h3 id="io设备与管理"><a class="markdownIt-Anchor" href="#io设备与管理"></a> I/O设备与管理</h3>
<h4 id="分类"><a class="markdownIt-Anchor" href="#分类"></a> 分类</h4>
<p><strong>按照类型分类</strong>:</p>
<blockquote>
<ul>
<li>传输速度不同:低俗设备,中速设备,高速设备</li>
<li>数据组织不同:</li>
<li>
<ul>
<li>块设备:以数据块为单位存储、传输信息。传输速率较高、可寻址(随机读写)</li>
</ul>
</li>
<li>
<ul>
<li>字符设备:以字符为单位存储、传输信息。传输速率低、不可寻址。</li>
</ul>
</li>
<li>共享属性不同:</li>
<li>
<ul>
<li>独占设备:一次只能由一个进程访问,比如打印机</li>
</ul>
</li>
<li>
<ul>
<li>共享设备:可以多个进程访问的设备</li>
</ul>
</li>
<li>
<ul>
<li>虚拟设备:在一类设备上模拟另一类设备，常用的方法是，用共享设备模拟独占设备，用高速设备模拟低速设备。</li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="设备管理-2"><a class="markdownIt-Anchor" href="#设备管理-2"></a> 设备管理</h4>
<p><strong>目标</strong>:</p>
<blockquote>
<ul>
<li>按照请求,操作设备,完成数据交换,最终完成用户请求</li>
<li>建立方便,统一的独立于设备的接口(抽象)</li>
<li>充分利用技术,提高CPU与设备,设备与设备之间的并行工作能力,提高利用率</li>
<li>保护信息</li>
</ul>
</blockquote>
<h3 id="设备控制器"><a class="markdownIt-Anchor" href="#设备控制器"></a> 设备控制器</h3>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/IO_Controller.svg"
                      alt="设备控制器" 
                ></p>
<p><strong>设备控制器</strong></p>
<h4 id="功能"><a class="markdownIt-Anchor" href="#功能"></a> 功能</h4>
<blockquote>
<ul>
<li>接收和识别CPU给来的命令</li>
<li>数据交换：CPU与控制器、控制器与设备</li>
<li>设备状态的了解和报告</li>
<li>设备地址识别</li>
<li>缓冲区</li>
<li>对设备传来的数据进行差错检测</li>
</ul>
</blockquote>
<h4 id="组成"><a class="markdownIt-Anchor" href="#组成"></a> 组成</h4>
<blockquote>
<ul>
<li>控制器与<code>CPU</code>的接口: 数据寄存器,控制寄存器,状态寄存器,采用内存映射或专门的<code>I/O</code>指令</li>
<li>控制器与设备的接口: 数据信号,控制信号,状态信号</li>
<li><code>I/O</code>逻辑: 用于实现<code>CPU</code>对<code>I/O</code>设备控制</li>
</ul>
</blockquote>
<h3 id="io端口地址"><a class="markdownIt-Anchor" href="#io端口地址"></a> I/O端口地址</h3>
<p><code>I/O</code>端口地址指的是接口电路中每个寄存器具有唯一的地址</p>
<p>每个设备的<code>I/O</code>端口地址形成<code>I/O</code>地址空间,由OS保护</p>
<p><code>I/O</code>指令形式和<code>I/O</code>地址相关联,分类如下:</p>
<blockquote>
<ul>
<li>内存映像编址(内存映像<code>I/O</code>模式):</li>
<li>
<ul>
<li>控制器的寄存器作为物理空间的一部分,可以直接通过地址访问</li>
</ul>
</li>
<li><code>I/O</code>独立编址(<code>I/O</code>专用指令):</li>
<li>
<ul>
<li>由专门的指令访问<code>I/O</code>端口,就像<code>CP0</code>中的寄存器通过<code>mfc0,mtc0</code>访问类似,<code>add</code>等指令无法访问<code>CP0</code>寄存器,<code>intel</code>架构中有<code>in/out</code>指令</li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="内存映像io模式特点"><a class="markdownIt-Anchor" href="#内存映像io模式特点"></a> 内存映像<code>I/O</code>模式特点:</h4>
<p><strong>优点</strong>:</p>
<blockquote>
<ul>
<li>不需要特殊的保护机制来组织用于进程访问,只需要当成内核地址一样即可.</li>
<li>不需要额外指令集,减轻编程负担</li>
</ul>
</blockquote>
<p><strong>缺点</strong>:</p>
<blockquote>
<ul>
<li>不允许把控制寄存器放入高速缓存,因为该寄存器的值会改变</li>
</ul>
</blockquote>
<h4 id="io独立编址特点"><a class="markdownIt-Anchor" href="#io独立编址特点"></a> <code>I/O</code>独立编址特点:</h4>
<p><strong>优点</strong>:</p>
<blockquote>
<ul>
<li>外设不占用地址空间</li>
<li>编程时易区分是对内存操作还是<code>I/O</code>操作</li>
</ul>
</blockquote>
<p><strong>缺点</strong>:</p>
<blockquote>
<ul>
<li><code>I/O</code>指令少,操作不灵活</li>
</ul>
</blockquote>
<h3 id="io控制方式-2"><a class="markdownIt-Anchor" href="#io控制方式-2"></a> I/O控制方式</h3>
<blockquote>
<ul>
<li>程序控制<code>I/O</code>:也称轮询或者查询方式<code>I/O</code>.</li>
<li>中断驱动:当<code>I/O</code>操作结束后由设备控制器主动来通知驱动程序说这次结束.</li>
<li><code>DMA(Direct Memory Access)</code>:直接存储器访问方式,由一个专门的控制器完成数据到内存和设备或者是从设备到内存的传输工作</li>
<li>通道:与<code>DMA</code>很类似,但是<code>DMA</code>依然离不开<code>CPU</code>,需要<code>CPU</code>的控制信号,通道则更加独立.它有自己的指令和程序专门负责数据输入输出的传输控制.CPU将“传输控制”的功能下放给通道后只负责“数据处理”功能.这样,通道与CPU分时使用内存，实现了CPU内部运算与I/O设备的并行工作.</li>
</ul>
</blockquote>
<h4 id="程序控制io"><a class="markdownIt-Anchor" href="#程序控制io"></a> 程序控制<code>I/O</code></h4>
<p><strong>程序控制I/O</strong>:<br />
<img src="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6IO.svg" alt="程序控制I/O" /></p>
<h4 id="中断驱动"><a class="markdownIt-Anchor" href="#中断驱动"></a> 中断驱动</h4>
<p><strong>中断驱动</strong>:<br />
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/%E4%B8%AD%E6%96%AD%E9%A9%B1%E5%8A%A8.svg"
                      alt="中断驱动" 
                ></p>
<h4 id="dma"><a class="markdownIt-Anchor" href="#dma"></a> DMA</h4>
<blockquote>
<ul>
<li>命令/状态寄存器(<code>CR</code>):用于接受从CPU发送来的I/O命令,或有关控制信息,或设备状态.</li>
<li>内存地址寄存器(<code>MAR</code>):在输入时,它存放把数据从设备传送到内存的起始目标地址,在输出的时候,它存方由内存到设备的内存源地址.</li>
<li>数据寄存器(<code>DR</code>):用于暂存从设备到内存,或从内存到设备的数据.</li>
<li>数据计数器(<code>DC</code>):存放本次<code>CPU</code>要读或写的字节数.<br />
<strong>DMA</strong>:<br />
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/DMA.svg"
                      alt="DMA" 
                ></li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>优点:</li>
<li>
<ul>
<li><code>CPU</code>只需要干预<code>I/O</code>操作的开始和结束,后续数据读写无需CPU控制</li>
</ul>
</li>
<li>缺点:</li>
<li>
<ul>
<li>数据传输方向,地址,数据大小都由CPU控制,占用<code>CPU</code>时间</li>
</ul>
</li>
<li>
<ul>
<li>每个设备占用一个<code>DMA</code>控制器,当设备增加的时候,需要增加新的<code>DMA</code>控制器</li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="io通道"><a class="markdownIt-Anchor" href="#io通道"></a> I/O通道</h4>
<p><strong>基本思想</strong>:<br />
进一步减少<code>CPU</code>的干预.</p>
<p><code>I/O</code>通道有自己的处理器和指令体系,独立于<code>CPU</code>,可进行更复杂的<code>I/O</code>控制.通道程序通常由操作系统构造,放在内存.</p>
<blockquote>
<ul>
<li>优点:</li>
<li>
<ul>
<li>执行一个通道程序可以完成机组I/O操作,减少<code>CPU</code>干预.</li>
</ul>
</li>
<li>缺点:</li>
<li>
<ul>
<li>费用高</li>
</ul>
</li>
</ul>
</blockquote>
<p><strong>I/O通道分类</strong></p>
<blockquote>
<ul>
<li>字节多路通道</li>
<li>以字节为单位交叉工作:当为一台设备传送一个字节后,立即转去为另一台设备传送一个字节,是用于低速或中速<code>I/O</code>设备.</li>
<li>选择通道</li>
<li>以组方式工作:每次传送一批数据,传送速率很高,但一段时间只能为一个设备服务.当当前<code>I/O</code>请求处理完之后,就选择另一台设备服务,适用于高速设备.</li>
<li>数组多路通道</li>
<li>综合字节多路通道<strong>分时工作</strong>和<strong>选择通道</strong>传输速率高的特点,实质是:对通道程序采用多道程序设计技术,使得与通道连接而设备可以并行工作.</li>
</ul>
</blockquote>
<h4 id="dma与通道区别"><a class="markdownIt-Anchor" href="#dma与通道区别"></a> DMA与通道区别</h4>
<blockquote>
<ul>
<li>通道更加独立,<code>DMA</code>数据传输方向,地址,大小还脱离不了<code>CPU</code>,通道则有自己的指令体系,执行通道程序就能实现对数据传输控制.</li>
<li>DMA通常只能控制一台或者少数几台同类设备,而一个通道可以同时控制多种设备</li>
</ul>
</blockquote>
<h2 id="io软件"><a class="markdownIt-Anchor" href="#io软件"></a> I/O软件</h2>
<p><strong>层次关系</strong>:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/%E5%B1%82%E6%AC%A1%E5%85%B3%E7%B3%BB.svg"
                      alt="层次关系" 
                ></p>
<h3 id="设备独立性"><a class="markdownIt-Anchor" href="#设备独立性"></a> 设备独立性</h3>
<p>类似于逻辑地址和物理地址的结构,对于设备而言也有逻辑设备和物理设备.应用程序访问的是逻辑设备,经过逻辑设备表转换为物理设备.这样的好处是:</p>
<blockquote>
<ul>
<li>设备分配的灵活性:当计算机连接多台相同设备的时候,如果进程直接访问物理设备,而该物理设备繁忙,那么就会阻塞.如果访问逻辑设备,则是请求的一类设备,由<code>OS</code>完成分配.</li>
<li>易于<code>I/O</code>重定向,用于<code>I/O</code>操作的设备通过修改逻辑设备表即可实现更换,而不需要更换应用程序,同时也提升了程序的可移植性</li>
</ul>
</blockquote>
<h3 id="逻辑设备表lut"><a class="markdownIt-Anchor" href="#逻辑设备表lut"></a> 逻辑设备表(LUT)</h3>
<p>为了实现设备独立性,系统设置的一张由逻辑设备映射到物理设备的表,该表表项包含三项:<strong>逻辑设备名</strong>,<strong>物理设备名</strong>,<strong>驱动程序入口地址</strong>.</p>
<p><code>LUT</code>的设置课采用两种方式:</p>
<blockquote>
<ul>
<li>整个系统设置一张<code>LUT</code>:该表中不能出现重复的逻辑设备名,因此用户不能使用相同的逻辑设备名(保证用户的独立性)</li>
<li>每个用户一张<code>LUT</code>:每个用户登录时,便为该用户建立一个进程,同时设置一张<code>LUT</code>放入进程的<code>PCB</code>中.</li>
</ul>
</blockquote>
<h3 id="设备驱动程序"><a class="markdownIt-Anchor" href="#设备驱动程序"></a> 设备驱动程序</h3>
<p>与设备密切相关的代码放在设备驱动程序中,<strong>每个设备驱动程序处理一种设备类型</strong>.<br />
设备驱动程序的任务时<strong>接受来自于设备无关的上层软件的抽象请求</strong>,并执行请求.<br />
每一个控制器都设有一个或多个设备寄存器,用于存放向设备发送的命令和参数,<strong>设备驱动程序负责释放这些命令,监督正确执行</strong>.<br />
它是I/O设备和设备控制器之间的通信程序<br />
驱动程序与I/O设备的<strong>特性</strong>,<strong>控制方式</strong>,<strong>硬件</strong>密切相关,特殊优化.</p>
<h4 id="设备驱动程序的组成"><a class="markdownIt-Anchor" href="#设备驱动程序的组成"></a> 设备驱动程序的组成</h4>
<blockquote>
<ul>
<li><strong>自动配置和初始化子程序</strong>:检测对应的硬件设备是否存在且正常,并完成对该设备及其相关设备驱动程序所需要的软件状态的初始化.在初始化时被调用一次</li>
<li><strong>I/O操作子程序</strong>:调用该子程序是系统调用的结果,执行该部分程序时仍属于调用它的进程,只是进入了核心态.</li>
<li><strong>中断服务子程序</strong>:系统来接受系统中断,再有系统调用中断服务子程序.因为设备驱动程序一般支持同一类型的若干设备,所以一般在系统调用中断服务子程序的时候,都带有一个或多个参数,以标识请求服务的设备.</li>
</ul>
</blockquote>
<h4 id="设备驱动属于内核"><a class="markdownIt-Anchor" href="#设备驱动属于内核"></a> 设备驱动属于内核</h4>
<p>前面提到,<strong>设备驱动是系统调用的结果</strong>,因此,设备驱动享有内核的一切服务和责任,包括:</p>
<blockquote>
<ul>
<li>设备驱动时内核的一部分,出错将导致系统的严重错误</li>
<li>设备驱动必须为内核提供一个标准接口</li>
<li>
<ul>
<li>驱动程序初始化函数</li>
</ul>
</li>
<li>
<ul>
<li>驱动卸载函数,申请设备函数,释放设备函数</li>
</ul>
</li>
<li>
<ul>
<li><code>I/O</code>操作函数</li>
</ul>
</li>
<li>
<ul>
<li>中断处理函数</li>
</ul>
</li>
<li>可以使用内核服务,如内存分配,中断发送,等待队列</li>
<li>动态可加载</li>
</ul>
</blockquote>
<h3 id="io缓冲管理"><a class="markdownIt-Anchor" href="#io缓冲管理"></a> I/O缓冲管理</h3>
<p>缓冲技术可提高外设利用率</p>
<blockquote>
<ul>
<li>匹配<code>CPU</code>和外设的不同处理速度</li>
<li>减少对<code>CPU</code>的中断次数</li>
<li>提高<code>CPU</code>和<code>I/O</code>设备之间的并行性</li>
</ul>
</blockquote>
<h4 id="单缓冲single-buffer"><a class="markdownIt-Anchor" href="#单缓冲single-buffer"></a> 单缓冲(Single Buffer)</h4>
<p>每当用户进程发出一个I/O请求时,操作系统便在<strong>主存</strong>之中分配一个缓冲区,因为<code>CPU</code>和<code>I/O</code>之间并行,因此数据处理时间为$Max(C,T)+M$</p>
<p><strong>单缓冲</strong>:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/single_buffer.svg"
                      alt="单缓冲" 
                ></p>
<h4 id="双缓冲double-buffer"><a class="markdownIt-Anchor" href="#双缓冲double-buffer"></a> 双缓冲(Double Buffer)</h4>
<p>两个缓冲区,<code>CPU</code>和外设都可以连续处理而无需等待对方.要求<code>CPU</code>和外设的速度相近.在双缓冲时,系统处理一块数据的时间可以粗略认为是$Max(C+M,T)$,如果$C&lt;T$,可使块设备连续输入,如果$C&gt;T$,则可是CPU不必等待设备输入</p>
<p><strong>双缓冲</strong>:<br />
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/double_buffer.svg"
                      alt="双缓冲" 
                ></p>
<h4 id="环形缓冲circular-buffer"><a class="markdownIt-Anchor" href="#环形缓冲circular-buffer"></a> 环形缓冲(Circular Buffer)</h4>
<p>针对<code>CPU</code>和外设处理速度差较大,引入环形缓冲,可将多个缓冲组织成循环缓冲形式.<br />
<strong>组成</strong>:</p>
<blockquote>
<ul>
<li>多个缓冲区:在循环中有多个大小相同的缓冲区.缓冲区可分为三类:<strong>空缓冲区R</strong>,<strong>满缓冲区G</strong>,计算机进程<strong>正在使用的空缓冲区C</strong>.</li>
<li>多个指针:作为输入的缓冲区可设置三个指针,指示计算进程下一个可用缓冲区G的<strong>指针Nextg</strong>,指示输入进程下一个可用的空缓冲区R的<strong>指针Nexti</strong>,指示计算进程正在使用的缓冲区C的指针<strong>Current</strong></li>
</ul>
</blockquote>
<h4 id="缓冲池"><a class="markdownIt-Anchor" href="#缓冲池"></a> 缓冲池</h4>
<p>当系统较大的时候,不可能给每一个进程开一个缓冲区,这会消耗大量内存,因此为了提高利用率,引入了缓冲池,池中设置了多个可供若干个进程共享的缓冲区.池内至少有下面三种缓冲区:</p>
<blockquote>
<ul>
<li>空闲缓冲区,其形成的队列叫做<code>emq</code></li>
<li>装满输入数据的缓冲区,其形成的队列叫做<code>inq</code></li>
<li>装满输出数据的缓冲区,其形成的队列叫做<code>outq</code></li>
</ul>
</blockquote>
<p><strong>缓冲池</strong>:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/buffer_pool.svg"
                      alt="缓冲池" 
                ></p>
<h3 id="io设备管理"><a class="markdownIt-Anchor" href="#io设备管理"></a> I/O设备管理</h3>
<p>由于外设资源有限,需解决进程间的外设共享问题,以提高外设资源的利用率,有常见一下两种做法:</p>
<blockquote>
<ul>
<li>在进程间切换使用外设</li>
<li>通过一个虚拟设备把外设和应用进程隔开,只由虚拟设备来使用外设.</li>
</ul>
</blockquote>
<h4 id="dctdevice-control-table设备控制表"><a class="markdownIt-Anchor" href="#dctdevice-control-table设备控制表"></a> DCT(Device Control Table)设备控制表</h4>
<p>每个设备一张,描述设备特性和状态.</p>
<blockquote>
<ul>
<li>类型</li>
<li>标识符</li>
<li>状态:表示设备使用状态</li>
<li>指向控制器表的指针:指向该设备所连接的控制器的控制表</li>
<li>重复执行次数或时间:发生传送错误时应重复执行的次数</li>
<li>设备队列的队首指针:指向申请本设备而没有满足的进程排成的表</li>
</ul>
</blockquote>
<h4 id="coctcontroller-control-table控制器控制表"><a class="markdownIt-Anchor" href="#coctcontroller-control-table控制器控制表"></a> COCT(Controller Control Table)控制器控制表</h4>
<p>每个设备控制器一张,描述控制器的配置和状态</p>
<h4 id="chctchannel-control-table通道控制表"><a class="markdownIt-Anchor" href="#chctchannel-control-table通道控制表"></a> CHCT(Channel Control Table)通道控制表</h4>
<p>每个通道一张,描述通道工作状态</p>
<h4 id="sdtsystem-device-table系统设备表"><a class="markdownIt-Anchor" href="#sdtsystem-device-table系统设备表"></a> SDT(System Device Table)系统设备表</h4>
<p>反映系统中设备资源的状态,记录所有设备的状态及其设备控制表的入口</p>
<blockquote>
<ul>
<li>DCT指针:指向相应设备的DCT</li>
<li>设备使用进程表示:正在使用该设备的进程标识</li>
<li>DCT信息:为引用方便而保存的DCT信息,如设备标识,设备类型</li>
</ul>
</blockquote>
<h4 id="设备分配考虑因素"><a class="markdownIt-Anchor" href="#设备分配考虑因素"></a> 设备分配考虑因素</h4>
<blockquote>
<ul>
<li>设备固有属性</li>
<li>设备分配算法</li>
<li>设备分配中的安全性:死锁</li>
<li>安全分配(同步):进程分配之后进入阻塞,直到I/O完成,但是<code>CPU</code>和<code>I/O</code>串行,效率低</li>
<li>不安全分配(异步):进程发出请求后,仍然继续运行,可申请其他设备,可能产生死锁,需进行检查,但是效率高.</li>
</ul>
</blockquote>
<h4 id="单多通路io系统的设备分配"><a class="markdownIt-Anchor" href="#单多通路io系统的设备分配"></a> 单(多)通路I/O系统的设备分配</h4>
<p>单(多)通路:一个设备对应一(多)个控制器,一个控制器对应一(多)个通道.</p>
<blockquote>
<ul>
<li>分配设备</li>
<li>根据物理设备名查找SDT,找到DCT,如果忙,则等待,否则计算是否产生死锁,进行分配</li>
<li>分配设备控制器</li>
<li>进程得到DCT之后,找到对应的COCT,如果空闲则分配,否则进入等待队列</li>
<li>分配通道</li>
<li>进程得到COCT之后,找到对应的CHCT,如果空闲则分配,否则进入等待队列</li>
</ul>
</blockquote>
<h4 id="spooling技术假脱机技术"><a class="markdownIt-Anchor" href="#spooling技术假脱机技术"></a> SPOOLing技术/假脱机技术</h4>
<p><code>SPOOLing(Simultaneous Peripheral Operation On Line)</code>也称为虚拟设备技术,可把独享设备转换成具有共享特征的虚拟设备,提高设备利用率</p>
<p><strong>引入</strong><br />
在多道程序系统中,专门利用移到程序(<code>SPOOLing</code>程序)来完成对设备的I/O操作,无需使用外围I/O处理机</p>
<blockquote>
<ul>
<li><code>SPOOLing</code>程序和外设进行数据交换:实际I/O:</li>
<li>
<ul>
<li>输入:程序预先从外设读入数据并且加以缓冲,在需要的时候输入到应用程序</li>
</ul>
</li>
<li>
<ul>
<li>输出:程序预先接受应用程序的输出数据加以缓冲,在适当时机输出到外设</li>
</ul>
</li>
<li><code>SPOOLing</code>程序和用户程序进行数据交换:虚拟I/O</li>
</ul>
</blockquote>
<p><strong>系统组成</strong></p>
<blockquote>
<ul>
<li><strong>输入井和输出井</strong>:磁盘上开辟的两个大存储空间.输入井用于模拟脱机输入时的磁盘设备,<strong>暂存输入数据</strong>,输出井模拟脱机输出时的磁盘,用于<strong>暂存用户程序和输出数据</strong>.</li>
<li><strong>输入缓冲区和输出缓冲区</strong>:由于<code>CPU</code>和磁盘速度不匹配而在内存开辟的缓冲区,攒出数据</li>
<li><strong>输入进程<code>SPi</code>和输出进程<code>SPo</code></strong>:利用两个进程模拟脱机<code>I/O</code>时的外围控制机.SPi将输入数据从输入机通过输入缓冲区输入输入金,需要的时候再从输入井读入内存,输出线程将要求输出的数据从内存读入输出井,空闲时将其传送到输出设备.</li>
</ul>
</blockquote>
<p><strong>SPOOLing</strong>:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://the-tarnished.github.io/2022/05/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/images/SPOOLing.svg"
                      alt="SPOOLing" 
                ></p>
<p><strong>特点</strong></p>
<blockquote>
<ul>
<li>告诉虚拟I/O操作:缓冲区提速</li>
<li>实现对独享设备的共享:设备繁忙时,先把数据放入输出井,对于进程来说已经完成了输出.</li>
</ul>
</blockquote>
<h3 id="io性能问题"><a class="markdownIt-Anchor" href="#io性能问题"></a> I/O性能问题</h3>
<p>解决<code>I/O</code>性能的途径:</p>
<blockquote>
<ul>
<li>使<code>I/O</code>尽可能独立于<code>CPU</code>:通过<code>DMA</code>,通道</li>
<li>使<code>CPU</code>的速度尽可能不被<code>I/O</code>拉低:通过缓冲区</li>
</ul>
</blockquote>
<h4 id="io操作过程"><a class="markdownIt-Anchor" href="#io操作过程"></a> I/O操作过程</h4>
<p><code>I/O</code>操作可以分成两部分:</p>
<blockquote>
<ul>
<li>第一阶段:</li>
<li>磁盘把数据装载进内核的内存空间</li>
<li>第二阶段:</li>
<li>内核的内存空间的数据<code>copy</code>到用户的内存空间</li>
</ul>
</blockquote>
<p><code>I/O</code>操作总的步骤:</p>
<blockquote>
<ul>
<li>进程向内核发起系统调用</li>
<li>内核接搜到系统调用,将磁盘中文件读出来</li>
<li>磁盘将文件载入到内核的地址空间</li>
<li>内核的内存空间接收到之后,将其copy到用户进程的内存空间</li>
<li>进程内核内存空间接收到文件,向内核通知</li>
<li>内核唤醒进程</li>
</ul>
</blockquote>
<h4 id="阻塞io"><a class="markdownIt-Anchor" href="#阻塞io"></a> 阻塞I/O</h4>
<p>在最后一步之前,整个进程都会被挂起,待到唤醒之后才继续执行</p>
<h4 id="多路复用io"><a class="markdownIt-Anchor" href="#多路复用io"></a> 多路复用I/O</h4>
<p>工作进程调用一个管理I/O的特殊库函数,此库函数可以接受并管理多个I/O请求,工作进程则可以同时等待多个I/O请求.提高了效率.<br />
第二阶段依然需要工作进程参与库函数,把内核空间数据复制到用户空间,第二阶段依然阻塞.</p>
<h4 id="非阻塞io"><a class="markdownIt-Anchor" href="#非阻塞io"></a> 非阻塞I/O</h4>
<p>进程发起I/O调用,I/O直到需要一段时间,让进程进行其他操作(忙等).</p>
<h4 id="事件信号驱动io"><a class="markdownIt-Anchor" href="#事件信号驱动io"></a> 事件(信号)驱动I/O</h4>
<p>进程发起调用,内核会记住那个进程申请的,一旦第一个阶段完成,内核向进程发起通知,进程第二段开始阻塞.因此,这样进程第一阶段既不阻塞,也不忙等.</p>
<h4 id="异步io"><a class="markdownIt-Anchor" href="#异步io"></a> 异步I/O</h4>
<p>无论第一第二段, 不再向系统调用提出任何反馈, 只有数据完全复制到服务进程内存中后, 才向服务进程返回ok的信息,其它时间,进程可以随意做自己的事情,直到内核通知ok信息。</p>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li><strong>Title:</strong> OS_theory_5</li>
        <li><strong>Author:</strong> Charles</li>
        <li><strong>Created at
                :</strong> 2022-12-31 17:31:13</li>
        
            <li>
                <strong>Updated at
                    :</strong> 2023-06-17 14:13:59
            </li>
        
        <li>
            <strong>Link:</strong> https://charles2530.github.io/2022/12/31/os-theory-5/
        </li>
        <li>
            <strong>
                License:
            </strong>
            
            This work is licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a>.
            

        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/tags/OS/">#OS</a>&nbsp;
                    </li>
                
            </ul>
        

        
  <div class="recommended-article">
   <div class="recommended-desktop">
    <div class="recommended-article-header">
     <i aria-hidden="true"></i><span>recommend_articles</span>
    </div>
    <div class="recommended-article-group"><a class="recommended-article-item" href="/2023/06/27/mysql-note-3/" title="MySQL_note_3" rel="bookmark">
  <img src="https://charles2530.github.io/image/background/p7.jpg" alt="MySQL_note_3" class="!max-w-none">
  <span class="title">MySQL_note_3</span>
</a><a class="recommended-article-item" href="/2023/08/18/css-note-2/" title="css-note-2" rel="bookmark">
  <img src="https://charles2530.github.io/image/background/p5.jfif" alt="css-note-2" class="!max-w-none">
  <span class="title">css-note-2</span>
</a><a class="recommended-article-item" href="/2023/02/05/linux-note-summary/" title="linux-note-summary" rel="bookmark">
  <img src="https://charles2530.github.io/image/background/p3.jfif" alt="linux-note-summary" class="!max-w-none">
  <span class="title">linux-note-summary</span>
</a></div>
   </div>
   <div class="recommended-mobile">
   <div class="recommended-article-header">
     <i aria-hidden="true"></i><span>recommend_articles</span>
   </div>
   <div class="recommended-article-group"><a class="recommended-article-item" href="/2023/06/27/mysql-note-3/" title="MySQL_note_3" rel="bookmark">
  <img src="https://charles2530.github.io/image/background/p7.jpg" alt="MySQL_note_3" class="!max-w-none">
  <span class="title">MySQL_note_3</span>
</a><a class="recommended-article-item" href="/2023/08/18/css-note-2/" title="css-note-2" rel="bookmark">
  <img src="https://charles2530.github.io/image/background/p5.jfif" alt="css-note-2" class="!max-w-none">
  <span class="title">css-note-2</span>
</a></div>
   </div>
  </div>

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                        rel="prev"
                        href="/2022/12/31/tinyml-note/"
                        >
                            <span class="left arrow-icon flex justify-center items-center">
                                <i class="fa-solid fa-chevron-left"></i>
                            </span>
                            <span class="title flex justify-center items-center">
                                <span class="post-nav-title-item">TinyML-note</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                        rel="next"
                        href="/2022/12/31/os-theory-4/"
                        >
                            <span class="title flex justify-center items-center">
                                <span class="post-nav-title-item">OS_theory_4</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex justify-center items-center">
                                <i class="fa-solid fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        


        
            <div class="comment-container">
                <div class="comments-container pjax">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fa-solid fa-comments"></i>&nbsp;Comments
    </div>
    

        <!-- 
            
    <div id="gitalk-container"></div>
    <script data-swup-reload-script
            src="//cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js"></script>
    <script data-swup-reload-script>

        function loadGitalk() {
            let __gitalk__pathname = decodeURI(location.pathname);
            const __gitalk__pathnameLength = __gitalk__pathname.length;
            const __gitalk__pathnameMaxLength = 50;
            if (__gitalk__pathnameLength > __gitalk__pathnameMaxLength) {
                __gitalk__pathname = __gitalk__pathname.substring(0, __gitalk__pathnameMaxLength - 3) + '...';
            }

            try {
                Gitalk && new Gitalk({
                    clientID: '8083299a8ee2aaf23879',
                    clientSecret: 'a8161e81d4872181e884fdb69f7be24916b6a9d0',
                    repo: 'charles2530_issues',
                    owner: 'Charles2530',
                    admin: ['Charles2530'],
                    id: __gitalk__pathname,
                    language: 'en'
                }).render('gitalk-container');

            } catch (e) {
                window.Gitalk = null;
            }
        }

        if ('true') {
            const loadGitalkTimeout = setTimeout(() => {
                loadGitalk();
                clearTimeout(loadGitalkTimeout);
            }, 1000);
        } else {
            window.addEventListener('DOMContentLoaded', loadGitalk);
        }
    </script>



         -->
        <script src="https://utteranc.es/client.js" repo="Charles2530/Charles2530.github.io" issue-term="pathname"
            label="Comment" theme="preferred-color-scheme" crossorigin="anonymous" async>
            </script>
        
</div>
            </div>
        
    </div>

    
        <div class="toc-content-container">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">On this page</div>
        <div class="page-title">OS_theory_5</div>
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#os_theory_5"><span class="nav-text"> OS_theory_5</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#io%E8%AE%BE%E5%A4%87%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E5%92%8C%E5%88%86%E7%B1%BB"><span class="nav-text"> I&#x2F;O设备的基本概念和分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#io%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="nav-text"> I&#x2F;O控制器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89"><span class="nav-text"> 定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#io%E6%8E%A7%E5%88%B6%E5%99%A8%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="nav-text"> I&#x2F;O控制器的功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-text"> 总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#io%E6%8E%A7%E5%88%B6%E6%96%B9%E5%BC%8F"><span class="nav-text"> I&#x2F;O控制方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A8%8B%E5%BA%8F%E7%9B%B4%E6%8E%A5%E6%8E%A7%E5%88%B6%E6%96%B9%E5%BC%8F"><span class="nav-text"> 程序直接控制方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%AD%E6%96%AD%E9%A9%B1%E5%8A%A8%E6%96%B9%E5%BC%8F"><span class="nav-text"> 中断驱动方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dma%E6%96%B9%E5%BC%8F%E7%9B%B4%E6%8E%A5%E5%AD%98%E5%82%A8%E5%99%A8%E5%AD%98%E5%8F%96"><span class="nav-text"> DMA方式（直接存储器存取）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E9%81%93%E6%8E%A7%E5%88%B6%E6%96%B9%E5%BC%8F"><span class="nav-text"> 通道控制方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-2"><span class="nav-text"> 总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#io%E8%BD%AF%E4%BB%B6%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84"><span class="nav-text"> I&#x2F;O软件层次结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#io%E6%A0%B8%E5%BF%83%E5%AD%90%E7%B3%BB%E7%BB%9F"><span class="nav-text"> I&#x2F;O核心子系统</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%81%87%E8%84%B1%E6%9C%BA%E6%8A%80%E6%9C%AF"><span class="nav-text"> 假脱机技术</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-3"><span class="nav-text"> 总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E5%A4%87%E7%9A%84%E5%88%86%E9%85%8D%E4%B8%8E%E5%9B%9E%E6%94%B6"><span class="nav-text"> 设备的分配与回收</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E9%85%8D%E6%96%B9%E5%BC%8F"><span class="nav-text"> 分配方式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E5%85%A8%E5%88%86%E9%85%8D%E6%96%B9%E5%BC%8F"><span class="nav-text"> 安全分配方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8D%E5%AE%89%E5%85%A8%E5%88%86%E9%85%8D%E6%96%B9%E5%BC%8F"><span class="nav-text"> 不安全分配方式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-4"><span class="nav-text"> 总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%93%E5%86%B2%E5%8C%BA%E7%AE%A1%E7%90%86"><span class="nav-text"> 缓冲区管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%93%E5%86%B2%E5%8C%BA%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="nav-text"> 缓冲区的作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-5"><span class="nav-text"> 总结</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86"><span class="nav-text"> 设备管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#io%E7%A1%AC%E4%BB%B6"><span class="nav-text"> I&#x2F;O硬件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BA%BF"><span class="nav-text"> 总线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#io%E7%B3%BB%E7%BB%9F"><span class="nav-text"> I&#x2F;O系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#io%E8%AE%BE%E5%A4%87%E4%B8%8E%E7%AE%A1%E7%90%86"><span class="nav-text"> I&#x2F;O设备与管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%86%E7%B1%BB"><span class="nav-text"> 分类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86-2"><span class="nav-text"> 设备管理</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E5%A4%87%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="nav-text"> 设备控制器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%9F%E8%83%BD"><span class="nav-text"> 功能</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%84%E6%88%90"><span class="nav-text"> 组成</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#io%E7%AB%AF%E5%8F%A3%E5%9C%B0%E5%9D%80"><span class="nav-text"> I&#x2F;O端口地址</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%85%E5%AD%98%E6%98%A0%E5%83%8Fio%E6%A8%A1%E5%BC%8F%E7%89%B9%E7%82%B9"><span class="nav-text"> 内存映像I&#x2F;O模式特点:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#io%E7%8B%AC%E7%AB%8B%E7%BC%96%E5%9D%80%E7%89%B9%E7%82%B9"><span class="nav-text"> I&#x2F;O独立编址特点:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#io%E6%8E%A7%E5%88%B6%E6%96%B9%E5%BC%8F-2"><span class="nav-text"> I&#x2F;O控制方式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6io"><span class="nav-text"> 程序控制I&#x2F;O</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%AD%E6%96%AD%E9%A9%B1%E5%8A%A8"><span class="nav-text"> 中断驱动</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dma"><span class="nav-text"> DMA</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#io%E9%80%9A%E9%81%93"><span class="nav-text"> I&#x2F;O通道</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dma%E4%B8%8E%E9%80%9A%E9%81%93%E5%8C%BA%E5%88%AB"><span class="nav-text"> DMA与通道区别</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#io%E8%BD%AF%E4%BB%B6"><span class="nav-text"> I&#x2F;O软件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E6%80%A7"><span class="nav-text"> 设备独立性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E8%AE%BE%E5%A4%87%E8%A1%A8lut"><span class="nav-text"> 逻辑设备表(LUT)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8%E7%A8%8B%E5%BA%8F"><span class="nav-text"> 设备驱动程序</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%BB%84%E6%88%90"><span class="nav-text"> 设备驱动程序的组成</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8%E5%B1%9E%E4%BA%8E%E5%86%85%E6%A0%B8"><span class="nav-text"> 设备驱动属于内核</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#io%E7%BC%93%E5%86%B2%E7%AE%A1%E7%90%86"><span class="nav-text"> I&#x2F;O缓冲管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%95%E7%BC%93%E5%86%B2single-buffer"><span class="nav-text"> 单缓冲(Single Buffer)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%8C%E7%BC%93%E5%86%B2double-buffer"><span class="nav-text"> 双缓冲(Double Buffer)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%8E%AF%E5%BD%A2%E7%BC%93%E5%86%B2circular-buffer"><span class="nav-text"> 环形缓冲(Circular Buffer)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%93%E5%86%B2%E6%B1%A0"><span class="nav-text"> 缓冲池</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#io%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86"><span class="nav-text"> I&#x2F;O设备管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#dctdevice-control-table%E8%AE%BE%E5%A4%87%E6%8E%A7%E5%88%B6%E8%A1%A8"><span class="nav-text"> DCT(Device Control Table)设备控制表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#coctcontroller-control-table%E6%8E%A7%E5%88%B6%E5%99%A8%E6%8E%A7%E5%88%B6%E8%A1%A8"><span class="nav-text"> COCT(Controller Control Table)控制器控制表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#chctchannel-control-table%E9%80%9A%E9%81%93%E6%8E%A7%E5%88%B6%E8%A1%A8"><span class="nav-text"> CHCT(Channel Control Table)通道控制表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sdtsystem-device-table%E7%B3%BB%E7%BB%9F%E8%AE%BE%E5%A4%87%E8%A1%A8"><span class="nav-text"> SDT(System Device Table)系统设备表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E5%A4%87%E5%88%86%E9%85%8D%E8%80%83%E8%99%91%E5%9B%A0%E7%B4%A0"><span class="nav-text"> 设备分配考虑因素</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%95%E5%A4%9A%E9%80%9A%E8%B7%AFio%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%AE%BE%E5%A4%87%E5%88%86%E9%85%8D"><span class="nav-text"> 单(多)通路I&#x2F;O系统的设备分配</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#spooling%E6%8A%80%E6%9C%AF%E5%81%87%E8%84%B1%E6%9C%BA%E6%8A%80%E6%9C%AF"><span class="nav-text"> SPOOLing技术&#x2F;假脱机技术</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#io%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98"><span class="nav-text"> I&#x2F;O性能问题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#io%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B"><span class="nav-text"> I&#x2F;O操作过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%98%BB%E5%A1%9Eio"><span class="nav-text"> 阻塞I&#x2F;O</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8io"><span class="nav-text"> 多路复用I&#x2F;O</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9D%9E%E9%98%BB%E5%A1%9Eio"><span class="nav-text"> 非阻塞I&#x2F;O</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E4%BB%B6%E4%BF%A1%E5%8F%B7%E9%A9%B1%E5%8A%A8io"><span class="nav-text"> 事件(信号)驱动I&#x2F;O</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%82%E6%AD%A5io"><span class="nav-text"> 异步I&#x2F;O</span></a></li></ol></li></ol></li></ol></li></ol>

    </div>
</div>
        </div>
    
</div>



                

            </div>

            

        </div>

        <div class="main-content-footer">
            <footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color">
    <div class="info-container py-3 text-center">
        
        <div class="text-center">
            &copy;
            
              <span>2022</span>
              -
            
            2023&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">Charles</a>
        </div>
        
            <script data-swup-reload-script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="relative text-center lg:absolute lg:right-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-right">
                
                    <span id="busuanzi_container_site_uv" class="lg:!block">
                        <span class="text-sm">Visitor Count</span>
                        <span id="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="lg:!block">
                        <span class="text-sm">Total Page Views</span>
                        <span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left">
            <span class="lg:block text-sm">Powered by Charles</span>
            <span class="text-sm lg:block">Theme&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.4.4</a></span>
        </div>
        
        
            <div>
                Blog up for <span class="odometer" id="runtime_days" ></span> days <span class="odometer" id="runtime_hours"></span> hrs <span class="odometer" id="runtime_minutes"></span> Min <span class="odometer" id="runtime_seconds"></span> Sec
            </div>
        
        
            <script data-swup-reload-script>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
            
                
        
                
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fa-regular fa-comments"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-expand-width flex justify-center items-center">
            <i class="fa-regular fa-expand"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        
            <li class="right-bottom-tools rss flex justify-center items-center">
                <a class="flex justify-center items-center"
                   href="/atom.xml"
                   target="_blank"
                >
                <i class="fa-regular fa-rss"></i>
                </a>
            </li>
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex justify-center items-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fa-solid fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fa-solid fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>


    <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/libs/Swup.min.js"></script><script src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/libs/SwupSlideTheme.min.js"></script><script src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/libs/SwupScriptsPlugin.min.js"></script><script src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/libs/SwupProgressPlugin.min.js"></script><script src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/libs/SwupScrollPlugin.min.js"></script>
<script>
    const swup = new Swup({
        plugins: [
            new SwupScriptsPlugin({
                optin: true,
            }),
            new SwupProgressPlugin(),
            new SwupScrollPlugin({
                offset: 80,
            }),
            new SwupSlideTheme({
                mainElement: ".main-content-body",
            }),
        ],
        containers: ["#swup"],
    });

    swup.hooks.on("page:view", () => {
        Global.refresh();
    });

    // if (document.readyState === "complete") {
    //
    // } else {
    //     document.addEventListener("DOMContentLoaded", () => init());
    // }
</script>





            <script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/utils.js"></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/main.js"></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/layouts/navbarShrink.js"></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/tools/scrollTopBottom.js"></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/tools/lightDarkSwitch.js"></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/layouts/categoryList.js"></script>


    <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/tools/localSearch.js"></script>



    <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/tools/codeBlock.js"></script>



    <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/layouts/lazyload.js"></script>



    <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/tools/runtime.js"></script>
    <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/libs/odometer.min.js"></script>
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/assets/odometer-theme-minimal.css">



  <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/libs/Typed.min.js"></script>
  <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/plugins/typed.js"></script>



    <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/libs/mermaid.min.js"></script>
    <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/plugins/mermaid.js"></script>



    <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/libs/minimasonry.min.js"></script>
    <script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/plugins/masonry.js"></script>



<div class="post-scripts" data-swup-reload-script>
    
        <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/libs/anime.min.js"></script>
        <script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/tools/tocToggle.js"></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/layouts/toc.js"></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.4.4/source/js/plugins/tabs.js"></script>
    
</div>

                
    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</body>

</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/love.js"></script>