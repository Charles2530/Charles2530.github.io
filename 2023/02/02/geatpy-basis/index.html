<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Charles">
    
    <meta name="author" content="Charles">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    
        
            <link rel="preconnect" href="https://npm.elemecdn.com" crossorigin>
        
    
    <!--- Seo Part-->
    
    <link rel="canonical" href="http://charles2530.github.io/2023/02/02/geatpy-basis/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="post by Charles in 2023-02-02 22:15:02">
<meta property="og:type" content="article">
<meta property="og:title" content="Geatpy_basis">
<meta property="og:url" content="http://charles2530.github.io/2023/02/02/geatpy-basis/index.html">
<meta property="og:site_name" content="Charles&#39;s Castle">
<meta property="og:description" content="post by Charles in 2023-02-02 22:15:02">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/G1wvqrNZ0Z4eqako/img/1ba3f473-4fad-43d8-aeff-f078c27bb482.png">
<meta property="og:image" content="https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/G1wvqrNZ0Z4eqako/img/b8b5f0fe-9044-4924-9c1f-72b58cf88ae5.png">
<meta property="og:image" content="https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/G1wvqrNZ0Z4eqako/img/d430332c-563f-4aca-b2ad-c96550487dfe.png">
<meta property="og:image" content="https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/G1wvqrNZ0Z4eqako/img/03c8d17c-6a6d-46c3-b607-77e74bfe4f31.png">
<meta property="og:image" content="https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/G1wvqrNZ0Z4eqako/img/a3aaec4c-9a9a-493d-ba8c-f95742f4b4b9.png">
<meta property="og:image" content="https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/G1wvqrNZ0Z4eqako/img/24bf566e-3efc-456f-8ae4-d5627e628ffb.png">
<meta property="article:published_time" content="2023-02-02T14:15:02.000Z">
<meta property="article:modified_time" content="2023-02-09T09:53:44.380Z">
<meta property="article:author" content="Du Jinyang">
<meta property="article:tag" content="python">
<meta property="article:tag" content="mathematical-modeling">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/G1wvqrNZ0Z4eqako/img/1ba3f473-4fad-43d8-aeff-f078c27bb482.png">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="https://charles2530.github.io/image/background/favicon.png" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="https://charles2530.github.io/image/background/favicon.png">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="https://charles2530.github.io/image/background/favicon.png">
    <!--- Page Info-->
    
    <title>
        
            Geatpy_basis -
        
        Charles&#39;s Castle
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/fonts/fonts.css">
    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/fonts/Satoshi/satoshi.css">
    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/fonts/Chillax/chillax.css">
    <!--- Font Part-->
    
    
    
    

    <!--- Inject Part-->
    
    <script id="hexo-configurations">
    let Global = window.Global || {};
    Global.hexo_config = {"hostname":"charles2530.github.io","root":"/","language":"en","path":"search.xml"};
    Global.theme_config = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":true,"list":["lol","Neo","God"]},"code_block":{"copy":true,"style":"mac","font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":6,"number":false,"expand":true,"init_open":true},"copyright":true,"lazyload":true,"recommendation":{"enable":true,"title":"recommend_articles","limit":3,"mobile_limit":2,"placeholder":"https://charles2530.github.io/image/background/p3.jfif","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":"#1890ff"},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":true},"scroll_progress":{"bar":true,"percentage":true},"busuanzi_counter":{"enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"pjax":true,"open_graph":true,"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"https://charles2530.github.io/image/background/background-light1.jpg","dark":"https://charles2530.github.io/image/background/background-dark1.jpg"},"title":"Charles's Castle","subtitle":{"text":["Happiness is best!","Never give up!","Everyday is a gift!"],"hitokoto":{"enable":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#000000","dark":"#d1d1b6"},"text_style":{"title_size":"3.2rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":true,"links":{"github":"https://github.com/Charles2530/","zhihu":"https://www.zhihu.com/people/yang-guang-xiao-zi-55-55","email":"charles2530@163.com"}}},"plugins":{"feed":{"enable":true},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null},{"name":null,"artist":null,"url":null,"cover":null}]},"mermaid":{"enable":true,"version":"9.3.0"}},"version":"2.2.0","navbar":{"auto_hide":true,"color":{"left":"#f78736","right":"#367df7","transparency":35},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Categories":{"path":"/categories","icon":"fas fa-bookmark"},"Tags":{"path":"/tags","icon":"fas fa-tags"},"About":{"icon":"fa-regular fa-user","submenus":{"Me":"/about","Github":"https://github.com/Charles2530/","Blog":"https://charles2530.github.io"}}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":"This is Charles's Castle","links":{"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Photos":{"icon":"fa-solid fa-image","path":"/masonry/"},"Essays":{"icon":"fa-solid fa-message-lines","path":"/essay/"},"Friends":{"icon":"fa-solid fa-user-group","path":"/friends/"}}},"article_date_format":"auto","categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}},"footerStart":"2022/12/27 00:00:00"};
    Global.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
    Global.data_config = {"masonry":true};
  </script>
    
    <!--- Fontawesome Part-->
    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/fontawesome/fontawesome.min.css">
    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/fontawesome/brands.min.css">
    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/fontawesome/solid.min.css">
    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/fontawesome/regular.min.css">
    
    
    
    
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Charles's Castle" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>



<body>
  <div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fa-solid fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="main-content-container">

        <div class="main-content-header">
            <header class="navbar-container">
    
    <div class="navbar-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                
                Charles&#39;s Castle
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/"  >
                                    
                                        
                                            <i class="fa-regular fa-house"></i>
                                        
                                        HOME
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/categories"  >
                                    
                                        
                                            <i class="fas fa-bookmark"></i>
                                        
                                        CATEGORIES
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/tags"  >
                                    
                                        
                                            <i class="fas fa-tags"></i>
                                        
                                        TAGS
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="has-dropdown" 
                                    href="#" onClick="return false;">
                                    
                                        
                                            <i class="fa-regular fa-user"></i>
                                        
                                        ABOUT&nbsp;<i class="fa-solid fa-chevron-down"></i>
                                    
                                </a>
                                <!-- Submenu -->
                                
                                    <ul class="sub-menu">
                                    
                                        <li>
                                        <a href="/about">ME
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a target="_blank" rel="noopener" href="https://github.com/Charles2530/">GITHUB
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a href="https://charles2530.github.io">BLOG
                                        </a>
                                        </li>
                                    
                                    </ul>
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile drawer -->
    <div class="navbar-drawer">
        <ul class="drawer-navbar-list">
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/"  >
                             
                                
                                    <i class="fa-regular fa-house"></i>
                                
                                HOME
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/categories"  >
                             
                                
                                    <i class="fas fa-bookmark"></i>
                                
                                CATEGORIES
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/tags"  >
                             
                                
                                    <i class="fas fa-tags"></i>
                                
                                TAGS
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="has-dropdown" 
                        href="#" onClick="return false;">
                            
                                
                                    <i class="fa-regular fa-user"></i>
                                
                                ABOUT&nbsp;<i class="fa-solid fa-chevron-down"></i>
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                              
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" href="/about">ME</a>
                            </li>
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" target="_blank" rel="noopener" href="https://github.com/Charles2530/">GITHUB</a>
                            </li>
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" href="https://charles2530.github.io">BLOG</a>
                            </li>
                        
                    
            

        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">

            
                      
                <div class="article-title">
                    <img src="https://charles2530.github.io/image/background/p3.jpg" alt="Geatpy_basis" />
                    <h1 class="article-title-cover">Geatpy_basis</h1>
                </div>
            
                
            

            
                <div class="article-header">
                    <div class="avatar">
                        <img src="https://charles2530.github.io/image/background/logo.jpg">
                    </div>
                    <div class="info">
                        <div class="author">
                            <span class="name">Charles</span>
                            
                                <span class="author-label">Lv6</span>
                            
                        </div>
                        <div class="meta-info">
                            <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2023-02-02 22:15:02</span>
        <span class="mobile">2023-02-02 22:15</span>
        <span class="hover-info">Created</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2023-02-09 17:53:44</span>
            <span class="mobile">2023-02-09 17:53</span>
            <span class="hover-info">Updated</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/Language/">Language</a>&nbsp;
                    </li>
                
                    <li>
                        &gt; <a href="/categories/Language/python/">python</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/python/">python</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/mathematical-modeling/">mathematical-modeling</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fa-regular fa-typewriter"></i>&nbsp;<span>4.4k Words</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fa-regular fa-clock"></i>&nbsp;<span>17 Mins</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content markdown-body">
                <h1 id="Geatpy-basis"><a href="#Geatpy-basis" class="headerlink" title="Geatpy_basis"></a>Geatpy_basis</h1><h1 id="一、入门"><a href="#一、入门" class="headerlink" title="一、入门"></a><strong>一、入门</strong></h1><h2 id="1、求解器模式入门"><a href="#1、求解器模式入门" class="headerlink" title="1、求解器模式入门"></a><strong>1、求解器模式入门</strong></h2><h3 id="案例-1"><a href="#案例-1" class="headerlink" title="案例 1"></a><strong>案例 1</strong></h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/G1wvqrNZ0Z4eqako/img/1ba3f473-4fad-43d8-aeff-f078c27bb482.png"
                      alt="img"
                ></p>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> geatpy <span class="keyword">as</span> ea</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 构建问题</span></span><br><span class="line">r = <span class="number">1</span>  <span class="comment"># 目标函数需要用到的额外数据</span></span><br><span class="line"><span class="meta">@ea.Problem.single</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">evalVars</span>(<span class="params">Vars</span>):  <span class="comment"># 定义目标函数（含约束）</span></span><br><span class="line">    f = np.<span class="built_in">sum</span>((Vars - r) ** <span class="number">2</span>)  <span class="comment"># 计算目标函数值</span></span><br><span class="line">    x1 = Vars[<span class="number">0</span>]</span><br><span class="line">    x2 = Vars[<span class="number">1</span>]</span><br><span class="line">    CV = np.array([(x1 - <span class="number">0.5</span>)**<span class="number">2</span> - <span class="number">0.25</span>,</span><br><span class="line">                    (x2 - <span class="number">1</span>)**<span class="number">2</span> - <span class="number">1</span>])  <span class="comment"># 计算违反约束程度</span></span><br><span class="line">    <span class="keyword">return</span> f, CV</span><br><span class="line"></span><br><span class="line">problem = ea.Problem(name=<span class="string">&#x27;soea quick start demo&#x27;</span>,</span><br><span class="line">                        M=<span class="number">1</span>,  <span class="comment"># 目标维数</span></span><br><span class="line">                        maxormins=[<span class="number">1</span>],  <span class="comment"># 目标最小最大化标记列表，1：最小化该目标；-1：最大化该目标</span></span><br><span class="line">                        Dim=<span class="number">5</span>,  <span class="comment"># 决策变量维数</span></span><br><span class="line">                        varTypes=[<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],  <span class="comment"># 决策变量的类型列表，0：实数；1：整数</span></span><br><span class="line">                        lb=[-<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>],  <span class="comment"># 决策变量下界</span></span><br><span class="line">                        ub=[<span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">1</span>],  <span class="comment"># 决策变量上界</span></span><br><span class="line">                        evalVars=evalVars)</span><br><span class="line"><span class="comment"># 构建算法</span></span><br><span class="line">algorithm = ea.soea_SEGA_templet(problem,</span><br><span class="line">                                    ea.Population(Encoding=<span class="string">&#x27;RI&#x27;</span>, NIND=<span class="number">20</span>),</span><br><span class="line">                                    MAXGEN=<span class="number">50</span>,  <span class="comment"># 最大进化代数。</span></span><br><span class="line">                                    logTras=<span class="number">1</span>,  <span class="comment"># 表示每隔多少代记录一次日志信息，0表示不记录。</span></span><br><span class="line">                                    trappedValue=<span class="number">1e-6</span>,  <span class="comment"># 单目标优化陷入停滞的判断阈值。</span></span><br><span class="line">                                    maxTrappedCount=<span class="number">10</span>)  <span class="comment"># 进化停滞计数器最大上限值。</span></span><br><span class="line"><span class="comment"># 求解</span></span><br><span class="line">res = ea.optimize(algorithm, seed=<span class="number">1</span>, verbose=<span class="literal">True</span>, drawing=<span class="number">1</span>, outputMsg=<span class="literal">True</span>, drawLog=<span class="literal">False</span>, saveFlag=<span class="literal">True</span>, dirName=<span class="string">&#x27;result&#x27;</span>)</span><br></pre></td></tr></table></figure></div>
<h4 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h4><ol>
<li>从上述代码可见，我们可以先定义一个目标函数，然后创建问题，再是构建算法，最后调用optimize()函数求解。 在上面的例子中，我们在定义目标函数时，加了一个@ea.Problem.single的标记。它可以让目标函数evalVars()的传入参数是一个Numpy ndarray类型的一维数组，它的实际含义是种群的某个个体对应的决策变量。在evalVars()中，我们通过f=np.sum((Vars - r) ** 2)计算出这组决策变量对应的目标函数值。</li>
<li>然后通过CV = np.array([(x1 - 0.5)<strong>2 - 0.25, (x2 - 1)</strong>2 - 1])来计算违反约束程度值。这是因为该问题除了变量范围外，有2个不等式约束。如果(x1−0.5)2−0.25的值大于0，就说明违反了(x1−0.5)2 \le 0.25的约束，并且(x1−0.5)^2的值越大，违反约束的程度就越大。我们把计算得到的两个约束的违反约束程度值拼合在一起组成一个一维数组，就得到一个数组表示这组决策变量所有的违反约束程度值。</li>
<li>代码的第15行，这里调用了Geatpy的Problem问题类的构造函数，得到一个问题对象。 其中maxormins是一个记录着各个目标函数是最小化抑或是最大化的Numpy array行向量，其中元素为1表示对应的目标是最小化目标；为-1表示对应的是最大化目标。例如M=3，maxormins=array([1,-1,1])，此时表示有三个优化目标，其中第一、第三个是最小化目标，第二个是最大化目标。varTypes是一个记录着决策变量类型的行向量，其中的元素为0表示对应的决策变量是连续型变量；为1表示对应的是离散型变量。</li>
<li>接着，第24行，我们实例化了Geatpy内置实现的一个进化算法类的对象。其中第25行定义了该进化算法用什么样的种群去进化。Encoding=’RI’表示改种群的染色体是’RI’编码，即“实数整数混合编码”，简称“实整数编码”。类似的还有’P’编码（排列编码，可以让对应的变量互不相同）、’BG’编码（二进制/格雷码编码）。然后NIND=20设定了种群有20个个体。</li>
<li>最后，在第31行，调用geatpy的optimize()函数进行求解。其中seed=1表示设置随机数种子。如果不想设置随机数种子，则把它设为None，或者不把它传入到optimize()函数中。dirName=’result’表示把求解结果以文件的形式保存在当前工作目录下的result文件夹中。如果不传入dirName或者设dirName为None，则默认会以求解的起始时间的信息作为文件夹，把结果保存在里面。optimize()函数的其他传入参数以及31行获得的返回值res（类型为python字典）的内容可以用help(ea.optimize)或跳转进入源码查看。例如res[‘ObjV’]表示算法搜索到的最佳目标函数值（它是个Numpy ndarray二维数组，每一行表示一组目标函数值。）；res[‘Vars’]表示对应的决策变量值矩阵（Numpy ndarray二维数组，每一行表示一组决策变量值）。</li>
</ol>
<div class="highlight-container" data-rel="Scss"><figure class="iseeu highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">help(ea.optimize)</span><br></pre></td></tr></table></figure></div>
<p>optimize(algorithm, seed=None, prophet=None, verbose=None, drawing=None, outputMsg=True, drawLog=True, saveFlag=True, dirName=None, **kwargs)</p>
<p>描述: 该函数用于快速部署问题和算法，然后对问题进行求解。</p>
<p>输入参数:</p>
<p> algorithm : <class: class> - 算法类的引用。</p>
<p> seed : int - 随机数种子。</p>
<p> prophet : <class: Population> / Numpy ndarray - 先验知识。可以是种群对象，</p>
<p> 也可以是一组或多组决策变量组成的矩阵（矩阵的每一行对应一组决策变量）。</p>
<p> verbose : bool - 控制是否在输入输出流中打印输出日志信息。</p>
<p> 该参数将被传递给algorithm.verbose。</p>
<p> 如果algorithm已设置了该参数的值，则调用optimize函数时，可以不传入该参数。</p>
<p> drawing : int - 算法类控制绘图方式的参数，</p>
<p> 0表示不绘图；</p>
<p> 1表示绘制最终结果图；</p>
<p> 2表示实时绘制目标空间动态图；</p>
<p> 3表示实时绘制决策空间动态图。</p>
<p> 该参数将被传递给algorithm.drawing。</p>
<p> 如果algorithm已设置了该参数的值，则调用optimize函数时，可以不传入该参数。</p>
<p> outputMsg : bool - 控制是否输出结果以及相关指标信息。</p>
<p> drawLog : bool - 用于控制是否根据日志绘制迭代变化图像。</p>
<p> saveFlag : bool - 控制是否保存结果。</p>
<p> dirName : str - 文件保存的路径。当缺省或为None时，默认保存在当前工作目录的’result of job xxxx-xx-xx xxh-xxm-xxs’文件夹下。</p>
<p>输出参数:</p>
<p> result : dict - 一个保存着结果的字典。内容为：</p>
<p> {‘success’: True or False, # 表示算法是否成功求解。</p>
<p> ‘stopMsg’: xxx, # 存储着算法停止原因的字符串。</p>
<p> ‘optPop’: xxx, # 存储着算法求解结果的种群对象。如果无可行解，则optPop.sizes=0。optPop.Phen为决策变量矩阵，optPop.ObjV为目标函数值矩阵。</p>
<p> ‘lastPop’: xxx, # 算法进化结束后的最后一代种群对象。</p>
<p> ‘Vars’: xxx, # 等于optPop.Phen，此处即最优解。若无可行解，则Vars=None。</p>
<p> ‘ObjV’: xxx, # 等于optPop.ObjV，此处即最优解对应的目标函数值。若无可行解，ObjV=None。</p>
<p> ‘CV’: xxx, # 等于optPop.CV，此处即最优解对应的违反约束程度矩阵。若无可行解，CV=None。</p>
<p> ‘startTime’: xxx, # 程序执行开始时间。</p>
<p> ‘endTime’: xxx, # 程序执行结束时间。</p>
<p> ‘executeTime’: xxx, # 算法所用时间。</p>
<p> ‘nfev’: xxx, # 算法评价次数</p>
<p> ‘gd’: xxx, # (多目标优化且给定了理论最优解时才有) GD指标值。</p>
<p> ‘igd’: xxx, # (多目标优化且给定了理论最优解时才有) IGD指标值。</p>
<p> ‘hv’: xxx, # (多目标优化才有) HV指标值。</p>
<p> ‘spacing’: xxx} # (多目标优化才有) Spacing指标值。</p>
<h4 id="结果"><a href="#结果" class="headerlink" title="结果"></a><strong>结果</strong></h4><div class="highlight-container" data-rel="Markdown"><figure class="iseeu highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">====================================================================</span><br><span class="line"></span><br><span class="line">gen| eval | f<span class="emphasis">_opt | f_</span>max | f<span class="emphasis">_avg | f_</span>min | f<span class="emphasis">_std</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">\----------------------------------------------------------------------------------</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">0 | 20 | 9.18566E+00 | 9.18566E+00 | 9.18566E+00 | 9.18566E+00 | 0.00000E+00</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">1 | 40 | 5.78235E+00 | 9.18566E+00 | 8.33483E+00 | 5.78235E+00 | 1.47368E+00</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">2 | 60 | 5.78235E+00 | 1.01857E+01 | 8.44530E+00 | 5.78235E+00 | 1.56014E+00</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">3 | 80 | 5.18566E+00 | 9.18566E+00 | 7.10178E+00 | 5.18566E+00 | 1.70646E+00</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">4 | 100 | 2.18566E+00 | 5.78235E+00 | 5.31974E+00 | 2.18566E+00 | 1.00074E+00</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">5 | 120 | 2.18566E+00 | 5.71252E+00 | 4.47875E+00 | 2.18566E+00 | 1.38039E+00</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">6 | 140 | 2.18566E+00 | 5.18566E+00 | 2.88560E+00 | 2.18566E+00 | 1.09847E+00</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">7 | 160 | 2.02037E+00 | 2.18566E+00 | 2.15260E+00 | 2.02037E+00 | 6.61145E-02</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">8 | 180 | 2.00000E+00 | 2.18565E+00 | 2.02762E+00 | 2.00000E+00 | 3.65244E-02</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">9 | 200 | 2.00000E+00 | 2.02037E+00 | 2.01625E+00 | 2.00000E+00 | 8.12936E-03</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">10| 220 | 2.00000E+00 | 2.02037E+00 | 2.00908E+00 | 2.00000E+00 | 9.96122E-03</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">11| 240 | 1.00000E+00 | 2.00000E+00 | 1.95000E+00 | 1.00000E+00 | 2.17945E-01</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">12| 260 | 1.00000E+00 | 2.00000E+00 | 1.80000E+00 | 1.00000E+00 | 4.00000E-01</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">13| 280 | 1.00000E+00 | 2.00000E+00 | 1.45000E+00 | 1.00000E+00 | 4.97494E-01</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">14| 300 | 1.00000E+00 | 1.00000E+00 | 1.00000E+00 | 1.00000E+00 | 0.00000E+00</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">15| 320 | 1.00000E+00 | 1.00000E+00 | 1.00000E+00 | 1.00000E+00 | 0.00000E+00</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">16| 340 | 1.00000E+00 | 1.00000E+00 | 1.00000E+00 | 1.00000E+00 | 0.00000E+00</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">Execution time: 0.012000560760498047 s</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">Evaluation number: 340</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">The best objective value is: 1.0</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">The best variables are:</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">1.0 1.0 2.0 1.0 1.0</span></span><br></pre></td></tr></table></figure></div>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/G1wvqrNZ0Z4eqako/img/b8b5f0fe-9044-4924-9c1f-72b58cf88ae5.png"
                      alt="img"
                ></p>
<h3 id="案例-2"><a href="#案例-2" class="headerlink" title="案例 2"></a><strong>案例 2</strong></h3><p>同样是求解案例1的问题，这里我们在定义目标函数时不加ea.Problem.single标记。这意味着evalVars()传入的是一个Numpy ndarray二维数组。下面直接看代码：</p>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 构建问题</span></span><br><span class="line">r = <span class="number">1</span>  <span class="comment"># 模拟该案例问题计算目标函数时需要用到的额外数据</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">evalVars</span>(<span class="params">Vars</span>):  <span class="comment"># 定义目标函数（含约束）</span></span><br><span class="line">    ObjV = np.<span class="built_in">sum</span>((Vars - r) ** <span class="number">2</span>, <span class="number">1</span>, keepdims=<span class="literal">True</span>)  <span class="comment"># 计算目标函数值</span></span><br><span class="line">    x1 = Vars[:, [<span class="number">0</span>]]  <span class="comment"># 把Vars的第0列取出来</span></span><br><span class="line">    x2 = Vars[:, [<span class="number">1</span>]]  <span class="comment"># 把Vars的第1列取出来</span></span><br><span class="line">    CV = np.hstack([(x1 - <span class="number">0.5</span>) ** <span class="number">2</span> - <span class="number">0.25</span>,</span><br><span class="line">                    (x2 - <span class="number">1</span>) ** <span class="number">2</span> - <span class="number">1</span>])  <span class="comment"># 计算违反约束程度</span></span><br><span class="line">    <span class="keyword">return</span> ObjV, CV  <span class="comment"># 返回目标函数值矩阵和违反约束程度矩阵</span></span><br><span class="line"></span><br><span class="line">problem = ea.Problem(name=<span class="string">&#x27;soea quick start demo&#x27;</span>,</span><br><span class="line">                        M=<span class="number">1</span>,  <span class="comment"># 目标维数</span></span><br><span class="line">                        maxormins=[<span class="number">1</span>],  <span class="comment"># 目标最小最大化标记列表，1：最小化该目标；-1：最大化该目标</span></span><br><span class="line">                        Dim=<span class="number">5</span>,  <span class="comment"># 决策变量维数</span></span><br><span class="line">                        varTypes=[<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],  <span class="comment"># 决策变量的类型列表，0：实数；1：整数</span></span><br><span class="line">                        lb=[-<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>],  <span class="comment"># 决策变量下界</span></span><br><span class="line">                        ub=[<span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">1</span>],  <span class="comment"># 决策变量上界</span></span><br><span class="line">                        evalVars=evalVars)</span><br><span class="line"><span class="comment"># 构建算法</span></span><br><span class="line">algorithm = ea.soea_SEGA_templet(problem,</span><br><span class="line">                                    ea.Population(Encoding=<span class="string">&#x27;RI&#x27;</span>, NIND=<span class="number">20</span>),</span><br><span class="line">                                    MAXGEN=<span class="number">50</span>,  <span class="comment"># 最大进化代数。</span></span><br><span class="line">                                    logTras=<span class="number">1</span>,  <span class="comment"># 表示每隔多少代记录一次日志信息，0表示不记录。</span></span><br><span class="line">                                    trappedValue=<span class="number">1e-6</span>,  <span class="comment"># 单目标优化陷入停滞的判断阈值。</span></span><br><span class="line">                                    maxTrappedCount=<span class="number">10</span>)  <span class="comment"># 进化停滞计数器最大上限值。</span></span><br><span class="line"><span class="comment"># 求解</span></span><br><span class="line">res = ea.optimize(algorithm, seed=<span class="number">1</span>, verbose=<span class="literal">True</span>, drawing=<span class="number">1</span>, outputMsg=<span class="literal">True</span>, drawLog=<span class="literal">False</span>, saveFlag=<span class="literal">True</span>, dirName=<span class="string">&#x27;result&#x27;</span>)</span><br></pre></td></tr></table></figure></div>
<p>可以发现，发生最大变化的是目标函数的定义上。不加ea.Problem.single标记后，传入目标函数evalVars()的参数Vars是一个Numpy ndarray二维数组。它是NIND行Dim列。NIND即种群的个体数，即种群规模；Dim即自定义的问题的决策变量个数。</p>
<p>因此我们可以用Numpy向量化的方法同时算出所有个体对应的目标函数值和违反约束程度值。结果分别保存为ObjV和CV。其中ObjV是一个NIND行1列的Numpy ndarray二维数组。CV是一个NIND行2列的Numpy ndarray二维数组。</p>
<h2 id="2、面向对象模式入门"><a href="#2、面向对象模式入门" class="headerlink" title="2、面向对象模式入门"></a><strong>2、面向对象模式入门</strong></h2><h3 id="案例-3"><a href="#案例-3" class="headerlink" title="案例 3"></a><strong>案例 3</strong></h3><p>用NSGA2算法求解下面的双目标优化问题：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/G1wvqrNZ0Z4eqako/img/d430332c-563f-4aca-b2ad-c96550487dfe.png"
                      alt="img"
                ></p>
<p>“面向对象”风格的写法：</p>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyProblem</span>(ea.Problem):  <span class="comment"># 继承Problem父类</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        name = <span class="string">&#x27;MyProblem&#x27;</span>  <span class="comment"># 初始化name（函数名称，可以随意设置）</span></span><br><span class="line">        M = <span class="number">2</span>  <span class="comment"># 优化目标个数</span></span><br><span class="line">        maxormins = [<span class="number">1</span>] * M  <span class="comment"># 初始化maxormins（目标最小最大化标记列表，1：最小化该目标；-1：最大化该目标）</span></span><br><span class="line">        Dim = <span class="number">1</span>  <span class="comment"># 初始化Dim（决策变量维数）</span></span><br><span class="line">        varTypes = [<span class="number">0</span>]  <span class="comment"># 初始化varTypes（决策变量的类型，0：实数；1：整数）</span></span><br><span class="line">        lb = [-<span class="number">10</span>]  <span class="comment"># 决策变量下界</span></span><br><span class="line">        ub = [<span class="number">10</span>]  <span class="comment"># 决策变量上界</span></span><br><span class="line">        lbin = [<span class="number">1</span>]  <span class="comment"># 决策变量下边界（0表示不包含该变量的下边界，1表示包含）</span></span><br><span class="line">        ubin = [<span class="number">1</span>]  <span class="comment"># 决策变量上边界（0表示不包含该变量的上边界，1表示包含）</span></span><br><span class="line">        <span class="comment"># 调用父类构造方法完成实例化</span></span><br><span class="line">        ea.Problem.__init__(self, name, M, maxormins, Dim, varTypes, lb, ub, lbin, ubin)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">evalVars</span>(<span class="params">self, Vars</span>):  <span class="comment"># 目标函数</span></span><br><span class="line">        f1 = Vars ** <span class="number">2</span></span><br><span class="line">        f2 = (Vars - <span class="number">2</span>) ** <span class="number">2</span></span><br><span class="line">        ObjV = np.hstack([f1, f2])  <span class="comment"># 计算目标函数值矩阵</span></span><br><span class="line">        CV = -Vars ** <span class="number">2</span> + <span class="number">2.5</span> * Vars - <span class="number">1.5</span>  <span class="comment"># 构建违反约束程度矩阵</span></span><br><span class="line">        <span class="keyword">return</span> ObjV, CV</span><br><span class="line"></span><br><span class="line"><span class="comment"># 实例化问题对象</span></span><br><span class="line">problem = MyProblem()</span><br><span class="line"><span class="comment"># 构建算法</span></span><br><span class="line">algorithm = ea.moea_NSGA2_templet(problem,</span><br><span class="line">                                    ea.Population(Encoding=<span class="string">&#x27;RI&#x27;</span>, NIND=<span class="number">50</span>),</span><br><span class="line">                                    MAXGEN=<span class="number">200</span>,  <span class="comment"># 最大进化代数</span></span><br><span class="line">                                    logTras=<span class="number">0</span>)  <span class="comment"># 表示每隔多少代记录一次日志信息，0表示不记录。</span></span><br><span class="line"><span class="comment"># 求解</span></span><br><span class="line">res = ea.optimize(algorithm, seed=<span class="number">1</span>, verbose=<span class="literal">False</span>, drawing=<span class="number">1</span>, outputMsg=<span class="literal">True</span>, drawLog=<span class="literal">False</span>, saveFlag=<span class="literal">False</span>, dirName=<span class="string">&#x27;result&#x27;</span>)</span><br></pre></td></tr></table></figure></div>
<p>这里通过构建geatpy问题类Problem的子类来定义问题。第14行定义了目标函数evalVars，它重写了Problem类中的evalVars()。注意这个名字不能随便更改。Geatpy的Problem问题类提供两种目标函数的定义，分别是evalVars和aimFunc。前者（evalVars）是Geatpy2.7.0之后新增的写法，它传入决策变量矩阵Vars且需要返回对应的目标函数值矩阵ObjV和违反约束程度矩阵CV（若待求解的问题没有约束条件，则可以只返回目标函数矩阵）。后者（aimFunc）是传统的写法，它传入一个种群对象，且不需要返回值。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/G1wvqrNZ0Z4eqako/img/03c8d17c-6a6d-46c3-b607-77e74bfe4f31.png"
                      alt="img"
                ></p>
<div class="highlight-container" data-rel="Markdown"><figure class="iseeu highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Execution time: 0.0790555477142334 s</span><br><span class="line"></span><br><span class="line">Evaluation number: 10000</span><br><span class="line"></span><br><span class="line">The number of non-dominated solutions is: 50</span><br><span class="line"></span><br><span class="line">hv: 0.83020</span><br><span class="line"></span><br><span class="line">spacing: 0.03503</span><br></pre></td></tr></table></figure></div>
<h1 id="二、-Geatpy架构说明"><a href="#二、-Geatpy架构说明" class="headerlink" title="二、 Geatpy架构说明"></a>二、 <strong>Geatpy架构说明</strong></h1><p>Geatpy2整体上看由工具箱内核函数（内核层）和面向对象进化算法框架（框架层）两部分组成。其中面向对象进化算法框架主要有四个大类：Problem问题类、Algorithm算法模板类、Population种群类和PsyPopulation多染色体种群类。UML图如下所示：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/G1wvqrNZ0Z4eqako/img/a3aaec4c-9a9a-493d-ba8c-f95742f4b4b9.png"
                      alt="img"
                ></p>
<p>Problem类定义了与问题相关的一些信息，如问题名称name、优化目标的维数M、决策变量的个数Dim、决策变量的范围ranges、决策变量的边界borders等。maxormins是一个记录着各个目标函数是最小化抑或是最大化的Numpy array行向量，其中元素为1表示对应的目标是最小化目标；为-1表示对应的是最大化目标。例如M=3，maxormins=array([1,-1,1])，此时表示有三个优化目标，其中第一、第三个是最小化目标，第二个是最大化目标。varTypes是一个记录着决策变量类型的行向量，其中的元素为0表示对应的决策变量是连续型变量；为1表示对应的是离散型变量。待求解的目标函数定义在aimFunc()的函数中。calReferObjV()函数则用于计算或读取目标函数参考值（一般用理论上的目标函数的最优值作为参考值），该参考值可以用于后续的指标分析。在实际使用时，不是直接在Problem类的文件中修改相关代码来使用的，而是通过定义一个继承Problem的子类来完成对问题的定义的。这些在后面的章节中会详细讲述。getReferObjV()是Problem父类中已经实现了的一个函数，它先尝试读取特定文件夹中的目标函数值参考数据，如果读取不到，则调用calReferObjV()进行计算。对于Problem类中各属性的详细含义可查看Problem.py源码。</p>
<p>Population 类是一个表示种群的类。一个种群包含很多个个体，而每个个体都有一条染色体(若要用多染色体，则使用多个种群、并把每个种群对应个体关联起来即可)。除了染色体外，每个个体都有一个译码矩阵Field(或俗称区域描述器) 来标识染色体应该如何解码得到表现型，同时也有其对应的目标函数值以及适应度。种群类就是一个把所有个体的这些数据统一存储起来的一个类。比如里面的Chrom 是一个存储种群所有个体染色体的矩阵，它的每一行对应一个个体的染色体；ObjV 是一个目标函数值矩阵，每一行对应一个个体的所有目标函数值，每一列对应一个目标。对于Population 类中各属性的详细含义可查看Population.py 源码以及下一章“Geatpy 数据结构”。</p>
<p>PsyPopulation类是继承了Population的支持多染色体混合编码的种群类。一个种群包含很多个个体，而每个个体都有多条染色体。用Chroms列表存储所有的染色体矩阵(Chrom)；Encodings列表存储各染色体对应的编码方式(Encoding)；Fields列表存储各染色体对应的译码矩阵(Field)。EncoIdxs是一个list，其元素表示每条染色体对应编码哪一个变量。比如EncoIdxs = [[0], [1,2,3,4]]，表示一共有5个变量，其中第一个变量编码成第一条子染色体；后4个变量编码成第二条子染色体。</p>
<p>Algorithm 类是进化算法的核心类。它既存储着跟进化算法相关的一些参数，同时也在其继承类中实现具体的进化算法。比如Geatpy 中的moea_NSGA3_templet.py 是实现了多目标优化NSGA-III 算法的进化算法模板类，它是继承了Algorithm 类的具体算法的模板类。关于Algorithm 类中各属性的含义可以查看Algorithm.py 源码。这些算法模板通过调用Geatpy 工具箱提供的进化算法库函数实现对种群的进化操作，同时记录进化过程中的相关信息，其基本层次结构如下图：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/G1wvqrNZ0Z4eqako/img/24bf566e-3efc-456f-8ae4-d5627e628ffb.png"
                      alt="img"
                ></p>
<p>其中“算子类”是Geatpy2.2.2版本之后增加的特性，通过实例化算子类来调用低级操作函数，可以利用面向对象编程的优势使得对传入低级操作函数的一些参数的修改变得更加方便。目前内置的“算子类”有“重组算子类”和“变异算子类”。用户可以绕开对底层的低级操作函数的修改而直接通过新增“算子类”来实现新的算子例如自适应的重组、变异算子等。</p>
<p>例如：mutpolyn是多项式变异的低级变异算子。其对应的高级变异算子为：Mutpolyn。</p>

            </div>

            
                <div class="post-copyright-info">
                    <div class="article-copyright-info-container">
    <ul>
        <li><strong>Title:</strong> Geatpy_basis</li>
        <li><strong>Author:</strong> Charles</li>
        <li><strong>Created at:</strong> 2023-02-02 22:15:02</li>
        
            <li>
                <strong>Updated at:</strong> 2023-02-09 17:53:44
            </li>
        
        <li>
            <strong>Link:</strong> https://charles2530.github.io/2023/02/02/geatpy-basis/
        </li>
        <li>
            <strong>License:</strong> This work is licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a>.
        </li>
    </ul>
</div>

                </div>
            

            
                <ul class="post-tags-box">
                    
                        <li class="tag-item">
                            <a href="/tags/python/">#python</a>&nbsp;
                        </li>
                    
                        <li class="tag-item">
                            <a href="/tags/mathematical-modeling/">#mathematical-modeling</a>&nbsp;
                        </li>
                    
                </ul>
            

            
  <div class="recommended-article">
   <div class="recommended-desktop">
    <div class="recommended-article-header">
     <i aria-hidden="true"></i><span>recommend_articles</span>
    </div>
    <div class="recommended-article-group"><a class="recommended-article-item" href="/2023/03/14/lab-discussion-1/" title="lab_discussion_1" rel="bookmark">
  <img src="https://charles2530.github.io/image/background/p2.jfif" alt="lab_discussion_1">
  <span class="title">lab_discussion_1</span>
</a><a class="recommended-article-item" href="/2023/07/17/swift-note-3/" title="Swift-note-3" rel="bookmark">
  <img src="https://charles2530.github.io/image/background/p3.png" alt="Swift-note-3">
  <span class="title">Swift-note-3</span>
</a><a class="recommended-article-item" href="/2023/07/17/swift-note-9/" title="Swift-note-9" rel="bookmark">
  <img src="https://charles2530.github.io/image/background/p6.jpg" alt="Swift-note-9">
  <span class="title">Swift-note-9</span>
</a></div>
   </div>
   <div class="recommended-mobile">
   <div class="recommended-article-header">
     <i aria-hidden="true"></i><span>recommend_articles</span>
   </div>
   <div class="recommended-article-group"><a class="recommended-article-item" href="/2023/03/14/lab-discussion-1/" title="lab_discussion_1" rel="bookmark">
  <img src="https://charles2530.github.io/image/background/p2.jfif" alt="lab_discussion_1">
  <span class="title">lab_discussion_1</span>
</a><a class="recommended-article-item" href="/2023/07/17/swift-note-3/" title="Swift-note-3" rel="bookmark">
  <img src="https://charles2530.github.io/image/background/p3.png" alt="Swift-note-3">
  <span class="title">Swift-note-3</span>
</a></div>
   </div>
  </div>

            
                <div class="article-nav">
                    
                        <div class="article-prev">
                            <a class="prev"
                            rel="prev"
                            href="/2023/02/03/matlab-note-origin/"
                            >
                                <span class="left arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-left"></i>
                                </span>
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">matlab-note-origin</span>
                                    <span class="post-nav-item">Prev posts</span>
                                </span>
                            </a>
                        </div>
                    
                    
                        <div class="article-next">
                            <a class="next"
                            rel="next"
                            href="/2023/02/02/matplotlib-basis/"
                            >
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">Matplotlib_basis</span>
                                    <span class="post-nav-item">Next posts</span>
                                </span>
                                <span class="right arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-right"></i>
                                </span>
                            </a>
                        </div>
                    
                </div>
            


            
                <div class="comment-container">
                    <div class="comments-container">
  <div id="comment-anchor"></div>
  <div class="comment-area-title">
    <i class="fa-solid fa-comments"></i>&nbsp;Comments
  </div>
  

  <!-- 
            
    <div id="gitalk-container"></div>
    <script data-pjax
            src="//cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js"></script>
    <script data-pjax>

        function loadGitalk() {
            let __gitalk__pathname = decodeURI(location.pathname);
            const __gitalk__pathnameLength = __gitalk__pathname.length;
            const __gitalk__pathnameMaxLength = 50;
            if (__gitalk__pathnameLength > __gitalk__pathnameMaxLength) {
                __gitalk__pathname = __gitalk__pathname.substring(0, __gitalk__pathnameMaxLength - 3) + '...';
            }

            try {
                Gitalk && new Gitalk({
                    clientID: '8083299a8ee2aaf23879',
                    clientSecret: 'a8161e81d4872181e884fdb69f7be24916b6a9d0',
                    repo: 'charles2530_issues',
                    owner: 'Charles2530',
                    admin: ['Charles2530'],
                    id: __gitalk__pathname,
                    language: 'en'
                }).render('gitalk-container');

            } catch (e) {
                window.Gitalk = null;
            }
        }

        if ('true') {
            const loadGitalkTimeout = setTimeout(() => {
                loadGitalk();
                clearTimeout(loadGitalkTimeout);
            }, 1000);
        } else {
            window.addEventListener('DOMContentLoaded', loadGitalk);
        }
    </script>



         -->
  <script src="https://utteranc.es/client.js" repo="Charles2530/Charles2530.github.io" issue-term="pathname"
    label="Comment" theme="preferred-color-scheme" crossorigin="anonymous" async>
  </script>
  
</div>

                </div>
            
        </div>

        
            <div class="toc-content-container">
                <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">On this page</div>
        <div class="page-title">Geatpy_basis</div>
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Geatpy-basis"><span class="nav-text">Geatpy_basis</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E5%85%A5%E9%97%A8"><span class="nav-text">一、入门</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1%E3%80%81%E6%B1%82%E8%A7%A3%E5%99%A8%E6%A8%A1%E5%BC%8F%E5%85%A5%E9%97%A8"><span class="nav-text">1、求解器模式入门</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B-1"><span class="nav-text">案例 1</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%86%E6%9E%90"><span class="nav-text">分析</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%93%E6%9E%9C"><span class="nav-text">结果</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B-2"><span class="nav-text">案例 2</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2%E3%80%81%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%BC%8F%E5%85%A5%E9%97%A8"><span class="nav-text">2、面向对象模式入门</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B-3"><span class="nav-text">案例 3</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8C%E3%80%81-Geatpy%E6%9E%B6%E6%9E%84%E8%AF%B4%E6%98%8E"><span class="nav-text">二、 Geatpy架构说明</span></a></li></ol>

    </div>
</div>
            </div>
        
    </div>
</div>


                

            </div>
            
            

        </div>

        <div class="main-content-footer">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info">
            &copy;
            
              <span>2022</span>
              -
            
            2023&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">Charles</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv" class="busuanzi_container_site_uv">
                        Visitor Count&nbsp;<span id="busuanzi_value_site_uv" class="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="busuanzi_container_site_pv">
                        Total Page Views&nbsp;<span id="busuanzi_value_site_pv" class="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            <span class="powered-by-container">Powered by Charles</span>
                <br>
            <span class="theme-version-container">Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.2.0</a>
        </div>
        
        
        
            <div>
                Blog up for <span class="odometer" id="runtime_days" ></span> days <span class="odometer" id="runtime_hours"></span> hrs <span class="odometer" id="runtime_minutes"></span> Min <span class="odometer" id="runtime_seconds"></span> Sec
            </div>
        
        
        
            <script async data-pjax>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fa-regular fa-comments"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-expand-width flex-center">
            <i class="fa-regular fa-expand"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        
            <li class="right-bottom-tools rss flex-center">
                <a class="flex-center"
                   href="/atom.xml"
                   target="_blank"
                >
                <i class="fa-regular fa-rss"></i>
                </a>
            </li>
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fa-solid fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fa-solid fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    


</main>



  <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/utils.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/main.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/layouts/navbarShrink.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/tools/scrollTopBottom.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/tools/lightDarkSwitch.js"></script>


    <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/tools/localSearch.js"></script>



    <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/tools/codeBlock.js"></script>



    <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/layouts/lazyload.js"></script>



    <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/tools/runtime.js"></script>
    <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/libs/odometer.min.js"></script>
    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/assets/odometer-theme-minimal.css">



  <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/libs/Typed.min.js"></script>
  <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/plugins/typed.js"></script>



    <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/libs/mermaid.min.js"></script>
    <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/plugins/mermaid.js"></script>



    <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/libs/minimasonry.min.js"></script>
    <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/plugins/masonry.js"></script>


<div class="post-scripts pjax">
    
        <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/tools/tocToggle.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/libs/anime.min.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/layouts/toc.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/plugins/tabs.js"></script>
    
</div>


    <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax',
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            Global.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            Global.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            Global.refresh();
        });
    });
</script>



  
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</body>

</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/love.js"></script>
