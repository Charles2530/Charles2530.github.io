<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Charles">
    
    <meta name="author" content="Charles">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    
        
        
        
    
    <!--- Seo Part-->
    
    <link rel="canonical" href="http://charles2530.github.io/2023/05/01/gxemul-note/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="post by Charles in 2023-05-01 12:20:50">
<meta property="og:type" content="article">
<meta property="og:title" content="GXemul-note">
<meta property="og:url" content="http://charles2530.github.io/2023/05/01/gxemul-note/index.html">
<meta property="og:site_name" content="Charles&#39;s Castle">
<meta property="og:description" content="post by Charles in 2023-05-01 12:20:50">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-05-01T04:20:50.000Z">
<meta property="article:modified_time" content="2023-11-05T13:36:19.197Z">
<meta property="article:author" content="Du Jinyang">
<meta property="article:tag" content="OS">
<meta name="twitter:card" content="summary">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="https://charles2530.github.io/image/background/favicon.png" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="https://charles2530.github.io/image/background/favicon.png">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="https://charles2530.github.io/image/background/favicon.png">
    <!--- Page Info-->
    
    <title>
        
            GXemul-note -
        
        Charles&#39;s Castle
    </title>
    
<link rel="stylesheet" href="/css/style.css">


    
        <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/assets/build/styles.css">
    

    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/fonts/fonts.css">
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/fonts/Satoshi/satoshi.css">
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/fonts/Chillax/chillax.css">
    <!--- Font Part-->
    
    
    
    

    <!--- Inject Part-->
    
        
            
                
                    <script data-swup-reload-script> var _hmt = _hmt || []; (function() { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?8e0e5f382d14d87cbeadc33a36e71e86"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s); })(); </script>
                
    
            
    
    <script id="hexo-configurations">
    window.config = {"hostname":"charles2530.github.io","root":"/","language":"en","path":"search.xml"};
    window.theme = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":true,"list":["lol","Neo","God"]},"code_block":{"copy":true,"style":"mac","font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":6,"number":false,"expand":true,"init_open":true},"copyright":true,"lazyload":true,"recommendation":{"enable":true,"title":"recommend_articles","limit":3,"mobile_limit":2,"placeholder":"https://charles2530.github.io/image/background/p3.jfif","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":"#1890ff"},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":true},"scroll_progress":{"bar":true,"percentage":true},"website_counter":{"url":"https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js","enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"single_page":true,"open_graph":true,"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"https://charles2530.github.io/image/background/background-light1.jpg","dark":"https://charles2530.github.io/image/background/background-dark1.jpg"},"title":"Charles's Castle","subtitle":{"text":["Happiness is best!","Never give up!","Everyday is a gift!"],"hitokoto":{"enable":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#000000","dark":"#d1d1b6"},"text_style":{"title_size":"3.2rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":true,"links":{"github":"https://github.com/Charles2530/","zhihu":"https://www.zhihu.com/people/yang-guang-xiao-zi-55-55","email":"charles2530@163.com"},"qrs":{"weixin":"https://charles2530.github.io/image/background/Wechat_icon.png"}}},"plugins":{"feed":{"enable":true},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null},{"name":null,"artist":null,"url":null,"cover":null}]},"mermaid":{"enable":true,"version":"9.3.0"}},"version":"2.5.0","navbar":{"auto_hide":true,"color":{"left":"#f78736","right":"#367df7","transparency":35},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Categories":{"path":"/categories","icon":"fas fa-bookmark"},"Tags":{"path":"/tags","icon":"fas fa-tags"},"About":{"icon":"fa-regular fa-user","submenus":{"Me":"/about","Github":"https://github.com/Charles2530/","Blog":"https://charles2530.github.io","Statistics":"https://tongji.baidu.com/"}}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":"This is Charles's Castle","links":{"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Photos":{"icon":"fa-solid fa-image","path":"/masonry/"},"Essays":{"icon":"fa-solid fa-message-lines","path":"/essay/"},"Friends":{"icon":"fa-solid fa-user-group","path":"/friends/"}}},"article_date_format":"auto","categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}},"footerStart":"2022/12/27 00:00:00"};
    window.lang_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
    window.data = {"masonry":true};
  </script>
    
    <!--- Fontawesome Part-->
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/fontawesome/fontawesome.min.css">
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/fontawesome/brands.min.css">
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/fontawesome/solid.min.css">
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/fontawesome/regular.min.css">
    
    
    
    
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Charles's Castle" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


  <body>
    <div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="swup-progress-icon">
            <i class="fa-solid fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container" id="swup">

    

    <div class="main-content-container">


        <div class="main-content-header">
            <header class="navbar-container">
    
    <div class="navbar-content">
        <div class="left">
            
                <a class="logo-image" href="/">
                    <img src="https://charles2530.github.io/image/background/logo.jpg">
                </a>
            
            <a class="logo-title" href="/">
                
                Charles&#39;s Castle
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/"  >
                                    
                                        
                                            <i class="fa-regular fa-house"></i>
                                        
                                        HOME
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/categories"  >
                                    
                                        
                                            <i class="fas fa-bookmark"></i>
                                        
                                        CATEGORIES
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/tags"  >
                                    
                                        
                                            <i class="fas fa-tags"></i>
                                        
                                        TAGS
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="has-dropdown" 
                                    href="#" onClick="return false;">
                                    
                                        
                                            <i class="fa-regular fa-user"></i>
                                        
                                        ABOUT&nbsp;<i class="fa-solid fa-chevron-down"></i>
                                    
                                </a>
                                <!-- Submenu -->
                                
                                    <ul class="sub-menu">
                                    
                                        <li>
                                        <a href="/about">ME
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a target="_blank" rel="noopener" href="https://github.com/Charles2530/">GITHUB
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a href="https://charles2530.github.io">BLOG
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a target="_blank" rel="noopener" href="https://tongji.baidu.com/">STATISTICS
                                        </a>
                                        </li>
                                    
                                    </ul>
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile drawer -->
    <div class="navbar-drawer w-full absolute top-0 left-0 bg-background-color">
        <ul class="drawer-navbar-list flex flex-col justify-start items-center">
            
                
                    <li class="drawer-navbar-item text-base my-1.5 flex justify-center items-center">
                        <a class="rounded-3xl py-1.5 px-5 hover:border hover:!text-primary active:!text-primary group " 
                        href="/"  >
                             
                                
                                    <i class="fa-regular fa-house"></i>
                                
                                HOME
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item text-base my-1.5 flex justify-center items-center">
                        <a class="rounded-3xl py-1.5 px-5 hover:border hover:!text-primary active:!text-primary group " 
                        href="/categories"  >
                             
                                
                                    <i class="fas fa-bookmark"></i>
                                
                                CATEGORIES
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item text-base my-1.5 flex justify-center items-center">
                        <a class="rounded-3xl py-1.5 px-5 hover:border hover:!text-primary active:!text-primary group " 
                        href="/tags"  >
                             
                                
                                    <i class="fas fa-tags"></i>
                                
                                TAGS
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item text-base my-1.5 flex justify-center items-center">
                        <a class="rounded-3xl py-1.5 px-5 hover:border hover:!text-primary active:!text-primary group has-dropdown" 
                        href="#" onClick="return false;">
                            
                                
                                    <i class="fa-regular fa-user"></i>
                                
                                ABOUT&nbsp;<i class="group-hover:rotate-180 transition-transform fa-solid fa-chevron-down"></i>
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                              
                        
                            <li class="drawer-navbar-item text-base flex justify-center items-center hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                <a class="py-0.5" href="/about">ME</a>
                            </li>
                        
                            <li class="drawer-navbar-item text-base flex justify-center items-center hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                <a class="py-0.5" target="_blank" rel="noopener" href="https://github.com/Charles2530/">GITHUB</a>
                            </li>
                        
                            <li class="drawer-navbar-item text-base flex justify-center items-center hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                <a class="py-0.5" href="https://charles2530.github.io">BLOG</a>
                            </li>
                        
                            <li class="drawer-navbar-item text-base flex justify-center items-center hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                <a class="py-0.5" target="_blank" rel="noopener" href="https://tongji.baidu.com/">STATISTICS</a>
                            </li>
                        
                    
            

        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="post-page-container">
    <div class="article-content-container">

        <div class="article-title">
            
                
                
                <img src="https://charles2530.github.io/image/background/p2.jfif" alt="GXemul-note" class="max-w-none"/>
                
                <h1 class="article-title-cover">GXemul-note</h1>
            
            </div>
            
                    
        
        
            <div class="article-header flex flex-row gap-2 items-center">
                <div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]">
                    <img src="https://charles2530.github.io/image/background/logo2.jpg">
                </div>
                <div class="info flex flex-col justify-between">
                    <div class="author flex items-center">
                        <span class="name text-default-text-color text-lg font-semibold">Charles</span>
                        
                            <span class="author-label ml-1.5 text-xs px-2 py-0.5 rounded-small text-third-text-color border border-shadow-color-1">Lv7</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2023-05-01 12:20:50</span>
        <span class="mobile">2023-05-01 12:20:50</span>
        <span class="hover-info">Created</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2023-11-05 21:36:19</span>
            <span class="mobile">2023-11-05 21:36:19</span>
            <span class="hover-info">Updated</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                
                    
                        
                        <li>
                            <a href="/categories/Computer/">Computer</a>&nbsp;
                        </li>
                    
                    
                
                    
                        
                            <li>></li>
                        
                        <li>
                            <a href="/categories/Computer/OS/">OS</a>&nbsp;
                        </li>
                    
                    
                
                    
                        
                            <li>></li>
                        
                        <li>
                            <a href="/categories/Computer/OS/OS-report/">OS-report</a>&nbsp;
                        </li>
                    
                    
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/OS/">OS</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fa-regular fa-typewriter"></i>&nbsp;<span>3.6k Words</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fa-regular fa-clock"></i>&nbsp;<span>17 Mins</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        


        <div class="article-content markdown-body">
            <blockquote>
<p>转载声明：本笔记转载自北航OS官方教程：<a class="link"   target="_blank" rel="noopener" href="http://os.buaa.edu.cn/tutorial" >GXemul模拟器 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
</blockquote>
<h1 id="gxemul-模拟器介绍"><a class="markdownIt-Anchor" href="#gxemul-模拟器介绍"></a> GXemul 模拟器介绍</h1>
<p>GXemul（Gavare’s eXperimental Emulator）是一款计算机架构模拟器，可以模拟所需硬件环境，例如本实验需要的 MIPS 架构下的 CPU。尽管模拟器的开发仍在进行中，但自 2004 年以来，它已经足够稳定，可以让各种未经修改的操作系统运行就好像它们在真正的硬件上运行一样。目前模拟的处理器架构包括 ARM，MIPS，Motorola 88K，PowerPC 等。 经验证可在模拟器内工作的操作系统是 NetBSD，Linux，HelenOS，Ultrix 和 Sprite。</p>
<p>除了运行整个操作系统外，还可以使用模拟器用于较小规模的实验，例如爱好者们的操作系统开发等等。</p>
<h2 id="gxemul-的基本工作方式"><a class="markdownIt-Anchor" href="#gxemul-的基本工作方式"></a> GXemul 的基本工作方式</h2>
<p>GXemul 的动态翻译器通常从模拟架构的汇编代码表示（例如 MIPS）转换成一种中间表示（IR），然后转换成可由本机执行的原生汇编代码（通常为 x86_64 或 x86 架构的代码，例如我们的跳板机为 x86_64 架构）。由于 GXemul 的主要目标之一是尽可能地保持所有内容的可移植性，因此 GXemul 的 IR 无论最终步骤（从 IR 到本机代码的转换）是否已实现，都能确保可以被执行。</p>
<p><strong>这部分并不是课程要求掌握的内容，有兴趣的同学可自行参考</strong>：<a class="link"   target="_blank" rel="noopener" href="http://gavare.se/gxemul/gxemul-stable/doc/translation.html" >GXemul: Dynamic Translation Internals <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<h2 id="gxemul-的基本使用"><a class="markdownIt-Anchor" href="#gxemul-的基本使用"></a> GXemul 的基本使用</h2>
<p>GXemul 是我们运行 MOS 操作系统的模拟器，它可以帮助我们运行和调试 MIPS 体系架构下的代码。直接输入</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gxemul</span><br></pre></td></tr></table></figure></div>
<p>会显示帮助信息。</p>
<h3 id="运行-gxemul"><a class="markdownIt-Anchor" href="#运行-gxemul"></a> 运行 GXemul</h3>
<p>GXemul 运行选项:</p>
<ul>
<li><code>-E</code> 模拟机器的类型</li>
<li><code>-C</code> 模拟 CPU 的类型</li>
<li><code>-M</code> 模拟的内存大小</li>
<li><code>-V</code> 进入调试模式</li>
</ul>
<p>假设我们通过编译得到了一个 MIPS 架构的可执行文件 <code>hello</code>，我们通过如下方式运行 <code>hello</code></p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gxemul -E testmips -C R3000 -M 64 hello</span><br></pre></td></tr></table></figure></div>
<p>我们还可以用如下命令以调试模式打开 GXemul，对 hello 进行调试（进入后直接中断，输入 continue 或 step 才会继续运行，在此之前可以进行添加断点等操作）</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gxemul -E testmips -C R3000 -M 64 -V hello</span><br></pre></td></tr></table></figure></div>
<p>上方命令中：<code>-E testmips</code> 表示模拟器类型为 MIPS 架构，<code>-C R3000</code> 表示模拟 CPU 类型为 MIPS R3000，<code>-M 64</code> 代表模拟的内存大小为 64Mb，<code>-V</code> 代表进入调试模式。</p>
<h3 id="gxemul-模拟器的一些基本命令"><a class="markdownIt-Anchor" href="#gxemul-模拟器的一些基本命令"></a> GXemul 模拟器的一些基本命令</h3>
<p>进入 GXemul 后使用 Ctrl+C 可以中断运行。中断后可以进行单步调试，执行如下指令：</p>
<ul>
<li><code>breakpoint add addr</code> 添加断点</li>
<li><code>continue</code> 继续执行</li>
<li><code>step [n]</code> 向后执行 n 条汇编指令</li>
<li><code>lookup name|addr</code> 通过名字或地址查找标识符</li>
<li><code>dump [addr [endaddr]]</code> 查询指定地址的内容</li>
<li><code>reg [cpuid][,c]</code> 查看寄存器内容，添加”,c”可以查看协处理器</li>
<li><code>help</code> 显示各个指令的作用与用法</li>
<li><code>quit</code> 退出</li>
</ul>
<p>(以上中括号表示内容可以没有)</p>
<p>更多 GXemul 相关的信息参考: <a class="link"   target="_blank" rel="noopener" href="http://gavare.se/gxemul/gxemul-stable/doc/index.html" >GXemul - Documentation <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<h3 id="如何退出-gxemul"><a class="markdownIt-Anchor" href="#如何退出-gxemul"></a> 如何退出 GXemul</h3>
<ul>
<li>按 Ctrl+C，以中断模拟器；</li>
<li>输入 <code>quit</code> 以退出模拟器。</li>
</ul>
<p>Warning</p>
<p>一定要区分好”退出模拟器“，和“把模拟器挂在后台”这两件事。模拟器是相当占用系统资源的。可能有同学不小心按下 ctrl+z 把模拟器挂到后台，或是不确定自己有没有把挂起的进程关掉，可以通过 <code>ps -ef | grep gxemul</code> 命令观察后台有多少正在运行的作业。如果发现有多个模拟器正在运行的话，可以使用 <code>kill</code> 命令直接杀死。也可以通过 <code>pkill -9 gxemul</code>，一步杀死后台运行的模拟器。同学们可以自行了解一下 Linux 后台进程管理的知识。</p>
<hr />
<h3 id="gxemul-实际调试"><a class="markdownIt-Anchor" href="#gxemul-实际调试"></a> GXemul 实际调试</h3>
<p>可以看到我们运行调试可执行文件，需要敲入较长的一条指令，但实验中已经将启动的 GXemul 的命令融进 Makefile 中了，当构建完成后下将产生可执行的文件，此时可通过下方指令运行：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ make run</span><br></pre></td></tr></table></figure></div>
<p>同时，可通过下方指令调试。</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ make dbg</span><br></pre></td></tr></table></figure></div>
<p>另外，可通过下方指令加载用户程序的符号表，其中 <code>user/fktest.b</code> 是用户程序 <code>.b</code> 文件的路径。（预习实验中不需要该特性，正式课设实验中会提供该特性。）</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ make dbg prog=user/fktest.b</span><br></pre></td></tr></table></figure></div>
<p>同时，可通过下方指令导出内核与所有用户程序 <code>*.b</code> 的反汇编。</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ make objdump</span><br></pre></td></tr></table></figure></div>
<p>得到诸如 <code>target/mos.objdump</code> 的反汇编文件后，我们可以通过 vim 查看其内容，以 <code>target/mos.objdump</code> 为例：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line">target/mos：     文件格式 elf32-tradlittlemips</span><br><span class="line">target/mos</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disassembly of section .tlb_miss_entry:</span><br><span class="line"></span><br><span class="line">80000000 &lt;tlb_miss_entry&gt;:</span><br><span class="line">tlb_miss_entry():</span><br><span class="line">/home/git/你的学号/kern/entry.S:6</span><br><span class="line">80000000:   08000020    j   80000080 &lt;exc_gen_entry&gt;</span><br><span class="line">80000004:   00000000    nop</span><br><span class="line"></span><br><span class="line">Disassembly of section .exc_gen_entry:</span><br><span class="line"></span><br><span class="line">80000080 &lt;exc_gen_entry&gt;:</span><br><span class="line">exc_gen_entry():</span><br><span class="line">/home/git/你的学号/kern/entry.S:10</span><br><span class="line">80000080:   03a0d025    move    k0,sp</span><br><span class="line">80000084:   07a00002    bltz    sp,80000090 &lt;exc_gen_entry+0x10&gt;</span><br><span class="line">80000088:   00000000    nop</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">800117f0 &lt;strcmp&gt;:</span><br><span class="line">strcmp():</span><br><span class="line">/home/git/你的学号/lib/string.c:83</span><br><span class="line"></span><br><span class="line">int strcmp(const char *p, const char *q) &#123;</span><br><span class="line">800117f0:   27bdfff8    addiu   sp,sp,-8</span><br><span class="line">800117f4:   afbe0004    sw  s8,4(sp)</span><br><span class="line">800117f8:   03a0f025    move    s8,sp</span><br><span class="line">800117fc:   afc40008    sw  a0,8(s8)</span><br><span class="line">80011800:   afc5000c    sw  a1,12(s8)</span><br><span class="line">/home/git/你的学号/lib/string.c:84</span><br><span class="line">    while (*p &amp;&amp; *p == *q) &#123;</span><br><span class="line">80011804:   10000009    b   8001182c &lt;strcmp+0x3c&gt;</span><br><span class="line">80011808:   00000000    nop</span><br><span class="line">/home/git/你的学号/lib/string.c:85</span><br><span class="line">        p++, q++;</span><br><span class="line">8001180c:   8fc20008    lw  v0,8(s8)</span><br><span class="line">80011810:   00000000    nop</span><br><span class="line">80011814:   24420001    addiu   v0,v0,1</span><br><span class="line">80011818:   afc20008    sw  v0,8(s8)</span><br><span class="line">8001181c:   8fc2000c    lw  v0,12(s8)</span><br><span class="line">80011820:   00000000    nop</span><br><span class="line">80011824:   24420001    addiu   v0,v0,1</span><br><span class="line">80011828:   afc2000c    sw  v0,12(s8)</span><br><span class="line">/home/git/你的学号/lib/string.c:84</span><br><span class="line">    while (*p &amp;&amp; *p == *q) &#123;</span><br><span class="line">8001182c:   8fc20008    lw  v0,8(s8)</span><br><span class="line">80011830:   00000000    nop</span><br><span class="line">80011834:   80420000    lb  v0,0(v0)</span><br><span class="line">80011838:   00000000    nop</span><br><span class="line">8001183c:   1040000a    beqz    v0,80011868 &lt;strcmp+0x78&gt;</span><br><span class="line">80011840:   00000000    nop</span><br><span class="line">/home/git/你的学号/lib/string.c:84 (discriminator 1)</span><br><span class="line">80011844:   8fc20008    lw  v0,8(s8)</span><br><span class="line">80011848:   00000000    nop</span><br><span class="line">8001184c:   80430000    lb  v1,0(v0)</span><br><span class="line">80011850:   8fc2000c    lw  v0,12(s8)</span><br><span class="line">80011854:   00000000    nop</span><br><span class="line">80011858:   80420000    lb  v0,0(v0)</span><br><span class="line">8001185c:   00000000    nop</span><br><span class="line">80011860:   1062ffea    beq v1,v0,8001180c &lt;strcmp+0x1c&gt;</span><br><span class="line">80011864:   00000000    nop</span><br><span class="line">/home/git/你的学号/lib/string.c:88</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if ((u_int)*p &lt; (u_int)*q) &#123;</span><br><span class="line">80011868:   8fc20008    lw  v0,8(s8)</span><br><span class="line">8001186c:   00000000    nop</span><br><span class="line">80011870:   80420000    lb  v0,0(v0)</span><br><span class="line">80011874:   00000000    nop</span><br><span class="line">80011878:   304300ff    andi    v1,v0,0xff</span><br><span class="line">8001187c:   8fc2000c    lw  v0,12(s8)</span><br><span class="line">80011880:   00000000    nop</span><br><span class="line">80011884:   80420000    lb  v0,0(v0)</span><br><span class="line">80011888:   00000000    nop</span><br><span class="line">8001188c:   304200ff    andi    v0,v0,0xff</span><br><span class="line">80011890:   0062102b    sltu    v0,v1,v0</span><br><span class="line">80011894:   10400004    beqz    v0,800118a8 &lt;strcmp+0xb8&gt;</span><br><span class="line">80011898:   00000000    nop</span><br><span class="line">/home/git/你的学号/lib/string.c:89</span><br><span class="line">        return -1;</span><br><span class="line">8001189c:   2402ffff    li  v0,-1</span><br><span class="line">800118a0:   10000012    b   800118ec &lt;strcmp+0xfc&gt;</span><br><span class="line">800118a4:   00000000    nop</span><br><span class="line">/home/git/你的学号/lib/string.c:92</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if ((u_int)*p &gt; (u_int)*q) &#123;</span><br><span class="line">800118a8:   8fc20008    lw  v0,8(s8)</span><br><span class="line">800118ac:   00000000    nop</span><br><span class="line">800118b0:   80420000    lb  v0,0(v0)</span><br><span class="line">800118b4:   00000000    nop</span><br><span class="line">800118b8:   304300ff    andi    v1,v0,0xff</span><br><span class="line">800118bc:   8fc2000c    lw  v0,12(s8)</span><br><span class="line">800118c0:   00000000    nop</span><br><span class="line">800118c4:   80420000    lb  v0,0(v0)</span><br><span class="line">800118c8:   00000000    nop</span><br><span class="line">800118cc:   304200ff    andi    v0,v0,0xff</span><br><span class="line">800118d0:   0043102b    sltu    v0,v0,v1</span><br><span class="line">800118d4:   10400004    beqz    v0,800118e8 &lt;strcmp+0xf8&gt;</span><br><span class="line">800118d8:   00000000    nop</span><br><span class="line">/home/git/你的学号/lib/string.c:93</span><br><span class="line">        return 1;</span><br><span class="line">800118dc:   24020001    li  v0,1</span><br><span class="line">800118e0:   10000002    b   800118ec &lt;strcmp+0xfc&gt;</span><br><span class="line">800118e4:   00000000    nop</span><br><span class="line">/home/git/你的学号/lib/string.c:96</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">800118e8:   00001025    move    v0,zero</span><br><span class="line">/home/git/你的学号/lib/string.c:97</span><br><span class="line">&#125;</span><br><span class="line">800118ec:   03c0e825    move    sp,s8</span><br><span class="line">800118f0:   8fbe0004    lw  s8,4(sp)</span><br><span class="line">800118f4:   27bd0008    addiu   sp,sp,8</span><br><span class="line">800118f8:   03e00008    jr  ra</span><br><span class="line">800118fc:   00000000    nop</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure></div>
<p>可以看到，上述 <code>target/mos.objdump</code> 中标出了目标文件汇编与每一行对应的源码，有助于我们进行调试。</p>
<h4 id="launch-gxemul-in-debug-mode"><a class="markdownIt-Anchor" href="#launch-gxemul-in-debug-mode"></a> Launch GXemul In DEBUG Mode</h4>
<p>当我们以调试模式启动 GXemul 后，我们可以通过 <code>help</code> 查看 GXemul 内的可用指令：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">GXemul&gt; help</span><br><span class="line">Available commands:</span><br><span class="line">  allsettings                   show all settings</span><br><span class="line">  breakpoint ...                manipulate breakpoints</span><br><span class="line">  continue                      continue execution</span><br><span class="line">  device ...                    show info about (or manipulate) devices</span><br><span class="line">  dump [addr [endaddr]]         dump memory contents in hex and ASCII</span><br><span class="line">  emuls                         print a summary of all current emuls</span><br><span class="line">  focus x[,y[,z]]               changes focus to cpu x, machine x, emul z</span><br><span class="line">  help                          print this help message</span><br><span class="line">  itrace                        toggle instruction_trace on or off</span><br><span class="line">  lookup name|addr              lookup a symbol by name or address</span><br><span class="line">  machine                       print a summary of the current machine</span><br><span class="line">  ninstrs [on|off]              toggle (set or unset) show_nr_of_instructions</span><br><span class="line">  pause cpuid                   pause (or unpause) a CPU</span><br><span class="line">  print expr                    evaluate an expression without side-effects</span><br><span class="line">  put [b|h|w|d|q] addr, data    modify emulated memory contents</span><br><span class="line">  quiet [on|off]                toggle quiet_mode on or off</span><br><span class="line">  quit                          quit the emulator</span><br><span class="line">  reg [cpuid][,c]               show GPRs (or coprocessor c&#x27;s registers)</span><br><span class="line">  step [n]                      single-step one (or n) instruction(s)</span><br><span class="line">  tlbdump [cpuid][,r]           dump TLB contents (add &#x27;,r&#x27; for raw data)</span><br><span class="line">  trace [on|off]                toggle show_trace_tree on or off</span><br><span class="line">  unassemble [addr [endaddr]]   dump memory contents as instructions</span><br><span class="line">  version                       print version information</span><br><span class="line">  x = expr                      generic assignment</span><br><span class="line"></span><br><span class="line">In generic assignments, x must be a register or other writable settings</span><br><span class="line">variable, and expr can contain registers/settings, numeric values, or symbol</span><br><span class="line">names, in combination with parenthesis and + - * / &amp; % ^ | operators.</span><br><span class="line">In case there are multiple matches (i.e. a symbol that has the same name as a</span><br><span class="line">register), you may add a prefix character as a hint: &#x27;#&#x27; for registers, &#x27;@&#x27;</span><br><span class="line">for symbols, and &#x27;$&#x27; for numeric values. Use 0x for hexadecimal values.</span><br></pre></td></tr></table></figure></div>
<p>下面将介绍几个常用的功能。</p>
<h4 id="breakpointstep-unassembledumptrace"><a class="markdownIt-Anchor" href="#breakpointstep-unassembledumptrace"></a> Breakpoint，Step &amp; Unassemble，Dump，Trace</h4>
<p>GXemul 提供了断点、单步执行（指令级别）的调试功能；除此之外，GXemul 还提供了反汇编、内存导出等功能。</p>
<h5 id="add-breakpoint"><a class="markdownIt-Anchor" href="#add-breakpoint"></a> ADD BREAKPOINT</h5>
<p>如下，启动模拟器后，在内部控制台中输入 <code>breakpoint add page_insert</code>，即可为 <code>page_insert</code> 函数增加断点。随后使用 <code>c</code>（continue）命令让模拟器继续运行，模拟器将运行至下一个断点处。</p>
<p>以 <code>page_insert</code> 为例：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">GXemul&gt; breakpoint add page_insert</span><br><span class="line">  0: 0x80014e38 (page_insert)</span><br><span class="line">GXemul&gt; c</span><br><span class="line">init.c: mips_init() is called</span><br><span class="line">Memory size: 65536 KiB, number of pages: 16384</span><br><span class="line">to memory 80430000 for struct Pages.</span><br><span class="line">pmap.c:  mips vm init success</span><br><span class="line">BREAKPOINT: pc = 0x80014e38</span><br><span class="line">(The instruction has not yet executed.)</span><br></pre></td></tr></table></figure></div>
<h5 id="step"><a class="markdownIt-Anchor" href="#step"></a> STEP</h5>
<p>如下，使用 <code>step</code> 即可让模拟器执行 <code>1</code> 条汇编指令（基本指令）。</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GXemul&gt; step</span><br></pre></td></tr></table></figure></div>
<p>进一步地，使用 <code>step 100</code> 即可让模拟器执行 <code>100</code> 条汇编指令（基本指令）。</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GXemul&gt; step 100</span><br></pre></td></tr></table></figure></div>
<p>仍以上面的 <code>page_insert</code> 为例：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">GXemul&gt; breakpoint add page_insert</span><br><span class="line">  0: 0x80014e38 (page_insert)</span><br><span class="line">GXemul&gt; c</span><br><span class="line">init.c: mips_init() is called</span><br><span class="line">Memory size: 65536 KiB, number of pages: 16384</span><br><span class="line">to memory 80430000 for struct Pages.</span><br><span class="line">pmap.c:  mips vm init success</span><br><span class="line">BREAKPOINT: pc = 0x80014e38</span><br><span class="line">(The instruction has not yet executed.)</span><br><span class="line">GXemul&gt; step 20</span><br><span class="line">&lt;page_insert&gt;</span><br><span class="line">80014e38: 27bdffe0        addiu sp,sp,-32</span><br><span class="line">80014e3c: afbf001c        sw    ra,28(sp)       [0x803fff7c]</span><br><span class="line">80014e40: afbe0018        sw    fp,24(sp)       [0x803fff78]</span><br><span class="line">80014e44: 03a0f025        or    fp,sp,zr</span><br><span class="line">80014e48: afc40020        sw    a0,32(fp)       [0x803fff80]</span><br><span class="line">80014e4c: afc50024        sw    a1,36(fp)       [0x803fff84]</span><br><span class="line">80014e50: afc60028        sw    a2,40(fp)       [0x803fff88]</span><br><span class="line">80014e54: afc7002c        sw    a3,44(fp)       [0x803fff8c]</span><br><span class="line">80014e58: 27c20014        addiu v0,fp,20</span><br><span class="line">80014e5c: 00403825        or    a3,v0,zr</span><br><span class="line">80014e60: 00003025        or    a2,zr,zr</span><br><span class="line">80014e64: 8fc5002c        lw    a1,44(fp)       [0x803fff8c]</span><br><span class="line">80014e68: 8fc40020        lw    a0,32(fp)       [0x803fff80]</span><br><span class="line">80014e6c: 0c005311        jal   0x80014c44      &lt;pgdir_walk&gt;</span><br><span class="line">80014e70: 00000000 (d)    nop</span><br><span class="line">&lt;pgdir_walk&gt;</span><br><span class="line">80014c44: 27bdffc8        addiu sp,sp,-56</span><br><span class="line">80014c48: afbf0034        sw    ra,52(sp)       [0x803fff5c]</span><br><span class="line">80014c4c: afbe0030        sw    fp,48(sp)       [0x803fff58]</span><br><span class="line">80014c50: afb0002c        sw    s0,44(sp)       [0x803fff54]</span><br><span class="line">80014c54: 03a0f025        or    fp,sp,zr</span><br><span class="line">80014c58: afc40038        sw    a0,56(fp)       [0x803fff60]</span><br></pre></td></tr></table></figure></div>
<h5 id="unassemble"><a class="markdownIt-Anchor" href="#unassemble"></a> UNASSEMBLE</h5>
<p>如下，使用 <code>unassemble</code> 命令，导出某一个地址后续（或附近）的汇编指令序列。</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">GXemul&gt; unassemble</span><br><span class="line">80014c5c: afc5003c     &lt;- sw    a1,60(fp)</span><br><span class="line">80014c60: afc60040        sw    a2,64(fp)</span><br><span class="line">80014c64: afc70044        sw    a3,68(fp)</span><br><span class="line">80014c68: 8fc2003c        lw    v0,60(fp)</span><br><span class="line">80014c6c: 00000000        nop</span><br><span class="line">80014c70: 00021582        srl   v0,v0,22</span><br><span class="line">80014c74: 00021080        sll   v0,v0,2</span><br><span class="line">80014c78: 8fc30038        lw    v1,56(fp)</span><br><span class="line">80014c7c: 00000000        nop</span><br><span class="line">80014c80: 00621021        addu  v0,v1,v0</span><br><span class="line">80014c84: afc20018        sw    v0,24(fp)</span><br><span class="line">80014c88: 8fc20018        lw    v0,24(fp)</span><br><span class="line">80014c8c: 00000000        nop</span><br><span class="line">80014c90: 8c420000        lw    v0,0(v0)</span><br><span class="line">80014c94: 00000000        nop</span><br><span class="line">80014c98: 30420200        andi  v0,v0,0x0200</span><br><span class="line">80014c9c: 14400031        bne   zr,v0,0x80014d64        &lt;pgdir_walk+0x120&gt;</span><br><span class="line">80014ca0: 00000000        nop</span><br><span class="line">80014ca4: 8fc20040        lw    v0,64(fp)</span><br><span class="line">80014ca8: 00000000        nop</span><br></pre></td></tr></table></figure></div>
<h5 id="dump-data"><a class="markdownIt-Anchor" href="#dump-data"></a> DUMP DATA</h5>
<p>如下，使用 <code>dump</code> 命令，导出某一个地址后续（或附近）的内存信息。下面以查看 <code>curenv</code> 的值以及其指向的进程控制块为例：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">GXemul&gt; dump curenv</span><br><span class="line">0x800167a0           804320e8 00000003 00000000      .C .........</span><br><span class="line">0x800167b0  00000002 804321d0 00000000 00000000  .....C!.........</span><br><span class="line">0x800167c0  80432000 00000001 00000000 00000000  .C .............</span><br><span class="line">0x800167d0  00000000 00000000 00000000 00000000  ................</span><br><span class="line">0x800167e0  00000000 00000000 00000000 00000000  ................</span><br><span class="line">..........</span><br></pre></td></tr></table></figure></div>
<p>根据 <code>curenv</code> 的定义，其类型为 <code>struct Env *</code>，因此 <code>0x800167a4</code> 中存储的是一个地址（指向一个 <code>struct Env</code>）。根据上述 <code>dump</code> 结果，可以知道这个全局指针指向了 <code>0x804320e8</code> 这一地址。再通过 <code>dump 0x804320e8</code> 即可找到当前 <code>curenv</code> 指向的 <code>struct Env</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">GXemul&gt; dump 0x804320e8</span><br><span class="line">0x804320e0                    00000000 00000000          ........</span><br><span class="line">0x804320f0  00000001 00000025 00400920 0040d2c4  .......%.@. .@..</span><br><span class="line">0x80432100  0040d2c4 7f3fdfcc 00000000 00000000  .@...?..........</span><br><span class="line">0x80432110  00000000 00000000 00000000 00000000  ................</span><br><span class="line">0x80432120  00000000 00000000 0040d2cc 00000007  .........@......</span><br><span class="line">0x80432130  00000000 7f3fdfcc 00000000 00400920  .....?.......@.</span><br><span class="line">0x80432140  00000000 00000000 00000000 00000000  ................</span><br><span class="line">0x80432150  7f3fdb80 82000000 00000000 7f3fdb80  .?...........?..</span><br><span class="line">0x80432160  00000000 004009d0 10081004 00000000  .....@..........</span><br><span class="line">0x80432170  00000000 00408000 00001000 00400aa0  .....@.......@..</span><br><span class="line">0x80432180  00400aa0 804321d0 800167b4 00000c01  .@...C!...g.....</span><br><span class="line">0x80432190  00000000 00000001 83ff3000 03ff3000  ..........0...0.</span><br><span class="line">0x804321a0  00000000 80019270 00000001 00000000  .......p........</span><br><span class="line">0x804321b0  00000000 00000000 00000000 00000000  ................</span><br><span class="line">0x804321c0  00000000 00000000 00000002 00000000  ................</span><br><span class="line">0x804321d0  00000000 00000000 00000000 00000000  ................</span><br><span class="line">0x804321e0  00000000 00000000                    ........</span><br></pre></td></tr></table></figure></div>
<p>即可查看当前正运行的进程控制块的信息。类似地，可以查看任何全局变量的值，以及大部分内核数据结构的信息。</p>
<h5 id="dump-registers"><a class="markdownIt-Anchor" href="#dump-registers"></a> DUMP REGISTERS</h5>
<p>通过 <code>reg</code> 命令导出通用寄存器的值：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">GXemul&gt; reg</span><br><span class="line">cpu0:  pc = 80012620</span><br><span class="line">cpu0:  hi = 00000000  lo = 00000000</span><br><span class="line">cpu0:                 at = 00000000  v0 = 00000000  v1 = 82000000</span><br><span class="line">cpu0:  a0 = 803fffb8  a1 = 82000000  a2 = 82000000  a3 = 00000000</span><br><span class="line">cpu0:  t0 = 7f3fdf48  t1 = 80012a60  t2 = 80012b20  t3 = 00000000</span><br><span class="line">cpu0:  t4 = 00000000  t5 = 00000000  t6 = 00000000  t7 = 00000000</span><br><span class="line">cpu0:  s0 = 7f4002b8  s1 = 00001c03  s2 = 00410000  s3 = 00000003</span><br><span class="line">cpu0:  s4 = 00000000  s5 = 00000000  s6 = 00000000  s7 = 00000000</span><br><span class="line">cpu0:  t8 = 00000000  t9 = 00000000  k0 = 7f3fdf48  k1 = 803fffb8</span><br><span class="line">cpu0:  gp = 00000000  sp = 803ffeec  fp = 00000000  ra = 80012b50</span><br></pre></td></tr></table></figure></div>
<p>通过 <code>reg, 0</code> 命令导出协处理器 0（CP0）中寄存器的值：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GXemul&gt; reg, 0</span><br><span class="line">cpu0:    index=00000f00   random=00003700 entrylo0=03fbb600 entrylo1=00000000</span><br><span class="line">cpu0:  context=00001008 pagemask=00001fff    wired=00000000  reserv7=00000000</span><br><span class="line">cpu0: badvaddr=00402b2c    count=00000000  entryhi=00402080  compare=00000000</span><br><span class="line">cpu0:   status=10081004    cause=00001020      epc=004000c0     prid=00000220</span><br></pre></td></tr></table></figure></div>
<p>通过 <code>tlbdump</code> 命令导出 TLB 中的信息：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">GXemul&gt; tlbdump</span><br><span class="line">cpu0: (index=0xf random=0x37)</span><br><span class="line">  0: (invalid)</span><br><span class="line">  1: (invalid)</span><br><span class="line">  2: (invalid)</span><br><span class="line">  3: (invalid)</span><br><span class="line">  4: (invalid)</span><br><span class="line">  5: (invalid)</span><br><span class="line">  6: (invalid)</span><br><span class="line">  7: (invalid)</span><br><span class="line">  8: vaddr=0x00404000 (asid 01), paddr=0x03feb000 D</span><br><span class="line">  9: vaddr=0x7f82f000 (asid 01), paddr=0x00430000 D</span><br><span class="line"> 10: vaddr=0x7fd80000 (asid 01), paddr=0x03fd9000 D</span><br><span class="line"> 11: vaddr=0x7fdff000 (asid 01), paddr=0x03ff3000 D</span><br><span class="line"> 12: vaddr=0x00408000 (asid 01), paddr=0x03fe7000 D</span><br><span class="line"> 13: vaddr=0x00402000 (asid 01), paddr=0x03fed000 D</span><br><span class="line"> 14: vaddr=0x00409000 (asid 01), paddr=0x03fe6000 D</span><br><span class="line"> 15: (invalid)</span><br><span class="line"> 16: vaddr=0x7f400000 (asid 01), paddr=0x00432000 D</span><br><span class="line"> 17: vaddr=0x0040d000 (asid 01), paddr=0x03fe2000 D</span><br><span class="line"> 18: vaddr=0x7f3fd000 (asid 01), paddr=0x03ff2000 D</span><br><span class="line"> 19: vaddr=0x00401000 (asid 01), paddr=0x03fee000 D</span><br><span class="line"> 20: vaddr=0x00400000 (asid 01), paddr=0x03ff0000 D</span><br><span class="line"> 21: vaddr=0x7f400000 (asid 03), paddr=0x00432000 D</span><br><span class="line"> 22: vaddr=0x00403000 (asid 04), paddr=0x03fa0000</span><br><span class="line"> 23: vaddr=0x00403000 (asid 05), paddr=0x03b69000 D</span><br><span class="line"> 24: vaddr=0x10041000 (asid 01), paddr=0x03b79000 D</span><br><span class="line"> 25: (invalid)</span><br><span class="line"> 26: vaddr=0x10040000 (asid 01), paddr=0x03b7a000 D</span><br><span class="line"> 27: (invalid)</span><br><span class="line"> 28: vaddr=0x7f400000 (asid 02), paddr=0x00432000 D</span><br><span class="line"> 29: vaddr=0x1003f000 (asid 01), paddr=0x03b7b000 D</span><br><span class="line"> 30: (invalid)</span><br><span class="line"> 31: vaddr=0x00403000 (asid 03), paddr=0x03fa0000</span><br><span class="line"> 32: vaddr=0x7f3fd000 (asid 03), paddr=0x03b88000 D</span><br><span class="line"> 33: vaddr=0x61000000 (asid 05), paddr=0x03fd8000 D</span><br><span class="line"> 34: vaddr=0x5fc04000 (asid 05), paddr=0x03b5f000 D</span><br><span class="line"> 35: vaddr=0x7fd7f000 (asid 05), paddr=0x03b62000 D</span><br><span class="line"> 36: vaddr=0x00408000 (asid 05), paddr=0x03b64000 D</span><br><span class="line"> 37: vaddr=0x1003e000 (asid 01), paddr=0x03b7c000 D</span><br><span class="line"> 38: (invalid)</span><br><span class="line"> 39: vaddr=0x00402000 (asid 03), paddr=0x03fa1000</span><br><span class="line"> 40: vaddr=0x00400000 (asid 03), paddr=0x03fa4000</span><br><span class="line"> 41: vaddr=0x00409000 (asid 04), paddr=0x03f9a000</span><br><span class="line"> 42: vaddr=0x00407000 (asid 04), paddr=0x03b82000 D</span><br><span class="line"> 43: vaddr=0x7f400000 (asid 04), paddr=0x00432000 D</span><br><span class="line"> 44: vaddr=0x0080d000 (asid 04), paddr=0x03fa7000 D</span><br><span class="line"> 45: vaddr=0x7f3fd000 (asid 04), paddr=0x03b86000 D</span><br><span class="line"> 46: vaddr=0x00402000 (asid 04), paddr=0x03fa1000</span><br><span class="line"> 47: vaddr=0x00400000 (asid 04), paddr=0x03fa4000</span><br><span class="line"> 48: vaddr=0x1003d000 (asid 01), paddr=0x03b7d000 D</span><br><span class="line"> 49: (invalid)</span><br><span class="line"> 50: vaddr=0x5fc01000 (asid 05), paddr=0x03fff000 D</span><br><span class="line"> 51: vaddr=0x00400000 (asid 05), paddr=0x03b6d000 D</span><br><span class="line"> 52: vaddr=0x00402000 (asid 05), paddr=0x03b6a000 D</span><br><span class="line"> 53: vaddr=0x00409000 (asid 05), paddr=0x03b63000 D</span><br><span class="line"> 54: vaddr=0x7f3fd000 (asid 05), paddr=0x03b70000 D</span><br><span class="line"> 55: vaddr=0x00402000 (asid 02), paddr=0x03fbb000 D</span><br><span class="line"> 56: vaddr=0x7f3fd000 (asid 02), paddr=0x03fc1000 D</span><br><span class="line"> 57: vaddr=0x00401000 (asid 02), paddr=0x03fbc000 D</span><br><span class="line"> 58: vaddr=0x00400000 (asid 02), paddr=0x03fbe000 D</span><br><span class="line"> 59: vaddr=0x10042000 (asid 01), paddr=0x03b78000 D</span><br><span class="line"> 60: vaddr=0x7fc40000 (asid 01), paddr=0x03fde000 D</span><br><span class="line"> 61: vaddr=0x10002000 (asid 01), paddr=0x03fdc000 D</span><br><span class="line"> 62: vaddr=0x10001000 (asid 01), paddr=0x03fdf000 D</span><br><span class="line"> 63: vaddr=0x10003000 (asid 01), paddr=0x03fd8000 D</span><br></pre></td></tr></table></figure></div>
<h5 id="trace"><a class="markdownIt-Anchor" href="#trace"></a> TRACE</h5>
<p>使用 trace 可以帮助同学们了解程序的运行轨迹。</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GXemul&gt; trace</span><br><span class="line">show_trace_tree = ON  (was: OFF)</span><br><span class="line">GXemul&gt; c</span><br><span class="line">&lt;env_run(0x80432488,0x804321d0,0,&amp;env_sched_list,..)&gt;</span><br><span class="line">  &lt;bcopy(0x81ffff64,0x804321d0,156)&gt;</span><br><span class="line">  &lt;lcontext(0x83b81000,0x8043226c,0x8043226c,&amp;env_sched_list,..)&gt;</span><br><span class="line">  &lt;env_pop_tf(0x80432488,0x140,0x8043226c,&amp;env_sched_list,..)&gt;</span><br><span class="line">  ........</span><br></pre></td></tr></table></figure></div>
<h2 id="reference"><a class="markdownIt-Anchor" href="#reference"></a> Reference</h2>
<ul>
<li><a class="link"   target="_blank" rel="noopener" href="http://gavare.se/gxemul/gxemul-stable/doc/debugging.html" >GXemul Debug <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></li>
</ul>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li><strong>Title:</strong> GXemul-note</li>
        <li><strong>Author:</strong> Charles</li>
        <li><strong>Created at
                :</strong> 2023-05-01 12:20:50</li>
        
            <li>
                <strong>Updated at
                    :</strong> 2023-11-05 21:36:19
            </li>
        
        <li>
            <strong>Link:</strong> https://charles2530.github.io/2023/05/01/gxemul-note/
        </li>
        <li>
            <strong>
                License:
            </strong>
            
            This work is licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a>.
            

        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/tags/OS/">#OS</a>&nbsp;
                    </li>
                
            </ul>
        

        
  <div class="recommended-article">
   <div class="recommended-desktop">
    <div class="recommended-article-header">
     <i aria-hidden="true"></i><span>recommend_articles</span>
    </div>
    <div class="recommended-article-group"><a class="recommended-article-item" href="/2023/01/13/matlab-note-summary/" title="matlab-note-summary" rel="bookmark">
  <img src="https://charles2530.github.io/image/background/p1.jfif" alt="matlab-note-summary" class="!max-w-none">
  <span class="title">matlab-note-summary</span>
</a><a class="recommended-article-item" href="/2023/02/01/latex-note-2/" title="Latex_note_2" rel="bookmark">
  <img src="https://charles2530.github.io/image/background/p4.jpg" alt="Latex_note_2" class="!max-w-none">
  <span class="title">Latex_note_2</span>
</a><a class="recommended-article-item" href="/2022/12/28/cpp-part5/" title="Cpp_part5" rel="bookmark">
  <img src="https://charles2530.github.io/image/background/p5.jfif" alt="Cpp_part5" class="!max-w-none">
  <span class="title">Cpp_part5</span>
</a></div>
   </div>
   <div class="recommended-mobile">
   <div class="recommended-article-header">
     <i aria-hidden="true"></i><span>recommend_articles</span>
   </div>
   <div class="recommended-article-group"><a class="recommended-article-item" href="/2023/01/13/matlab-note-summary/" title="matlab-note-summary" rel="bookmark">
  <img src="https://charles2530.github.io/image/background/p1.jfif" alt="matlab-note-summary" class="!max-w-none">
  <span class="title">matlab-note-summary</span>
</a><a class="recommended-article-item" href="/2023/02/01/latex-note-2/" title="Latex_note_2" rel="bookmark">
  <img src="https://charles2530.github.io/image/background/p4.jpg" alt="Latex_note_2" class="!max-w-none">
  <span class="title">Latex_note_2</span>
</a></div>
   </div>
  </div>

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                        rel="prev"
                        href="/2023/05/05/vue2-note-1/"
                        >
                            <span class="left arrow-icon flex justify-center items-center">
                                <i class="fa-solid fa-chevron-left"></i>
                            </span>
                            <span class="title flex justify-center items-center">
                                <span class="post-nav-title-item">Vue2-note-1</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                        rel="next"
                        href="/2023/04/26/lab5-report/"
                        >
                            <span class="title flex justify-center items-center">
                                <span class="post-nav-title-item">lab5-report</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex justify-center items-center">
                                <i class="fa-solid fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        


        
            <div class="comment-container">
                <div class="comments-container pjax">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fa-solid fa-comments"></i>&nbsp;Comments
    </div>
    

        <!-- 
            
    <div id="gitalk-container"></div>
    <script data-swup-reload-script
            src="//cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js"></script>
    <script data-swup-reload-script>

        function loadGitalk() {
            let __gitalk__pathname = decodeURI(location.pathname);
            const __gitalk__pathnameLength = __gitalk__pathname.length;
            const __gitalk__pathnameMaxLength = 50;
            if (__gitalk__pathnameLength > __gitalk__pathnameMaxLength) {
                __gitalk__pathname = __gitalk__pathname.substring(0, __gitalk__pathnameMaxLength - 3) + '...';
            }

            try {
                Gitalk && new Gitalk({
                    clientID: '8083299a8ee2aaf23879',
                    clientSecret: 'a8161e81d4872181e884fdb69f7be24916b6a9d0',
                    repo: 'charles2530_issues',
                    owner: 'Charles2530',
                    admin: ['Charles2530'],
                    id: __gitalk__pathname,
                    language: 'en'
                }).render('gitalk-container');

            } catch (e) {
                window.Gitalk = null;
            }
        }

        if ('true') {
            const loadGitalkTimeout = setTimeout(() => {
                loadGitalk();
                clearTimeout(loadGitalkTimeout);
            }, 1000);
        } else {
            window.addEventListener('DOMContentLoaded', loadGitalk);
        }
    </script>



         -->
        <script src="https://utteranc.es/client.js" repo="Charles2530/Charles2530.github.io" issue-term="pathname"
            label="Comment" theme="preferred-color-scheme" crossorigin="anonymous" async>
            </script>
        
</div>
            </div>
        
    </div>

    
        <div class="toc-content-container">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">On this page</div>
        <div class="page-title">GXemul-note</div>
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#gxemul-%E6%A8%A1%E6%8B%9F%E5%99%A8%E4%BB%8B%E7%BB%8D"><span class="nav-text"> GXemul 模拟器介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#gxemul-%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%BC%8F"><span class="nav-text"> GXemul 的基本工作方式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#gxemul-%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-text"> GXemul 的基本使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C-gxemul"><span class="nav-text"> 运行 GXemul</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gxemul-%E6%A8%A1%E6%8B%9F%E5%99%A8%E7%9A%84%E4%B8%80%E4%BA%9B%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4"><span class="nav-text"> GXemul 模拟器的一些基本命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E9%80%80%E5%87%BA-gxemul"><span class="nav-text"> 如何退出 GXemul</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gxemul-%E5%AE%9E%E9%99%85%E8%B0%83%E8%AF%95"><span class="nav-text"> GXemul 实际调试</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#launch-gxemul-in-debug-mode"><span class="nav-text"> Launch GXemul In DEBUG Mode</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#breakpointstep-unassembledumptrace"><span class="nav-text"> Breakpoint，Step &amp; Unassemble，Dump，Trace</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#add-breakpoint"><span class="nav-text"> ADD BREAKPOINT</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#step"><span class="nav-text"> STEP</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#unassemble"><span class="nav-text"> UNASSEMBLE</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#dump-data"><span class="nav-text"> DUMP DATA</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#dump-registers"><span class="nav-text"> DUMP REGISTERS</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#trace"><span class="nav-text"> TRACE</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#reference"><span class="nav-text"> Reference</span></a></li></ol></li></ol>

    </div>
</div>
        </div>
    
</div>



                

            </div>

            

        </div>

        <div class="main-content-footer">
            <footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color">
    <div class="info-container py-3 text-center">
        
        <div class="text-center">
            &copy;
            
              <span>2022</span>
              -
            
            2023&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">Charles</a>
        </div>
        
            <script data-swup-reload-script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="relative text-center lg:absolute lg:right-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-right">
                
                    <span id="busuanzi_container_site_uv" class="lg:!block">
                        <span class="text-sm">Visitor Count</span>
                        <span id="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="lg:!block">
                        <span class="text-sm">Total Page Views</span>
                        <span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left">
            <span class="lg:block text-sm">Powered by Charles</span>
            <span class="text-sm lg:block">Theme&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.5.0</a></span>
        </div>
        
        
            <div>
                Blog up for <span class="odometer" id="runtime_days" ></span> days <span class="odometer" id="runtime_hours"></span> hrs <span class="odometer" id="runtime_minutes"></span> Min <span class="odometer" id="runtime_seconds"></span> Sec
            </div>
        
        
            <script data-swup-reload-script>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
            
                
        
                
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fa-regular fa-comments"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        
            <li class="right-bottom-tools rss flex justify-center items-center">
                <a class="flex justify-center items-center"
                   href="/atom.xml"
                   target="_blank"
                >
                <i class="fa-regular fa-rss"></i>
                </a>
            </li>
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex justify-center items-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fa-solid fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fa-solid fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>


    <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/libs/Swup.min.js"></script><script src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/libs/SwupSlideTheme.min.js"></script><script src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/libs/SwupScriptsPlugin.min.js"></script><script src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/libs/SwupProgressPlugin.min.js"></script><script src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/libs/SwupScrollPlugin.min.js"></script><script src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/libs/SwupPreloadPlugin.min.js"></script>
<script>
    const swup = new Swup({
        plugins: [
            new SwupScriptsPlugin({
                optin: true,
            }),
            new SwupProgressPlugin(),
            new SwupScrollPlugin({
                offset: 80,
            }),
            new SwupSlideTheme({
                mainElement: ".main-content-body",
            }),
            new SwupPreloadPlugin(),
        ],
        containers: ["#swup"],
    });
</script>





 <script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/tools/imageViewer.js"></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/utils.js"></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/main.js"></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/layouts/navbarShrink.js"></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/tools/scrollTopBottom.js"></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/tools/lightDarkSwitch.js"></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/layouts/categoryList.js"></script>


    <script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/tools/localSearch.js"></script>



    <script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/tools/codeBlock.js"></script>



    <script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/layouts/lazyload.js"></script>



    <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/tools/runtime.js"></script>
    <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/libs/odometer.min.js"></script>
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/assets/odometer-theme-minimal.css">



  <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/libs/Typed.min.js"></script>
  <script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/plugins/typed.js"></script>



    <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/libs/mermaid.min.js"></script>
    <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/plugins/mermaid.js"></script>



    <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/libs/minimasonry.min.js"></script>
    <script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/plugins/masonry.js"></script>



<div class="post-scripts" data-swup-reload-script>
    
        <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/libs/anime.min.js"></script>
        <script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/tools/tocToggle.js"></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/layouts/toc.js"></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.5.0/source/js/plugins/tabs.js"></script>
    
</div>
 
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/love.js"></script>
