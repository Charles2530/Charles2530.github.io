<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Charles">
    
    <meta name="author" content="Charles">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    
        
            <link rel="preconnect" href="https://npm.elemecdn.com" crossorigin>
        
    
    <!--- Seo Part-->
    
    <link rel="canonical" href="http://charles2530.github.io/2023/04/21/jml-note/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="post by Charles in 2023-04-21 07:34:38">
<meta property="og:type" content="article">
<meta property="og:title" content="JML-note">
<meta property="og:url" content="http://charles2530.github.io/2023/04/21/jml-note/index.html">
<meta property="og:site_name" content="Charles&#39;s Castle">
<meta property="og:description" content="post by Charles in 2023-04-21 07:34:38">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-04-20T23:34:38.000Z">
<meta property="article:modified_time" content="2023-07-21T05:44:04.906Z">
<meta property="article:author" content="Du Jinyang">
<meta property="article:tag" content="OO">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="https://charles2530.github.io/image/background/favicon.png" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="https://charles2530.github.io/image/background/favicon.png">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="https://charles2530.github.io/image/background/favicon.png">
    <!--- Page Info-->
    
    <title>
        
            JML-note -
        
        Charles&#39;s Castle
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/fonts/fonts.css">
    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/fonts/Satoshi/satoshi.css">
    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/fonts/Chillax/chillax.css">
    <!--- Font Part-->
    
    
    
    

    <!--- Inject Part-->
    
    <script id="hexo-configurations">
    let Global = window.Global || {};
    Global.hexo_config = {"hostname":"charles2530.github.io","root":"/","language":"en","path":"search.xml"};
    Global.theme_config = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":true,"list":["lol","Neo","God"]},"code_block":{"copy":true,"style":"mac","font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":6,"number":false,"expand":true,"init_open":true},"copyright":true,"lazyload":true,"recommendation":{"enable":true,"title":"recommend_articles","limit":3,"mobile_limit":2,"placeholder":"https://charles2530.github.io/image/background/p3.jfif","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":"#1890ff"},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":true},"scroll_progress":{"bar":true,"percentage":true},"busuanzi_counter":{"enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"pjax":true,"open_graph":true,"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"https://charles2530.github.io/image/background/background-light1.jpg","dark":"https://charles2530.github.io/image/background/background-dark1.jpg"},"title":"Charles's Castle","subtitle":{"text":["Happiness is best!","Never give up!","Everyday is a gift!"],"hitokoto":{"enable":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#000000","dark":"#d1d1b6"},"text_style":{"title_size":"3.2rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":true,"links":{"github":"https://github.com/Charles2530/","zhihu":"https://www.zhihu.com/people/yang-guang-xiao-zi-55-55","email":"charles2530@163.com"}}},"plugins":{"feed":{"enable":true},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null},{"name":null,"artist":null,"url":null,"cover":null}]},"mermaid":{"enable":true,"version":"9.3.0"}},"version":"2.2.0","navbar":{"auto_hide":true,"color":{"left":"#f78736","right":"#367df7","transparency":35},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Categories":{"path":"/categories","icon":"fas fa-bookmark"},"Tags":{"path":"/tags","icon":"fas fa-tags"},"About":{"icon":"fa-regular fa-user","submenus":{"Me":"/about","Github":"https://github.com/Charles2530/","Blog":"https://charles2530.github.io"}}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":"This is Charles's Castle","links":{"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Photos":{"icon":"fa-solid fa-image","path":"/masonry/"},"Essays":{"icon":"fa-solid fa-message-lines","path":"/essay/"},"Friends":{"icon":"fa-solid fa-user-group","path":"/friends/"}}},"article_date_format":"auto","categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}},"footerStart":"2022/12/27 00:00:00"};
    Global.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
    Global.data_config = {"masonry":true};
  </script>
    
    <!--- Fontawesome Part-->
    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/fontawesome/fontawesome.min.css">
    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/fontawesome/brands.min.css">
    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/fontawesome/solid.min.css">
    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/fontawesome/regular.min.css">
    
    
    
    
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Charles's Castle" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>



<body>
  <div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fa-solid fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="main-content-container">

        <div class="main-content-header">
            <header class="navbar-container">
    
    <div class="navbar-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                
                Charles&#39;s Castle
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/"  >
                                    
                                        
                                            <i class="fa-regular fa-house"></i>
                                        
                                        HOME
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/categories"  >
                                    
                                        
                                            <i class="fas fa-bookmark"></i>
                                        
                                        CATEGORIES
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/tags"  >
                                    
                                        
                                            <i class="fas fa-tags"></i>
                                        
                                        TAGS
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="has-dropdown" 
                                    href="#" onClick="return false;">
                                    
                                        
                                            <i class="fa-regular fa-user"></i>
                                        
                                        ABOUT&nbsp;<i class="fa-solid fa-chevron-down"></i>
                                    
                                </a>
                                <!-- Submenu -->
                                
                                    <ul class="sub-menu">
                                    
                                        <li>
                                        <a href="/about">ME
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a target="_blank" rel="noopener" href="https://github.com/Charles2530/">GITHUB
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a href="https://charles2530.github.io">BLOG
                                        </a>
                                        </li>
                                    
                                    </ul>
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile drawer -->
    <div class="navbar-drawer">
        <ul class="drawer-navbar-list">
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/"  >
                             
                                
                                    <i class="fa-regular fa-house"></i>
                                
                                HOME
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/categories"  >
                             
                                
                                    <i class="fas fa-bookmark"></i>
                                
                                CATEGORIES
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/tags"  >
                             
                                
                                    <i class="fas fa-tags"></i>
                                
                                TAGS
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="has-dropdown" 
                        href="#" onClick="return false;">
                            
                                
                                    <i class="fa-regular fa-user"></i>
                                
                                ABOUT&nbsp;<i class="fa-solid fa-chevron-down"></i>
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                              
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" href="/about">ME</a>
                            </li>
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" target="_blank" rel="noopener" href="https://github.com/Charles2530/">GITHUB</a>
                            </li>
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" href="https://charles2530.github.io">BLOG</a>
                            </li>
                        
                    
            

        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">

            
                      
                <div class="article-title">
                    <img src="https://charles2530.github.io/image/background/p2.jpg" alt="JML-note" />
                    <h1 class="article-title-cover">JML-note</h1>
                </div>
            
                
            

            
                <div class="article-header">
                    <div class="avatar">
                        <img src="https://charles2530.github.io/image/background/logo.jpg">
                    </div>
                    <div class="info">
                        <div class="author">
                            <span class="name">Charles</span>
                            
                                <span class="author-label">Lv6</span>
                            
                        </div>
                        <div class="meta-info">
                            <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2023-04-21 07:34:38</span>
        <span class="mobile">2023-04-21 07:34</span>
        <span class="hover-info">Created</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2023-07-21 13:44:04</span>
            <span class="mobile">2023-07-21 13:44</span>
            <span class="hover-info">Updated</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/Lesson/">Lesson</a>&nbsp;
                    </li>
                
                    <li>
                        &gt; <a href="/categories/Lesson/OO/">OO</a>&nbsp;
                    </li>
                
                    <li>
                        &gt; <a href="/categories/Lesson/OO/OO-lab/">OO-lab</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/OO/">OO</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/Java/">Java</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fa-regular fa-typewriter"></i>&nbsp;<span>5.2k Words</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fa-regular fa-clock"></i>&nbsp;<span>19 Mins</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content markdown-body">
                <h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>本文中涉及的全部内容均可以在《JML手册》中找到，可以当作简化版的手册使用。</p>
<h3 id="一、注释和基本关键字"><a href="#一、注释和基本关键字" class="headerlink" title="一、注释和基本关键字"></a>一、注释和基本关键字</h3><h4 id="1-两种注释格式"><a href="#1-两种注释格式" class="headerlink" title="1. 两种注释格式"></a>1. 两种注释格式</h4><p><code>JML</code>中以<code>javadoc</code>注释的方式表示规格，每一行都以<code>@</code>开头，注释方式有两种：行注释和块注释。两种注释方式分别可以表示为：</p>
<ul>
<li>行注释：<strong>//@ 注释内容</strong>（注意中间的空格）</li>
</ul>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@ annotation</span></span><br></pre></td></tr></table></figure></div>
<ul>
<li>块注释：<strong>/*@ 注释内容 @*/</strong></li>
</ul>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*@ annotation1</span></span><br><span class="line"><span class="comment">  @    annotation2</span></span><br><span class="line"><span class="comment">  @    annotation3</span></span><br><span class="line"><span class="comment">  @    annotation4</span></span><br><span class="line"><span class="comment">  @    annotation5</span></span><br><span class="line"><span class="comment">  @    annotation6</span></span><br><span class="line"><span class="comment">  @    annotation7</span></span><br><span class="line"><span class="comment">  @    annotation8</span></span><br><span class="line"><span class="comment">  @*/</span></span><br></pre></td></tr></table></figure></div>
<p>按照<code>javadoc</code>的习惯，<code>JML</code>注释一般放在被注释成分的近邻上部。</p>
<h4 id="2-一些其他的关键字"><a href="#2-一些其他的关键字" class="headerlink" title="2. 一些其他的关键字"></a>2. 一些其他的关键字</h4><ul>
<li>方法中间的<code>pure</code>：表示该方法是纯粹查询方法，不会造成任何其他影响（即<strong>没有副作用</strong>）,如<code>Level 0</code>手册中的两个方法：</li>
</ul>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="comment">/*@ pure @*/</span> <span class="type">int</span> <span class="title function_">largest</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="comment">/*@ pure @*/</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure></div>
<ul>
<li><code>model</code>：表示规格描述，仅仅用作<strong>规格变量的声明</strong>，无需在类中声明和定义。</li>
<li><code>non_null</code>：数组的引用对象不能为空。</li>
</ul>
<p>*<code>normal_behavior</code>：正常的行为（下面会提到），其下文往往是前置条件、副作用范围限定和后置条件，仍旧拿手册中的类举例：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">IntHeap</span> &#123; <span class="comment">// line 3</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//@ public model non_null int [] elements; </span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*@ public normal_behavior </span></span><br><span class="line"><span class="comment">    @ requires elements.length &gt;= 1; </span></span><br><span class="line"><span class="comment">    @ assignable \nothing; </span></span><br><span class="line"><span class="comment">    @ ensures \result </span></span><br><span class="line"><span class="comment">    @         == (\max int j; </span></span><br><span class="line"><span class="comment">    @             0 &lt;= j &amp;&amp; j &lt; elements.length; </span></span><br><span class="line"><span class="comment">    @             elements[j]); </span></span><br><span class="line"><span class="comment">    @*/</span> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="comment">/*@ pure @*/</span> <span class="type">int</span> <span class="title function_">largest</span><span class="params">()</span>; </span><br><span class="line">    <span class="comment">//@ ensures \result == elements.length; </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="comment">/*@ pure @*/</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>; </span><br><span class="line">&#125;; </span><br></pre></td></tr></table></figure></div>
<ul>
<li><p><code>requires</code>：定义方法的前置条件，在本例中即</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">elements.length &gt;= <span class="number">1</span>;<span class="comment">//elements中至少有一个元素</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p><code>assignable</code>：副作用范围限定，列出方法能够修改的类成员属性</p>
</li>
<li><p><code>\nothing</code>：表示方法不对任何成员属性进行修改，是<code>pure</code>方法（详见上文）</p>
</li>
<li><p><code>ensures</code>：定义方法的后置条件，在本例中即</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ensures \result == (\max <span class="type">int</span> j; <span class="number">0</span> &lt;= j &amp;&amp; j &lt; elements.length; elements[j]); </span><br></pre></td></tr></table></figure></div>
<p>作用为获取<code>elements</code>中的最大元素。（其中的<code>\max</code>是取最大数的关键词）</p>
<p><strong>注意：规格中的每个子句都要以分号结尾！</strong></p>
</li>
</ul>
<h4 id="3-规格变量"><a href="#3-规格变量" class="headerlink" title="3. 规格变量"></a>3. 规格变量</h4><p><code>JML</code>中规格变量分为两种：静态和实例。如果在接口中声明规格变量，需要明确变量的类别。</p>
<ul>
<li>静态：增加<code>static</code>关键字，访问规则与<code>JAVA</code>中<code>static</code>类型变量相似。</li>
</ul>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@public static model non_null int []elements</span></span><br></pre></td></tr></table></figure></div>
<ul>
<li>实例：增加<code>instance</code>关键字，不声明时默认为实例型规格变量。</li>
</ul>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@public instance model non_null int []elements</span></span><br></pre></td></tr></table></figure></div>
<h3 id="二、JML表达式"><a href="#二、JML表达式" class="headerlink" title="二、JML表达式"></a>二、JML表达式</h3><h4 id="1-原子表达式"><a href="#1-原子表达式" class="headerlink" title="1. 原子表达式"></a>1. 原子表达式</h4><h5 id="①-result"><a href="#①-result" class="headerlink" title="①\result"></a>①\result</h5><p>表示一个返回值类型非<code>void</code>的方法的执行结果，也就是函数返回值，<strong>类型与方法定义时的声明相同</strong>。</p>
<h5 id="②-old-expr"><a href="#②-old-expr" class="headerlink" title="②\old(expr)"></a>②\old(expr)</h5><p>表示表达式<code>expr</code>在相应方法执行前的取值，遵循<code>JAVA</code>引用规则，即：针对一个对象引用，只判断<strong>引用本身</strong>是否发生变化，并不判断<strong>引用指向的对象实体的内容</strong>是否发生变化。故只有当引用本身发生了变化（指向了另外一个对象）时，取值才会发生变化。</p>
<p>在使用时，我们应该把<code>\old()</code>关心的表达式取值<strong>整体括起来</strong>。</p>
<h5 id="③-not-assigned-x-y-…"><a href="#③-not-assigned-x-y-…" class="headerlink" title="③\not_assigned(x, y, …)"></a>③\not_assigned(x, y, …)</h5><p>表示括号中的变量是否在方法执行过程中被赋值，没有的话返回<code>true</code>，否则返回<code>false</code>。主要用于后置条件的约束上，用以限制方法的实现<strong>不能对列表中的变量赋值</strong>。</p>
<h5 id="④-not-modified-x-y-…"><a href="#④-not-modified-x-y-…" class="headerlink" title="④\not_modified(x, y, …)"></a>④\not_modified(x, y, …)</h5><p>限制括号中的变量在方法执行期间取值未发生变化。</p>
<h5 id="⑤-nonnullelements-container"><a href="#⑤-nonnullelements-container" class="headerlink" title="⑤\nonnullelements(container)"></a>⑤\nonnullelements(container)</h5><p>表示<code>container</code>对象中存储的对象不会有<code>null</code>，等价于如下断言：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">container != <span class="literal">null</span> &amp;&amp; (\forall <span class="type">int</span> i; <span class="number">0</span> &lt;= i &amp;&amp; i &lt; container.length;container[i] != <span class="literal">null</span>)</span><br></pre></td></tr></table></figure></div>
<h5 id="⑥-type-type"><a href="#⑥-type-type" class="headerlink" title="⑥\type(type)"></a>⑥\type(type)</h5><p>返回类型<code>type</code>对应的类型（<code>Class</code>），如<code>\type(boolean)</code>为<code>Boolean.TYPE</code>。<code>TYPE</code>是<code>JML</code>中的缩略表示，等同于<code>Java</code>中的<code>java.lang.Class</code>。</p>
<h5 id="⑦-typeof-expr"><a href="#⑦-typeof-expr" class="headerlink" title="⑦\typeof(expr)"></a>⑦\typeof(expr)</h5><p>返回<code>expr</code>对应的准确类型，如<code>\typeof(false)</code>为<code>Boolean.TYPE</code>。</p>
<h4 id="2-量化表达式"><a href="#2-量化表达式" class="headerlink" title="2. 量化表达式"></a>2. 量化表达式</h4><h5 id="①-forall"><a href="#①-forall" class="headerlink" title="①\forall"></a>①\forall</h5><p><strong>全称量词</strong>修饰的表达式，表示对应给定范围内的元素，<strong>每个元素都满足对应的约束。</strong></p>
<p>举例来说，<code>(\forall int i,j; 0 &lt;= i &amp;&amp; i &lt;= j&amp;&amp; j &lt; 10;a[i] &lt; a[j])</code>的意思为，对于任意<code>0&lt;=i&lt;j&lt;=10</code>，<code>a[i]&lt;a[j]</code>。这个表达式如果为真，表明数组<code>a</code>事实上是升序排列。</p>
<h5 id="②-exists"><a href="#②-exists" class="headerlink" title="②\exists"></a>②\exists</h5><p><strong>存在量词</strong>修饰的表达式，表示对于给定范围内的元素，<strong>存在某个元素满足对应的约束。</strong></p>
<p>举例来说，<code>(\exists int i; 0 &lt;= i &amp;&amp; i &lt; 10;a[i] &lt; 0)</code>的意思为，对于<code>0 &lt;= i &lt; 10</code>，存在一个<code>a[i] &lt; 0</code>。</p>
<h5 id="③-sum"><a href="#③-sum" class="headerlink" title="③\sum"></a>③\sum</h5><p><strong>求和</strong>表达式，返回给定范围内表达式的和。</p>
<p><code>(\sum int i; 0&lt;= i &amp;&amp; i &lt; 5;i)</code>，意为计算<code>[0,5)</code>范围内的整数<code>i</code>的和，即：0+1+2+3+4=10。值得注意的是，<code>0 &lt;= i &amp;&amp; i &lt; 5</code>是对<code>i</code>的范围的限制，而<strong>求和表达式</strong>是最后的那个<code>i</code>。</p>
<p>进一步说，如果表达式为<code>(\sum int i; 0 &lt;= i &amp;&amp; i &lt; 5 ; i * i)</code>，则等价于表达式：$\sum_{i=0}^4i×i$</p>
<h5 id="④-product"><a href="#④-product" class="headerlink" title="④\product"></a>④\product</h5><p>返回给定范围内表达式连乘的结果，如<code>(\product int i;0 &lt; i &amp;&amp; i &lt; 5; i)</code>等价于：$∏_{i=1}^4i$</p>
<h5 id="⑤-max"><a href="#⑤-max" class="headerlink" title="⑤\max"></a>⑤\max</h5><p>返回给定范围内表达式的最大值，如<code>(\max int i; 0 &lt;= i &amp;&amp; i &lt; 5;i)</code>，这个表达式返回<code>[0,5)</code>中最大的整数，即4 。</p>
<h5 id="⑥-min"><a href="#⑥-min" class="headerlink" title="⑥\min"></a>⑥\min</h5><p>返回最小值</p>
<h5 id="⑦-num-of"><a href="#⑦-num-of" class="headerlink" title="⑦\num_of()"></a>⑦\num_of()</h5><p>返回指定变量中满足相应条件的取值个数。如：<code>(\num_of int x; 0 &lt; x &amp;&amp; x &lt;= 20;x % 2 == 0)</code>，这个表达式给出(0,20]中可以被2整除的整数的个数，即<code>10</code>。</p>
<p>一般而言，对于<code>(\num_of T x; R(x); P(x)</code>，<code>T</code>为变量 <code>x</code>的类型，<code>R(x)</code>为<code>x</code>的取值范围，<code>P(x)</code>定义<code>x</code>需要满足的约束条件。从逻辑等价角度看，相当于<code>(\num_of T x; R(x) &amp;&amp; P(x);1)</code></p>
<h4 id="3-集合表达式"><a href="#3-集合表达式" class="headerlink" title="3. 集合表达式"></a>3. 集合表达式</h4><p>可以在JML规格中构造一个局部的集合（容器），明确集合中包含的元素。例如下面这句声明：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">JMLObjectSet</span> &#123;Integer i | s.contains(i) &amp;&amp; <span class="number">0</span> &lt; i.intValue()&#125;</span><br></pre></td></tr></table></figure></div>
<p>其含义为：构造一个<code>JMLObjectSet</code>对象，其包含的元素类型为<code>Integer</code>，都在容器<code>s</code>中出现，并且整数值大于0。</p>
<p>PS：这里的<code>s</code>代表<strong>容器集合</strong>，也就是我们平时在作业中使用的<code>ArrayList</code>、<code>HashSet</code>、<code>HashMap</code>等容器！</p>
<p>更加通俗地讲，集合构造表达式的一般形式可以表述为：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">ST</span>&#123;T x | R(x) &amp;&amp; P(x)&#125;</span><br></pre></td></tr></table></figure></div>
<p>其中<code>R(X)</code>对应集合中<code>x</code>的范围，通常是来自于<strong>某个既有集合中的元素</strong>，如<code>s.has(x)</code>，<code>P(x)</code>对应<code>x</code>取值的约束。</p>
<h4 id="4-操作符"><a href="#4-操作符" class="headerlink" title="4. 操作符"></a>4. 操作符</h4><h5 id="①子类型关系操作符——-lt"><a href="#①子类型关系操作符——-lt" class="headerlink" title="①子类型关系操作符——&lt;:"></a>①子类型关系操作符——<code>&lt;:</code></h5><p><code>E1&lt;:E2</code>，如果<code>E1</code>是类型<code>E2</code>的<strong>子类型</strong>(sub type)或<code>E1</code>和<code>E2</code>是<strong>相同的类型</strong>，那么表达式的<strong>结果为真</strong>，否则为假。</p>
<p>举例如下：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Integer.TYPE &lt;: Integer.TYPE<span class="comment">//为真</span></span><br><span class="line">Integer.TYPE &lt;: ArrayList.TYPE<span class="comment">//为假</span></span><br></pre></td></tr></table></figure></div>
<p>PS：对于任何类<code>X</code>，都满足<code>X.TYPE &lt;: Object.TYPE</code>，因为任何类都是<code>Object</code>的子类。</p>
<h5 id="②等价关系操作符——-lt-gt-和-lt-gt"><a href="#②等价关系操作符——-lt-gt-和-lt-gt" class="headerlink" title="②等价关系操作符——&lt;==&gt;和&lt;=!=&gt;"></a>②等价关系操作符——<code>&lt;==&gt;</code>和<code>&lt;=!=&gt;</code></h5><p><code>b_expr1&lt;==&gt;b_expr2</code>或者<code>b_expr1&lt;=!=&gt;b_expr2</code>，其中<code>b_expr1</code>和<code>b_expr2</code>是布尔表达式，意为<code>b_expr1 == b_expr2</code>或者<code>b_expr1 != b_expr2</code>。可以看出这两个操作符和Java中的<code>==</code>与<code>!=</code>效果相同，但是按照JML的定义，<code>&lt;==&gt;</code>的优先级低于<code>==</code>，<code>&lt;=!=&gt;</code>低于<code>!=</code>。</p>
<h5 id="③推理操作符——-gt-和-lt"><a href="#③推理操作符——-gt-和-lt" class="headerlink" title="③推理操作符——==&gt;和&lt;=="></a>③推理操作符——<code>==&gt;</code>和<code>&lt;==</code></h5><p>对于表达式<code>b_expr1==&gt;b_expr2</code>或者<code>b_expr2&lt;==b_expr1</code>，当<code>b_expr1==false</code>或者<code>b_expr1==true</code>且<code>b_expr2==true</code>时，整个表达式的值为<code>true</code>。</p>
<p>PS：和离散课上学的有些类似。若前式为假，结果一定为真；若前式为真，需要后式同时为真，结果才能为真。</p>
<h5 id="④变量引用操作符"><a href="#④变量引用操作符" class="headerlink" title="④变量引用操作符"></a>④变量引用操作符</h5><ul>
<li><code>\nothing</code>表示空集。</li>
<li><code>\everything</code>表示全集，包括当前作用域下能访问到的所有变量。</li>
</ul>
<p>该操作符经常在<code>assignable</code>句中使用，如<code>assignable \nothing</code>表示当前作用域下的每个变量<strong>都不可以</strong>在方法执行过程中被赋值。</p>
<h3 id="三、方法规格"><a href="#三、方法规格" class="headerlink" title="三、方法规格"></a>三、方法规格</h3><p>方法规格的核心内容包括三个方面：<strong>前置条件、后置条件和副作用约定</strong>。</p>
<ol>
<li>前置条件：对方法<strong>输入参数</strong>的限制，若不满足，则方法执行结果<strong>不可预测</strong>（无法保证方法结果的正确性）。</li>
<li>后置条件：对方法<strong>执行结果</strong>的限制，如果执行结果满足后置条件，则表示方法执行正确，否则执行错误。</li>
<li>副作用约定：方法在执行过程中对输入对象或<code>this</code>对象进行了<strong>修改</strong>（对其成员变量进行了赋值，或者调用其修改方法）。</li>
</ol>
<p>两类方法：<strong>全部过程和局部过程</strong>。</p>
<ol>
<li>全部过程：前置条件<strong>恒为真</strong>，即可以适应于<strong>任意调用场景</strong>。</li>
<li>局部过程：前置条件<strong>不恒为真</strong>，要求调用者必须确保调用时<strong>满足相应的前置条件</strong>。</li>
</ol>
<p>从设计角度看，我们的软件应当能够处理用户得到所有可能输入，因此，需要对不符合前置条件的输入进行处理，这一般意味着<strong>异常处理</strong>。</p>
<p>从规格角度，JML区分两种场景，对应<strong>正常行为规格</strong>和<strong>异常行为规格</strong>。</p>
<h4 id="1-前置条件"><a href="#1-前置条件" class="headerlink" title="1. 前置条件"></a>1. 前置条件</h4><p>通过<code>requires</code>子句表示：<code>requires P;</code>。其中<code>requires</code>是JML的关键词，表示“要求调用者确保P为真”。</p>
<p>值得注意的是，方法规格中可以有<strong>多个</strong><code>requires</code>子句，为<strong>并列关系</strong>，即，调用者必须<strong>同时满足所有的并列子句要求。</strong></p>
<p><strong>如果设计者想表达或的逻辑，</strong>则应当使用一个<code>requires</code>子句，在其中的谓词<code>P</code>中使用逻辑或操作符表达相应的约束，如<code>requires P1 || P2;</code>。</p>
<h4 id="2-后置条件"><a href="#2-后置条件" class="headerlink" title="2. 后置条件"></a>2. 后置条件</h4><p>通过<code>ensures</code>子句表示：<code>ensures Q;</code>。其中<code>ensures</code>是JML的关键词，表示“方法实现者确保方法执行返回的结果一定满足谓词Q的要求，即，确保Q为真”。</p>
<p>多个<code>ensures</code>子句是被允许的且为<strong>并列关系即须同时满足</strong>。类似地，<strong>或</strong>的表达应当在一个<code>ensures</code>子句中用逻辑或<code>||</code>约束。</p>
<h4 id="3-副作用约定"><a href="#3-副作用约定" class="headerlink" title="3. 副作用约定"></a>3. 副作用约定</h4><p>副作用：方法在执行过程中会<strong>修改对象的属性数据或者类的静态成员数据</strong>，从而给后续方法的执行造成影响。</p>
<p>从方法规格的角度，必须明确给出副作用的范围。JML提供了副作用范围子句，使用关键词<code>assignable</code>或<code>modifiable</code>。</p>
<p>从语法上看，副作用约束子句有两种形态：</p>
<ul>
<li>不指明具体的变量，而是用JML关键词来概括。</li>
<li>指明具体的变量列表。</li>
</ul>
<p>以手册中的栗子为模板解释：</p>
<h5 id="①变量可否被修改"><a href="#①变量可否被修改" class="headerlink" title="①变量可否被修改"></a>①变量可否被修改</h5><div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IntegerSet</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="comment">/*@spec_public@*/</span> ArrayList&lt;Integer&gt; elements;</span><br><span class="line">    <span class="keyword">private</span> <span class="comment">/*@spec_public@*/</span> Integer max;</span><br><span class="line">    <span class="keyword">private</span> <span class="comment">/*@spec_public@*/</span> Integer min;</span><br><span class="line">    <span class="comment">/*@</span></span><br><span class="line"><span class="comment">      @ assignable \nothing;</span></span><br><span class="line"><span class="comment">      @ assignable \everything;</span></span><br><span class="line"><span class="comment">      @ modifiable \nothing;</span></span><br><span class="line"><span class="comment">      @ modifiable \everthing;</span></span><br><span class="line"><span class="comment">      @ assignable elements;</span></span><br><span class="line"><span class="comment">      @ modifiable elements;</span></span><br><span class="line"><span class="comment">      @ assignable elements, max, min;</span></span><br><span class="line"><span class="comment">      @ modifiable elements, max, min;</span></span><br><span class="line"><span class="comment">      @*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<ul>
<li><code>assingable</code>表示可赋值，<code>modifiable</code>表示可修改，两者在大部分情况下可以交换使用。</li>
<li><code>\nothing</code>和<code>\everything</code>：前者表示当前作用域中可见的所有类成员变量和方法输入对象<strong>都不可以被赋值或修改</strong>；后者表示示当前作用域内可见的所有类成员变量和方法输入对象<strong>都可以被赋值或者修改</strong>。</li>
<li>也可以指明具体的<strong>可以修改的变量列表</strong>，为一个或多个变量，多个的时候需要用逗号分隔，如<code>@assignable elements, max, min</code>。</li>
</ul>
<h5 id="②纯粹访问性"><a href="#②纯粹访问性" class="headerlink" title="②纯粹访问性"></a>②纯粹访问性</h5><p>纯粹访问性方法：不会对对象的状态进行任何改变，也无需提供输入参数，无需描述前置条件，也不会有任何副作用，且一定可以正常执行结束。</p>
<p>可以使用<code>pure</code>关键词来描述：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="comment">/*@ pure @ */</span> String <span class="title function_">getName</span><span class="params">()</span>;<span class="comment">//不需做任何限定，是一种极简的场景</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//@ ensures \result == bachelor || \result == master;</span></span><br><span class="line"><span class="keyword">public</span> <span class="comment">/*@ pure @*/</span> <span class="type">int</span> <span class="title function_">getStatus</span><span class="params">()</span>;<span class="comment">//限定返回值等于bachelor或master</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//@ ensures \result &gt;= 0;</span></span><br><span class="line"><span class="keyword">public</span> <span class="comment">/*@ pure @*/</span> <span class="type">int</span> <span class="title function_">getCredits</span><span class="params">()</span>;<span class="comment">//限定返回值大于等于0</span></span><br></pre></td></tr></table></figure></div>
<p>在方法规格中，可以引用<code>pure</code>方法返回的结果：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*@ requires c &gt;= 0;</span></span><br><span class="line"><span class="comment">    @ ensures getCredits() == \old(getCredits()) + c;</span></span><br><span class="line"><span class="comment">    @*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addCredits</span><span class="params">(<span class="type">int</span> c)</span>;</span><br></pre></td></tr></table></figure></div>
<p>有时前置条件和后置条件要对<strong>不止一个变量</strong>进行约束，这时需要使用<code>\forall</code>或<code>\exists</code>表达式，这块在手册中已经说的很清楚了，在此不多赘述。</p>
<h5 id="③方法正常功能和异常行为的区分"><a href="#③方法正常功能和异常行为的区分" class="headerlink" title="③方法正常功能和异常行为的区分"></a>③方法正常功能和异常行为的区分</h5><p>仍旧援引手册中的栗子：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*@ public normal_behavior //对方法的正常功能给出规格</span></span><br><span class="line"><span class="comment">  @ requires z &lt;= 99;//</span></span><br><span class="line"><span class="comment">  @ assignable \nothing;//</span></span><br><span class="line"><span class="comment">  @ ensures \result &gt; z;//</span></span><br><span class="line"><span class="comment">  @ also //连接正常规格和异常规格</span></span><br><span class="line"><span class="comment">  @ public exceptional_behavior //对方法的异常功能给出规格</span></span><br><span class="line"><span class="comment">  @ requires z &lt; 0;</span></span><br><span class="line"><span class="comment">  @ assignable \nothing;</span></span><br><span class="line"><span class="comment">  @ signals (IllegalArgumentException e) true;</span></span><br><span class="line"><span class="comment">  @*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">cantBeSatisfied</span><span class="params">(<span class="type">int</span> z)</span> <span class="keyword">throws</span> IllegalArgumentException；</span><br></pre></td></tr></table></figure></div>
<p>部分语句的解释见代码中注释，下面列出一些值得注意的点：</p>
<ul>
<li>正常功能：输入方法关联<code>this</code>对象的状态在<strong>正常范围</strong>内是时所指向的功能，与之相对的是异常功能。</li>
<li><code>public</code>关键词表示：相应的规格在<strong>所在包范围内</strong>的所有其他规格处都可见。</li>
<li>若一个方法<strong>无异常处理行为</strong>，就<strong>无需区分</strong>正常功能规格和异常功能规格，也<strong>无需使用</strong>这两个关键词了。</li>
<li>使用<code>also</code>关键词的两个场景：<ul>
<li>父类中对相应方法定义了规格，子类重写了该方法，需要<strong>补充规格</strong>，这时应该在补充的规格之前使用<code>also</code>。</li>
<li>一个方法规格中设计了<strong>多个功能规格描述</strong>，正常功能规格或者异常功能规格，需要使用<code>also</code>来<strong>分隔</strong>。</li>
</ul>
</li>
<li>细心的小朋友还可以看出，这段规格描述存在<code>bug</code>，可以停下来好好想想在哪里哦。（<strong>手册里有解释</strong>）</li>
<li>不论是正常功能规格还是异常功能规格，都包括了<strong>前置条件、后置条件和副作用声明</strong>。但不同的是，异常功能规格中，后置条件常表示为<strong>抛出异常</strong>，使用<code>signals</code>子句表示。</li>
</ul>
<h4 id="4-signals子句"><a href="#4-signals子句" class="headerlink" title="4. signals子句"></a>4. signals子句</h4><p>用来表示抛出异常，一般的结构为：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">signals (***Exception e)b_expr<span class="comment">//当b_expr为true时，抛出括号中的异常e</span></span><br></pre></td></tr></table></figure></div>
<ul>
<li>抛出的异常既可以是<code>Java</code>预定义的异常类型，也可以是用户自定义的异常类型。</li>
<li>如果一个方法在运行时抛出异常，一定要在<strong>方法声明</strong>中明确指出（使用<code>Java</code>的<code>throws</code>表达式），并且保证<code>signals</code>子句中给出的异常类型一定等同于<strong>方法声明中给出的异常类型</strong>，或者是<strong>后者的子类型</strong>。</li>
<li><code>signals_only</code>子句：不强调对象状态条件，强调<strong>满足前置条件</strong>时抛出相应的异常。</li>
</ul>
<p>有时，为了更明显地区分异常，会针对输入参数的取值范围抛出不同的异常，从而提醒调用者进行不同的处理。这时可以使用多个<code>exceptional_behavior</code>：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="comment">//@ public model non_null int[] credits;//从规格角度定义规格数据int[] credits</span></span><br><span class="line">     <span class="comment">/*@ normal_behavior //正常功能规格</span></span><br><span class="line"><span class="comment">      @ requires z &gt;=0 &amp;&amp; z &lt;= 100;</span></span><br><span class="line"><span class="comment">      @ assignable \nothing;</span></span><br><span class="line"><span class="comment">      @ ensures \result == credits.length;</span></span><br><span class="line"><span class="comment">      @ also //进行分隔</span></span><br><span class="line"><span class="comment">      @ exceptional_behavior //异常功能规格</span></span><br><span class="line"><span class="comment">      @ requires z &lt; 0;</span></span><br><span class="line"><span class="comment">      @ assignable \nothing;</span></span><br><span class="line"><span class="comment">      @ signals_only IllegalArgumentException;</span></span><br><span class="line"><span class="comment">      @ also</span></span><br><span class="line"><span class="comment">      @ exceptional_behavior //异常功能规格</span></span><br><span class="line"><span class="comment">      @ requires z &gt; 100;</span></span><br><span class="line"><span class="comment">      @ assignable \nothing;</span></span><br><span class="line"><span class="comment">      @ signals_only OverFlowException;</span></span><br><span class="line"><span class="comment">      @*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">recordCredit</span><span class="params">(<span class="type">int</span> z)</span> <span class="keyword">throws</span> IllegalArgumentException,</span><br><span class="line">OverFlowException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<ul>
<li>三个功能的<code>requires</code>子句合在一起覆盖了方法输入参数的所有取值范围，并且没有交叉，这是功能规格设计的基本要求。</li>
<li>两个异常功能规格使用<code>signals_only</code>子句分别抛出相应的异常。</li>
<li>在异常功能规格中，除了抛出异常，也一样可以正常使用<code>ensures</code>子句来描述方法执行的其他结果。</li>
</ul>
<h3 id="四、类型规格"><a href="#四、类型规格" class="headerlink" title="四、类型规格"></a>四、类型规格</h3><p>针对<code>JAVA</code>程序中<strong>定义的数据类型</strong>所设计的限制规则，一般来说是针对<strong>类或接口</strong>设计的<strong>约束规则</strong>。</p>
<p>从面向对象角度来看，类或接口包含<strong>数据成员和方法成员</strong>的声明及（或）实现。不失一般性，一个类型的成员要么是<strong>静态成员</strong>（static member），要么是<strong>实例成员</strong>（instance member）。一个类的静态方法不可以访问这个类的非静态成员变量（即实例变量）。静态成员可以直接<strong>通过类型引用</strong>，而实例成员只能<strong>通过实例化对象来引用</strong>。因此，在设计和表示类型规格时需要加以区分。</p>
<p>JML针对类型规格定义了多种限制规则，课程主要涉及两类：<strong>不变式限制和约束限制</strong>。无论哪一种，类型规格都是针对类型中定义的数据成员所定义的显示规则，一旦违反限制规则，就称相应的状态有错。</p>
<h4 id="1-不变式限制——invariant"><a href="#1-不变式限制——invariant" class="headerlink" title="1. 不变式限制——invariant"></a>1. 不变式限制——invariant</h4><p>要求在所有<strong>可见状态</strong>下都必须满足的特性，语法上定义为<code>invariant P</code>。其中<code>invariant</code>为关键词，<code>P</code>为谓词。</p>
<p>可见状态：特定时刻下对一个对象状态的观察。下面是几个实例：</p>
<ul>
<li>对象的有状态构造方法（用来初始化对象成员变量初值）的执行<strong>结束</strong>时刻</li>
<li>在调用一个对象回收方法（<code>finilize</code>方法）来释放相关资源<strong>开始</strong>的时刻</li>
<li>在调用对象<code>o</code>的非静态、有状态方法（non-helper）的开始和结束时刻</li>
<li>在调用对象<code>o</code>对应的类或父类的静态、有状态方法的开始和结束时刻</li>
<li>在未处于对象<code>o</code>对应类或者父类的静态方法被调用过程中的任意时刻</li>
</ul>
<p>在以上几种时刻对象<code>o</code>的状态都是<strong>可见状态</strong>。</p>
<p>光是看这几个说法很可能一脸懵（我就是），省流版本直接看下面：</p>
<p><strong>凡是会修改成员变量（包括静态成员变量和非静态成员变量）的方法执行期间，对象的状态都是不可见状态（其本质原因是对象的状态修改未完成，此时观察到的状态可能不完整）。</strong></p>
<p>注意：此处的“可见”指的是<strong>完整可见</strong>，而非一般意义上的可以看到！</p>
<p>类型规格强调在任意可见状态下都要满足不变式，见下例：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Path</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="comment">/*@spec_public@*/</span> ArrayList &lt;Integer&gt; seq_nodes;</span><br><span class="line">    <span class="keyword">private</span> <span class="comment">/*@spec_public@*/</span> Integer start_node;</span><br><span class="line">    <span class="keyword">private</span> <span class="comment">/*@spec_public@*/</span> Integer end_node;</span><br><span class="line">    <span class="comment">/*@ invariant seq_nodes != null &amp;&amp;</span></span><br><span class="line"><span class="comment">      @ seq_nodes[0] == start_node &amp;&amp;</span></span><br><span class="line"><span class="comment">      @ seq_nodes[seq_nodes.legnth-1] == end_node &amp;&amp;</span></span><br><span class="line"><span class="comment">      @ seq_nodes.length &gt;=2;</span></span><br><span class="line"><span class="comment">      @*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>上面的例子中，<code>Path</code>类的不变式定义了<code>seq_nodes</code>不能为<code>null</code>，且任何一个<code>Path</code>对象至少包含两个节点，一个起始节点（<code>start_node</code>）和一个终止节点（<code>end_node</code>）。</p>
<p>几个值得注意的点：</p>
<ul>
<li>一个类可以<strong>包括多个不变式</strong>，相互独立。</li>
<li>如果一个对象的可见状态不满足不变式，那么称<strong>该对象的状态有错</strong>。</li>
<li>如果一个类有两个产生逻辑矛盾的不变式（不可能同时为真），则出现了<strong>规格设计缺陷</strong>。</li>
<li>不变式中可以直接引用<code>pure</code>状态方法。</li>
</ul>
<p>由于类成员变量可分为<strong>静态和非静态</strong>，JML也区分两类不变式：<strong>静态不变式和实例不变式</strong>（非静态）。</p>
<ol>
<li>静态不变式：只针对类中的静态成员变量的取值进行约束。</li>
<li>实例不变式：针对静态成员变量和非静态成员变量的取值进行约束。</li>
<li>可以在不变式定义中使用<code>instance invariant</code>或者<code>static invariant</code>表示两种不变式。</li>
</ol>
<h4 id="2-约束限制——constraint"><a href="#2-约束限制——constraint" class="headerlink" title="2. 约束限制——constraint"></a>2. 约束限制——constraint</h4><p>对象的状态发生变化时也需要满足一定的约束，这种约束本质上也是一种不变式（我的理解为动态约束，有别于不变式限制的静态约束）。JML规定：<code>invariant</code>只针对<strong>当下可见状态</strong>的取值进行约束，使用<code>constraint</code>对<strong>前序可见状态和当前可见状态的关系</strong>进行约束。</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServiceCounter</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="comment">/*@spec_public@*/</span> <span class="type">long</span> counter;<span class="comment">//成员变量counter</span></span><br><span class="line">    <span class="comment">//@ invariant counter &gt;= 0;//不变式</span></span><br><span class="line">    <span class="comment">//@ constraint counter == \old(counter)+1;//状态约束限制</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<ul>
<li>本例中，状态约束限制每一次修改<code>counter</code>的值只能加1。</li>
<li>加入状态约束限制可以保证所有可能修改<code>counter</code>的方法都满足该“后置条件”，大大简便了书写。</li>
</ul>
<p>此外，<code>invariant</code>和<code>constraint</code>还可以直接被子类继承获得。</p>
<p>和<code>invariant</code>类似，根据类的静态成员变量，可以将约束限制分为两种，详见手册。</p>
<h4 id="3-方法与类型规格的关系"><a href="#3-方法与类型规格的关系" class="headerlink" title="3. 方法与类型规格的关系"></a>3. 方法与类型规格的关系</h4><p>这块和我们的要求关系不大，故略去。</p>

            </div>

            
                <div class="post-copyright-info">
                    <div class="article-copyright-info-container">
    <ul>
        <li><strong>Title:</strong> JML-note</li>
        <li><strong>Author:</strong> Charles</li>
        <li><strong>Created at:</strong> 2023-04-21 07:34:38</li>
        
            <li>
                <strong>Updated at:</strong> 2023-07-21 13:44:04
            </li>
        
        <li>
            <strong>Link:</strong> https://charles2530.github.io/2023/04/21/jml-note/
        </li>
        <li>
            <strong>License:</strong> This work is licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a>.
        </li>
    </ul>
</div>

                </div>
            

            
                <ul class="post-tags-box">
                    
                        <li class="tag-item">
                            <a href="/tags/OO/">#OO</a>&nbsp;
                        </li>
                    
                        <li class="tag-item">
                            <a href="/tags/Java/">#Java</a>&nbsp;
                        </li>
                    
                </ul>
            

            
  <div class="recommended-article">
   <div class="recommended-desktop">
    <div class="recommended-article-header">
     <i aria-hidden="true"></i><span>recommend_articles</span>
    </div>
    <div class="recommended-article-group"><a class="recommended-article-item" href="/2022/12/26/p7-design-documents/" title="P7 Design documents" rel="bookmark">
  <img src="https://charles2530.github.io/image/background/p1.jpg" alt="P7 Design documents">
  <span class="title">P7 Design documents</span>
</a><a class="recommended-article-item" href="/2023/07/17/swift-note-4/" title="Swift-note-4" rel="bookmark">
  <img src="https://charles2530.github.io/image/background/p1.jpg" alt="Swift-note-4">
  <span class="title">Swift-note-4</span>
</a><a class="recommended-article-item" href="/2023/02/02/javascript-note-6/" title="JavaScript_note_6" rel="bookmark">
  <img src="https://charles2530.github.io/image/background/p5.jfif" alt="JavaScript_note_6">
  <span class="title">JavaScript_note_6</span>
</a></div>
   </div>
   <div class="recommended-mobile">
   <div class="recommended-article-header">
     <i aria-hidden="true"></i><span>recommend_articles</span>
   </div>
   <div class="recommended-article-group"><a class="recommended-article-item" href="/2022/12/26/p7-design-documents/" title="P7 Design documents" rel="bookmark">
  <img src="https://charles2530.github.io/image/background/p1.jpg" alt="P7 Design documents">
  <span class="title">P7 Design documents</span>
</a><a class="recommended-article-item" href="/2023/07/17/swift-note-4/" title="Swift-note-4" rel="bookmark">
  <img src="https://charles2530.github.io/image/background/p1.jpg" alt="Swift-note-4">
  <span class="title">Swift-note-4</span>
</a></div>
   </div>
  </div>

            
                <div class="article-nav">
                    
                        <div class="article-prev">
                            <a class="prev"
                            rel="prev"
                            href="/2023/04/22/oo-hw9-test/"
                            >
                                <span class="left arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-left"></i>
                                </span>
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">OO_hw9_test</span>
                                    <span class="post-nav-item">Prev posts</span>
                                </span>
                            </a>
                        </div>
                    
                    
                        <div class="article-next">
                            <a class="next"
                            rel="next"
                            href="/2023/04/12/lab4-report/"
                            >
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">lab4_report</span>
                                    <span class="post-nav-item">Next posts</span>
                                </span>
                                <span class="right arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-right"></i>
                                </span>
                            </a>
                        </div>
                    
                </div>
            


            
                <div class="comment-container">
                    <div class="comments-container">
  <div id="comment-anchor"></div>
  <div class="comment-area-title">
    <i class="fa-solid fa-comments"></i>&nbsp;Comments
  </div>
  

  <!-- 
            
    <div id="gitalk-container"></div>
    <script data-pjax
            src="//cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js"></script>
    <script data-pjax>

        function loadGitalk() {
            let __gitalk__pathname = decodeURI(location.pathname);
            const __gitalk__pathnameLength = __gitalk__pathname.length;
            const __gitalk__pathnameMaxLength = 50;
            if (__gitalk__pathnameLength > __gitalk__pathnameMaxLength) {
                __gitalk__pathname = __gitalk__pathname.substring(0, __gitalk__pathnameMaxLength - 3) + '...';
            }

            try {
                Gitalk && new Gitalk({
                    clientID: '8083299a8ee2aaf23879',
                    clientSecret: 'a8161e81d4872181e884fdb69f7be24916b6a9d0',
                    repo: 'charles2530_issues',
                    owner: 'Charles2530',
                    admin: ['Charles2530'],
                    id: __gitalk__pathname,
                    language: 'en'
                }).render('gitalk-container');

            } catch (e) {
                window.Gitalk = null;
            }
        }

        if ('true') {
            const loadGitalkTimeout = setTimeout(() => {
                loadGitalk();
                clearTimeout(loadGitalkTimeout);
            }, 1000);
        } else {
            window.addEventListener('DOMContentLoaded', loadGitalk);
        }
    </script>



         -->
  <script src="https://utteranc.es/client.js" repo="Charles2530/Charles2530.github.io" issue-term="pathname"
    label="Comment" theme="preferred-color-scheme" crossorigin="anonymous" async>
  </script>
  
</div>

                </div>
            
        </div>

        
            <div class="toc-content-container">
                <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">On this page</div>
        <div class="page-title">JML-note</div>
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2"><span class="nav-text">写在前面</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E6%B3%A8%E9%87%8A%E5%92%8C%E5%9F%BA%E6%9C%AC%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-text">一、注释和基本关键字</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E4%B8%A4%E7%A7%8D%E6%B3%A8%E9%87%8A%E6%A0%BC%E5%BC%8F"><span class="nav-text">1. 两种注释格式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E4%B8%80%E4%BA%9B%E5%85%B6%E4%BB%96%E7%9A%84%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-text">2. 一些其他的关键字</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E8%A7%84%E6%A0%BC%E5%8F%98%E9%87%8F"><span class="nav-text">3. 规格变量</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8C%E3%80%81JML%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">二、JML表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%8E%9F%E5%AD%90%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">1. 原子表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%91%A0-result"><span class="nav-text">①\result</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%91%A1-old-expr"><span class="nav-text">②\old(expr)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%91%A2-not-assigned-x-y-%E2%80%A6"><span class="nav-text">③\not_assigned(x, y, …)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%91%A3-not-modified-x-y-%E2%80%A6"><span class="nav-text">④\not_modified(x, y, …)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%91%A4-nonnullelements-container"><span class="nav-text">⑤\nonnullelements(container)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%91%A5-type-type"><span class="nav-text">⑥\type(type)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%91%A6-typeof-expr"><span class="nav-text">⑦\typeof(expr)</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E9%87%8F%E5%8C%96%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">2. 量化表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%91%A0-forall"><span class="nav-text">①\forall</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%91%A1-exists"><span class="nav-text">②\exists</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%91%A2-sum"><span class="nav-text">③\sum</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%91%A3-product"><span class="nav-text">④\product</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%91%A4-max"><span class="nav-text">⑤\max</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%91%A5-min"><span class="nav-text">⑥\min</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%91%A6-num-of"><span class="nav-text">⑦\num_of()</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E9%9B%86%E5%90%88%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">3. 集合表达式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-text">4. 操作符</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%91%A0%E5%AD%90%E7%B1%BB%E5%9E%8B%E5%85%B3%E7%B3%BB%E6%93%8D%E4%BD%9C%E7%AC%A6%E2%80%94%E2%80%94-lt"><span class="nav-text">①子类型关系操作符——&lt;:</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%91%A1%E7%AD%89%E4%BB%B7%E5%85%B3%E7%B3%BB%E6%93%8D%E4%BD%9C%E7%AC%A6%E2%80%94%E2%80%94-lt-gt-%E5%92%8C-lt-gt"><span class="nav-text">②等价关系操作符——&lt;&#x3D;&#x3D;&gt;和&lt;&#x3D;!&#x3D;&gt;</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%91%A2%E6%8E%A8%E7%90%86%E6%93%8D%E4%BD%9C%E7%AC%A6%E2%80%94%E2%80%94-gt-%E5%92%8C-lt"><span class="nav-text">③推理操作符——&#x3D;&#x3D;&gt;和&lt;&#x3D;&#x3D;</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%91%A3%E5%8F%98%E9%87%8F%E5%BC%95%E7%94%A8%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-text">④变量引用操作符</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E6%96%B9%E6%B3%95%E8%A7%84%E6%A0%BC"><span class="nav-text">三、方法规格</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%89%8D%E7%BD%AE%E6%9D%A1%E4%BB%B6"><span class="nav-text">1. 前置条件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E5%90%8E%E7%BD%AE%E6%9D%A1%E4%BB%B6"><span class="nav-text">2. 后置条件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E5%89%AF%E4%BD%9C%E7%94%A8%E7%BA%A6%E5%AE%9A"><span class="nav-text">3. 副作用约定</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%91%A0%E5%8F%98%E9%87%8F%E5%8F%AF%E5%90%A6%E8%A2%AB%E4%BF%AE%E6%94%B9"><span class="nav-text">①变量可否被修改</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%91%A1%E7%BA%AF%E7%B2%B9%E8%AE%BF%E9%97%AE%E6%80%A7"><span class="nav-text">②纯粹访问性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%91%A2%E6%96%B9%E6%B3%95%E6%AD%A3%E5%B8%B8%E5%8A%9F%E8%83%BD%E5%92%8C%E5%BC%82%E5%B8%B8%E8%A1%8C%E4%B8%BA%E7%9A%84%E5%8C%BA%E5%88%86"><span class="nav-text">③方法正常功能和异常行为的区分</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-signals%E5%AD%90%E5%8F%A5"><span class="nav-text">4. signals子句</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E7%B1%BB%E5%9E%8B%E8%A7%84%E6%A0%BC"><span class="nav-text">四、类型规格</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E4%B8%8D%E5%8F%98%E5%BC%8F%E9%99%90%E5%88%B6%E2%80%94%E2%80%94invariant"><span class="nav-text">1. 不变式限制——invariant</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E7%BA%A6%E6%9D%9F%E9%99%90%E5%88%B6%E2%80%94%E2%80%94constraint"><span class="nav-text">2. 约束限制——constraint</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E6%96%B9%E6%B3%95%E4%B8%8E%E7%B1%BB%E5%9E%8B%E8%A7%84%E6%A0%BC%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="nav-text">3. 方法与类型规格的关系</span></a></li></ol></li></ol></li></ol>

    </div>
</div>
            </div>
        
    </div>
</div>


                

            </div>
            
            

        </div>

        <div class="main-content-footer">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info">
            &copy;
            
              <span>2022</span>
              -
            
            2023&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">Charles</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv" class="busuanzi_container_site_uv">
                        Visitor Count&nbsp;<span id="busuanzi_value_site_uv" class="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="busuanzi_container_site_pv">
                        Total Page Views&nbsp;<span id="busuanzi_value_site_pv" class="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            <span class="powered-by-container">Powered by Charles</span>
                <br>
            <span class="theme-version-container">Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.2.0</a>
        </div>
        
        
        
            <div>
                Blog up for <span class="odometer" id="runtime_days" ></span> days <span class="odometer" id="runtime_hours"></span> hrs <span class="odometer" id="runtime_minutes"></span> Min <span class="odometer" id="runtime_seconds"></span> Sec
            </div>
        
        
        
            <script async data-pjax>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fa-regular fa-comments"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-expand-width flex-center">
            <i class="fa-regular fa-expand"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        
            <li class="right-bottom-tools rss flex-center">
                <a class="flex-center"
                   href="/atom.xml"
                   target="_blank"
                >
                <i class="fa-regular fa-rss"></i>
                </a>
            </li>
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fa-solid fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fa-solid fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    


</main>



  <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/utils.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/main.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/layouts/navbarShrink.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/tools/scrollTopBottom.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/tools/lightDarkSwitch.js"></script>


    <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/tools/localSearch.js"></script>



    <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/tools/codeBlock.js"></script>



    <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/layouts/lazyload.js"></script>



    <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/tools/runtime.js"></script>
    <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/libs/odometer.min.js"></script>
    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/assets/odometer-theme-minimal.css">



  <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/libs/Typed.min.js"></script>
  <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/plugins/typed.js"></script>



    <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/libs/mermaid.min.js"></script>
    <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/plugins/mermaid.js"></script>



    <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/libs/minimasonry.min.js"></script>
    <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/plugins/masonry.js"></script>


<div class="post-scripts pjax">
    
        <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/tools/tocToggle.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/libs/anime.min.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/layouts/toc.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/plugins/tabs.js"></script>
    
</div>


    <script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.0/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax',
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            Global.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            Global.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            Global.refresh();
        });
    });
</script>



  
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</body>

</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/love.js"></script>
