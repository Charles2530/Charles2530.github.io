{"version":3,"file":"index.umd.js","sources":["../node_modules/@swup/plugin/dist/index.modern.js","../node_modules/swup/dist/Swup.modern.js","../node_modules/scrl/dist/index.modern.js","../src/index.js"],"sourcesContent":["const r=r=>String(r).split(\".\").concat([\"0\",\"0\"]).slice(0,3).join(\".\");class n{constructor(){this.isSwupPlugin=!0,this.requires={},this.swup=void 0,this.version=void 0}mount(){}unmount(){}_beforeMount(){if(!this.name)throw new Error(\"You must define a name of plugin when creating a class.\")}_afterUnmount(){}_checkRequirements(){return\"object\"!=typeof this.requires||Object.entries(this.requires).forEach(([n,e])=>{if(!function(n,e,t){const i=function(r,n){var e;if(\"swup\"===r)return null!=(e=n.version)?e:\"\";{var t;const e=n.findPlugin(r);return null!=(t=null==e?void 0:e.version)?t:\"\"}}(n,t);return!!i&&((n,e)=>e.every(e=>{const[,t,i]=e.match(/^([\\D]+)?(.*)$/)||[];var s,o;return((r,n)=>{const e={\"\":r=>0===r,\">\":r=>r>0,\">=\":r=>r>=0,\"<\":r=>r<0,\"<=\":r=>r<=0};return(e[n]||e[\"\"])(r)})((o=i,s=r(s=n),o=r(o),s.localeCompare(o,void 0,{numeric:!0})),t||\">=\")}))(i,e)}(n,e=Array.isArray(e)?e:[e],this.swup)){const r=`${n} ${e.join(\", \")}`;throw new Error(`Plugin version mismatch: ${this.name} requires ${r}`)}}),!0}}export{n as default};\n//# sourceMappingURL=index.modern.js.map\n","import t from\"delegate-it\";function e(){return e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},e.apply(this,arguments)}const n=(t,e)=>String(t).toLowerCase().replace(/[\\s/_.]+/g,\"-\").replace(/[^\\w-]+/g,\"\").replace(/--+/g,\"-\").replace(/^-+|-+$/g,\"\")||e||\"\",i=({hash:t}={})=>location.pathname+location.search+(t?location.hash:\"\"),s=(t,n={})=>{const s=e({url:t=t||i({hash:!0}),random:Math.random(),source:\"swup\"},n);history.pushState(s,\"\",t)},o=(t=null,n={})=>{t=t||i({hash:!0});const s=e({},history.state,{url:t,random:Math.random(),source:\"swup\"},n);history.replaceState(s,\"\",t)},r=[\"base\"],a=(e,n,i,s={})=>{let{base:o=document}=s,a=function(t,e){if(null==t)return{};var n,i,s={},o=Object.keys(t);for(i=0;i<o.length;i++)e.indexOf(n=o[i])>=0||(s[n]=t[n]);return s}(s,r);const l=t(o,e,n,i,a);return{destroy:()=>l.destroy()}},l=(t,e=document)=>e.querySelector(t),u=(t,e=document)=>Array.from(e.querySelectorAll(t)),h=t=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{t()})})},c=t=>window.CSS&&window.CSS.escape?CSS.escape(t):t,d=t=>1e3*Number(t.slice(0,-1).replace(\",\",\".\")),p=(t,e)=>{var n,i;let s=document.createElement(\"html\");s.innerHTML=t;let o=[];e.forEach(t=>{if(null==l(t,s))return console.warn(`[swup] Container ${t} not found on page.`),null;u(t).length!==u(t,s).length&&console.warn(\"[swup] Mismatched number of containers found on new page.\"),u(t).forEach((e,n)=>{u(t,s)[n].setAttribute(\"data-swup\",String(o.length)),o.push(u(t,s)[n].outerHTML)})});const r=(null==(n=l(\"title\",s))?void 0:n.innerText)||\"\",a=null==(i=l(\"body\",s))?void 0:i.className;return s.innerHTML=\"\",s=null,{title:r,pageClass:a,blocks:o,originalContent:t}},g=(t,n)=>{const i={url:window.location.pathname+window.location.search,method:\"GET\",data:null,headers:{}},{url:s,method:o,headers:r,data:a}=e({},i,t),l=new XMLHttpRequest;return l.onreadystatechange=function(){4===l.readyState&&n(l)},l.open(o,s,!0),Object.entries(r).forEach(([t,e])=>{l.setRequestHeader(t,e)}),l.send(a),l};class m extends URL{constructor(t,e=document.baseURI){super(t.toString(),e)}get url(){return this.pathname+this.search}static fromElement(t){const e=t.getAttribute(\"href\")||t.getAttribute(\"xlink:href\");return new m(e)}static fromUrl(t){return new m(t)}}const f=(t,e)=>{let n=0;e.forEach(e=>{null==l(e,t)?console.warn(`[swup] Container ${e} not found on page.`):u(e).forEach((i,s)=>{u(e,t)[s].setAttribute(\"data-swup\",String(n)),n++})})},v=t=>/^to-/.test(t)||[\"is-changing\",\"is-rendering\",\"is-popstate\"].includes(t),w=()=>{const t=document.documentElement.className.split(\" \").filter(v);document.documentElement.classList.remove(...t)};class E{constructor(t){this.pages={},this.last=null,this.swup=void 0,this.swup=t}getCacheUrl(t){return this.swup.resolveUrl(m.fromUrl(t).url)}cacheUrl(t){t.url=this.getCacheUrl(t.url),t.url in this.pages==0&&(this.pages[t.url]=t),t.responseURL=this.getCacheUrl(t.responseURL),this.last=this.pages[t.url],this.swup.log(`Cache (${Object.keys(this.pages).length})`,this.pages)}getPage(t){return t=this.getCacheUrl(t),this.pages[t]}getCurrentPage(){return this.getPage(i())}exists(t){return(t=this.getCacheUrl(t))in this.pages}empty(){this.pages={},this.last=null,this.swup.log(\"Cache cleared\")}remove(t){delete this.pages[this.getCacheUrl(t)]}}const P=function({event:t,skipTransition:e}={}){if(e)return this.triggerEvent(\"transitionEnd\",t),this.cleanupAnimationClasses(),[Promise.resolve()];h(()=>{this.triggerEvent(\"animationInStart\"),document.documentElement.classList.remove(\"is-animating\")});const n=this.getAnimationPromises(\"in\");return Promise.all(n).then(()=>{this.triggerEvent(\"animationInDone\"),this.triggerEvent(\"transitionEnd\",t),this.cleanupAnimationClasses()}),n},S=t=>t?(\"#\"===t.charAt(0)&&(t=t.substring(1)),t=decodeURIComponent(t),t=c(t),l(`#${t}`)||l(`a[name='${t}']`)):null;let b=\"transition\",k=\"transitionend\",U=\"animation\",y=\"animationend\";function L(t){const e=this.options.animationSelector;if(!1===e)return[Promise.resolve()];const n=u(e,document.body);return n.length?n.map(t=>function(t,e,n=null){const{type:i,timeout:s,propCount:o}=function(t,e=null){const n=window.getComputedStyle(t),i=`${b}Duration`,s=`${U}Delay`,o=`${U}Duration`,r=n[`${b}Delay`].split(\", \"),a=(n[i]||\"\").split(\", \"),l=C(r,a),u=(n[s]||\"\").split(\", \"),h=(n[o]||\"\").split(\", \"),c=C(u,h);let d=\"\",p=0,g=0;return\"transition\"===e?l>0&&(d=\"transition\",p=l,g=a.length):\"animation\"===e?c>0&&(d=\"animation\",p=c,g=h.length):(p=Math.max(l,c),d=p>0?l>c?\"transition\":\"animation\":null,g=d?\"transition\"===d?a.length:h.length:0),{type:d,timeout:p,propCount:g}}(t,n);return i&&s?new Promise(e=>{const n=\"transition\"===i?k:y,r=performance.now();let a=0;const l=()=>{t.removeEventListener(n,u),e()},u=e=>{if(e.target===t){if(!(t=>!!t.elapsedTime)(e))throw new Error(\"Not a transition or animation event.\");(performance.now()-r)/1e3<e.elapsedTime||++a>=o&&l()}};setTimeout(()=>{a<o&&l()},s+1),t.addEventListener(n,u)}):(console.warn(`[swup] No CSS transition duration defined for element of selector ${e}`),Promise.resolve())}(t,e)):(console.warn(`[swup] No animated elements found by selector ${e}`),[Promise.resolve()])}function C(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((e,n)=>d(e)+d(t[n])))}void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(b=\"WebkitTransition\",k=\"webkitTransitionEnd\"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(U=\"WebkitAnimation\",y=\"webkitAnimationEnd\");const T=function(t){const n=p(t.responseText,this.options.containers);return n?e({},n,{responseURL:t.responseURL||window.location.href}):(console.warn(\"[swup] Received page is invalid.\"),null)};function H(t){const n=this.options.requestHeaders,{url:i}=t;return this.cache.exists(i)?(this.triggerEvent(\"pageRetrievedFromCache\"),Promise.resolve(this.cache.getPage(i))):new Promise((s,o)=>{g(e({},t,{headers:n}),t=>{if(500===t.status)return this.triggerEvent(\"serverError\"),void o(i);const n=this.getPageData(t);if(!n||!n.blocks.length)return void o(i);const r=e({},n,{url:i});this.cache.cacheUrl(r),this.triggerEvent(\"pageLoaded\"),s(r)})})}const R=function({event:t,skipTransition:e}={}){const n=t instanceof PopStateEvent;if(e)return this.triggerEvent(\"animationSkipped\"),[Promise.resolve()];this.triggerEvent(\"animationOutStart\"),document.documentElement.classList.add(\"is-changing\",\"is-leaving\",\"is-animating\"),n&&document.documentElement.classList.add(\"is-popstate\");const i=this.getAnimationPromises(\"out\");return Promise.all(i).then(()=>{this.triggerEvent(\"animationOutDone\")}),i};function A(t){const{url:e}=t;this.shouldIgnoreVisit(e)?window.location.href=e:this.performPageLoad(t)}function $(t){const{url:e,event:o,customTransition:r}=null!=t?t:{},a=o instanceof PopStateEvent,l=this.shouldSkipTransition({url:e,event:o});this.triggerEvent(\"transitionStart\",o),this.updateTransition(i(),e,r),null!=r&&document.documentElement.classList.add(`to-${n(r)}`);const u=this.leavePage({event:o,skipTransition:l});a||s(e+(this.scrollToElement||\"\")),this.currentPageUrl=i();const h=this.fetchPage(t);Promise.all([h,...u]).then(([t])=>{this.renderPage(t,{event:o,skipTransition:l})}).catch(t=>{void 0!==t&&(this.options.skipPopStateHandling=()=>(window.location=t,!0),history.go(-1))})}const _=function({blocks:t,title:e}){return t.forEach((t,e)=>{document.body.querySelector(`[data-swup=\"${e}\"]`).outerHTML=t}),document.title=e,Promise.resolve()};function O(t,e){this._handlers[t]?this._handlers[t].push(e):console.warn(`Unsupported event ${t}.`)}function x(t,e){t&&e?this._handlers[t].includes(e)?this._handlers[t]=this._handlers[t].filter(t=>t!==e):console.warn(`Handler for event '${t}' not found.`):t?this._handlers[t]=[]:Object.keys(this._handlers).forEach(t=>{this._handlers[t]=[]})}function q(t,e){this._handlers[t].forEach(t=>{try{t(e)}catch(t){console.error(t)}});const n=new CustomEvent(`swup:${t}`,{detail:t});document.dispatchEvent(n)}const D=function(t){var e;if(null==(e=t)?void 0:e.isSwupPlugin){if(t.swup=this,!t._checkRequirements||t._checkRequirements())return t._beforeMount&&t._beforeMount(),t.mount(),this.plugins.push(t),this.plugins}else console.error(\"Not a swup plugin instance\",t)};function I(t){const e=this.findPlugin(t);if(e)return e.unmount(),e._afterUnmount&&e._afterUnmount(),this.plugins=this.plugins.filter(t=>t!==e),this.plugins;console.error(\"No such plugin\",e)}function M(t){return this.plugins.find(e=>e===t||e.name===t)}const N=function(t,{event:n,skipTransition:s}={}){if(document.documentElement.classList.remove(\"is-leaving\"),!this.isSameResolvedUrl(i(),t.url))return;const{url:r}=m.fromUrl(t.responseURL);this.isSameResolvedUrl(i(),r)||(this.cache.cacheUrl(e({},t,{url:r})),this.currentPageUrl=i(),o(r)),s||document.documentElement.classList.add(\"is-rendering\"),this.triggerEvent(\"willReplaceContent\",n),this.replaceContent(t).then(()=>{this.triggerEvent(\"contentReplaced\",n),this.triggerEvent(\"pageView\",n),this.options.cache||this.cache.empty(),this.enterPage({event:n,skipTransition:s}),this.scrollToElement=null})};function W(t,e,n){this.transition={from:t,to:e,custom:n}}function V({event:t}){return!(!(t instanceof PopStateEvent)||this.options.animateHistoryBrowsing)}class j{constructor(t={}){this.version=\"3.0.3\",this._handlers={animationInDone:[],animationInStart:[],animationOutDone:[],animationOutStart:[],animationSkipped:[],clickLink:[],contentReplaced:[],disabled:[],enabled:[],openPageInNewTab:[],pageLoaded:[],pageRetrievedFromCache:[],pageView:[],popState:[],samePage:[],samePageWithHash:[],serverError:[],transitionStart:[],transitionEnd:[],willReplaceContent:[]},this.scrollToElement=null,this.options=void 0,this.plugins=[],this.transition={},this.cache=void 0,this.currentPageUrl=i(),this.delegatedListeners={},this.boundPopStateHandler=void 0,this.loadPage=A,this.performPageLoad=$,this.leavePage=R,this.renderPage=N,this.replaceContent=_,this.enterPage=P,this.triggerEvent=q,this.delegateEvent=a,this.on=O,this.off=x,this.updateTransition=W,this.shouldSkipTransition=V,this.getAnimationPromises=L,this.getPageData=T,this.fetchPage=H,this.getAnchorElement=S,this.log=()=>{},this.use=D,this.unuse=I,this.findPlugin=M,this.getCurrentUrl=i,this.cleanupAnimationClasses=w,this.defaults={animateHistoryBrowsing:!1,animationSelector:'[class*=\"transition-\"]',cache:!0,containers:[\"#swup\"],ignoreVisit:(t,{el:e}={})=>!(null==e||!e.closest(\"[data-no-swup]\")),linkSelector:\"a[href]\",plugins:[],resolveUrl:t=>t,requestHeaders:{\"X-Requested-With\":\"swup\",Accept:\"text/html, application/xhtml+xml\"},skipPopStateHandling:t=>{var e;return\"swup\"!==(null==(e=t.state)?void 0:e.source)}},this.options=e({},this.defaults,t),this.boundPopStateHandler=this.popStateHandler.bind(this),this.cache=new E(this),this.enable()}enable(){\"undefined\"!=typeof Promise?(this.delegatedListeners.click=a(this.options.linkSelector,\"click\",this.linkClickHandler.bind(this)),window.addEventListener(\"popstate\",this.boundPopStateHandler),f(document.documentElement,this.options.containers),this.options.plugins.forEach(t=>this.use(t)),o(),this.triggerEvent(\"enabled\"),document.documentElement.classList.add(\"swup-enabled\"),this.triggerEvent(\"pageView\")):console.warn(\"Promise is not supported\")}destroy(){this.delegatedListeners.click.destroy(),window.removeEventListener(\"popstate\",this.boundPopStateHandler),this.cache.empty(),this.options.plugins.forEach(t=>{this.unuse(t)}),u(\"[data-swup]\").forEach(t=>{t.removeAttribute(\"data-swup\")}),this.off(),this.triggerEvent(\"disabled\"),document.documentElement.classList.remove(\"swup-enabled\")}shouldIgnoreVisit(t,{el:e}={}){const{origin:n,url:i,hash:s}=m.fromUrl(t);return n!==window.location.origin||!(!e||!this.triggerWillOpenNewWindow(e))||!!this.options.ignoreVisit(i+s,{el:e})}linkClickHandler(t){const e=t.delegateTarget,{href:n,url:s,hash:o}=m.fromElement(e);if(this.shouldIgnoreVisit(n,{el:e}))return;if(t.metaKey||t.ctrlKey||t.shiftKey||t.altKey)return void this.triggerEvent(\"openPageInNewTab\",t);if(0!==t.button)return;if(this.triggerEvent(\"clickLink\",t),t.preventDefault(),!s||s===i())return void this.handleLinkToSamePage(s,o,t);if(this.isSameResolvedUrl(s,i()))return;this.scrollToElement=o||null;const r=e.getAttribute(\"data-swup-transition\")||void 0;this.performPageLoad({url:s,customTransition:r})}handleLinkToSamePage(t,e,n){if(e){if(this.triggerEvent(\"samePageWithHash\",n),!S(e))return console.warn(`Element for offset not found (#${e})`);o(t+e)}else this.triggerEvent(\"samePage\",n)}triggerWillOpenNewWindow(t){return!!t.matches('[download], [target=\"_blank\"]')}popStateHandler(t){var e,n;if(this.options.skipPopStateHandling(t))return;if(this.isSameResolvedUrl(i(),this.currentPageUrl))return;const s=null!=(e=null==(n=t.state)?void 0:n.url)?e:location.href;if(this.shouldIgnoreVisit(s))return;const{url:o,hash:r}=m.fromUrl(s);r?this.scrollToElement=r:t.preventDefault(),this.triggerEvent(\"popState\",t),this.options.animateHistoryBrowsing||(document.documentElement.classList.remove(\"is-animating\"),w()),this.performPageLoad({url:o,event:t})}resolveUrl(t){if(\"function\"!=typeof this.options.resolveUrl)return console.warn(\"[swup] options.resolveUrl expects a callback function.\"),t;const e=this.options.resolveUrl(t);return e&&\"string\"==typeof e?e.startsWith(\"//\")||e.startsWith(\"http\")?(console.warn(\"[swup] options.resolveUrl needs to return a relative url\"),t):e:(console.warn(\"[swup] options.resolveUrl needs to return a url\"),t)}isSameResolvedUrl(t,e){return this.resolveUrl(t)===this.resolveUrl(e)}}export{m as Location,n as classify,w as cleanupAnimationClasses,s as createHistoryRecord,j as default,a as delegateEvent,c as escapeCssIdentifier,g as fetch,i as getCurrentUrl,p as getDataFromHtml,f as markSwupElements,h as nextTick,l as query,u as queryAll,d as toMs,o as updateHistoryRecord};\n//# sourceMappingURL=Swup.modern.js.map\n","function t(){return t=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s])}return t},t.apply(this,arguments)}class i{constructor(i){this._raf=null,this._positionY=0,this._velocityY=0,this._targetPositionY=0,this._targetPositionYWithOffset=0,this._direction=0,this.scrollTo=t=>{if(t&&t.nodeType)this._targetPositionY=Math.round(t.getBoundingClientRect().top+window.pageYOffset);else{if(parseInt(this._targetPositionY)!==this._targetPositionY)return void console.error(\"Argument must be a number or an element.\");this._targetPositionY=Math.round(t)}this._targetPositionY>document.documentElement.scrollHeight-window.innerHeight&&(this._targetPositionY=document.documentElement.scrollHeight-window.innerHeight),this._positionY=document.body.scrollTop||document.documentElement.scrollTop,this._direction=this._positionY>this._targetPositionY?-1:1,this._targetPositionYWithOffset=this._targetPositionY+this._direction,this._velocityY=0,this._positionY!==this._targetPositionY?(this.options.onStart(),this._animate()):this.options.onAlreadyAtPositions()},this._animate=()=>{this._update(),this._render(),1===this._direction&&this._targetPositionY>this._positionY||-1===this._direction&&this._targetPositionY<this._positionY?(this._raf=requestAnimationFrame(this._animate),this.options.onTick()):(this._positionY=this._targetPositionY,this._render(),this._raf=null,this.options.onTick(),this.options.onEnd())},this._update=()=>{const t=this._targetPositionYWithOffset-this._positionY;return this._velocityY+=t*this.options.acceleration,this._velocityY*=this.options.friction,this._positionY+=this._velocityY,Math.abs(t)},this._render=()=>{window.scrollTo(0,this._positionY)},this.options=t({},{onAlreadyAtPositions:()=>{},onCancel:()=>{},onEnd:()=>{},onStart:()=>{},onTick:()=>{},friction:.7,acceleration:.04},i),i&&i.friction&&(this.options.friction=1-i.friction),window.addEventListener(\"mousewheel\",t=>{this._raf&&(this.options.onCancel(),cancelAnimationFrame(this._raf),this._raf=null)},{passive:!0})}}export{i as default};\n//# sourceMappingURL=index.modern.js.map\n","import Plugin from '@swup/plugin';\nimport { getCurrentUrl, Location, queryAll } from 'swup';\nimport Scrl from 'scrl';\n\n/**\n * Class representing a Scroll Plugin.\n * @extends Plugin\n */\nexport default class ScrollPlugin extends Plugin {\n\tname = 'ScrollPlugin';\n\n\t/**\n\t * Constructor\n\t * @param {object|undefined} options the plugin options\n\t */\n\tconstructor(options = {}) {\n\t\tsuper();\n\t\tconst defaultOptions = {\n\t\t\tdoScrollingRightAway: false,\n\t\t\tanimateScroll: {\n\t\t\t\tbetweenPages: true,\n\t\t\t\tsamePageWithHash: true,\n\t\t\t\tsamePage: true\n\t\t\t},\n\t\t\tscrollFriction: 0.3,\n\t\t\tscrollAcceleration: 0.04,\n\t\t\tgetAnchorElement: null,\n\t\t\toffset: 0,\n\t\t\tscrollContainers: `[data-swup-scroll-container]`,\n\t\t\tshouldResetScrollPosition: (htmlAnchorElement) => true\n\t\t};\n\n\t\tthis.options = {\n\t\t\t...defaultOptions,\n\t\t\t...options\n\t\t};\n\t}\n\n\t/**\n\t * Runs if the plugin is mounted\n\t */\n\tmount() {\n\t\tconst swup = this.swup;\n\n\t\t// add empty handlers array for scroll events\n\t\tswup._handlers.scrollDone = [];\n\t\tswup._handlers.scrollStart = [];\n\n\t\t// Initialize Scrl for smooth animations\n\t\tthis.scrl = new Scrl({\n\t\t\tonStart: () => swup.triggerEvent('scrollStart'),\n\t\t\tonEnd: () => swup.triggerEvent('scrollDone'),\n\t\t\tonCancel: () => swup.triggerEvent('scrollDone'),\n\t\t\tfriction: this.options.scrollFriction,\n\t\t\tacceleration: this.options.scrollAcceleration\n\t\t});\n\n\t\t// set scrollTo method of swup and animate based on current animateScroll option\n\t\tswup.scrollTo = (offset, animate = true) => {\n\t\t\tif (animate) {\n\t\t\t\tthis.scrl.scrollTo(offset);\n\t\t\t} else {\n\t\t\t\tswup.triggerEvent('scrollStart');\n\t\t\t\twindow.scrollTo(0, offset);\n\t\t\t\tswup.triggerEvent('scrollDone');\n\t\t\t}\n\t\t};\n\n\t\t// This object will hold all scroll positions\n\t\tthis.scrollPositionsStore = {};\n\t\t// this URL helps with storing the current scroll positions on `willReplaceContent`\n\t\tthis.currentCacheKey = this.getCurrentCacheKey();\n\n\t\t// disable browser scroll control on popstates when\n\t\t// animateHistoryBrowsing option is enabled in swup.\n\t\t// Cache the previous setting to be able to properly restore it on unmount\n\t\tthis.previousScrollRestoration = window.history.scrollRestoration;\n\t\tif (swup.options.animateHistoryBrowsing) {\n\t\t\twindow.history.scrollRestoration = 'manual';\n\t\t}\n\n\t\t// scroll to the top of the page\n\t\tswup.on('samePage', this.onSamePage);\n\n\t\t// scroll to referenced element on the same page\n\t\tswup.on('samePageWithHash', this.onSamePageWithHash);\n\n\t\t// scroll to the referenced element\n\t\tswup.on('transitionStart', this.onTransitionStart);\n\n\t\t// scroll to the referenced element when it's in the page (after render)\n\t\tswup.on('contentReplaced', this.onContentReplaced);\n\n\t\tswup.on('willReplaceContent', this.onWillReplaceContent);\n\t\tswup.on('clickLink', this.onClickLink);\n\t}\n\n\t/**\n\t * Runs when the plugin is unmounted\n\t */\n\tunmount() {\n\t\tconst swup = this.swup;\n\t\tswup.scrollTo = null;\n\n\t\tdelete this.scrl;\n\t\tthis.scrl = null;\n\n\t\tswup.off('samePage', this.onSamePage);\n\t\tswup.off('samePageWithHash', this.onSamePageWithHash);\n\t\tswup.off('transitionStart', this.onTransitionStart);\n\t\tswup.off('contentReplaced', this.onContentReplaced);\n\t\tswup.off('willReplaceContent', this.onWillReplaceContent);\n\t\tswup.off('clickLink', this.onClickLink);\n\n\t\tswup._handlers.scrollDone = null;\n\t\tswup._handlers.scrollStart = null;\n\n\t\twindow.history.scrollRestoration = this.previousScrollRestoration;\n\t}\n\n\t/**\n\t * Detects if a scroll should be animated, based on context\n\t * @param {string} context\n\t * @returns {boolean}\n\t */\n\tshouldAnimate(context) {\n\t\tif (typeof this.options.animateScroll === 'boolean') {\n\t\t\treturn this.options.animateScroll;\n\t\t}\n\t\treturn this.options.animateScroll[context];\n\t}\n\n\t/**\n\t * Get an element based on anchor\n\t * @param {string} hash\n\t * @returns {mixed}\n\t */\n\tgetAnchorElement = (hash = '') => {\n\t\t// Look for a custom function provided via the plugin options\n\t\tif (typeof this.options.getAnchorElement === 'function') {\n\t\t\treturn this.options.getAnchorElement(hash);\n\t\t}\n\t\t// Look for a the built-in function in swup, added in swup 2.0.16\n\t\tif (typeof this.swup.getAnchorElement === 'function') {\n\t\t\treturn this.swup.getAnchorElement(hash);\n\t\t}\n\t\t// Finally, return a native browser query\n\t\treturn document.querySelector(hash);\n\t};\n\n\t/**\n\t * Get the offset for a scroll\n\t * @param {(HtmlELement|null)} element\n\t * @returns {number}\n\t */\n\tgetOffset = (element = null) => {\n\t\t// If options.offset is a function, apply and return it\n\t\tif (typeof this.options.offset === 'function') {\n\t\t\treturn parseInt(this.options.offset(element), 10);\n\t\t}\n\t\t// Otherwise, return the sanitized offset\n\t\treturn parseInt(this.options.offset, 10);\n\t};\n\n\t/**\n\t * Handles `samePage`\n\t */\n\tonSamePage = () => {\n\t\tthis.swup.scrollTo(0, this.shouldAnimate('samePage'));\n\t};\n\n\t/**\n\t * Handles `onSamePageWithHash`\n\t * @param {PointerEvent} event\n\t */\n\tonSamePageWithHash = (event) => {\n\t\tconst link = event.delegateTarget;\n\t\tthis.maybeScrollToAnchor(link.hash, 'samePageWithHash');\n\t};\n\n\t/**\n\t * Attempts to scroll to an anchor\n\t * @param {string} hash\n\t * @param {string} context\n\t * @returns {boolean}\n\t */\n\tmaybeScrollToAnchor(hash, context) {\n\t\t// Bail early if the hash is null\n\t\tif (hash == null) {\n\t\t\treturn false;\n\t\t}\n\t\tconst element = this.getAnchorElement(hash);\n\t\tif (!element) {\n\t\t\tconsole.warn(`Element ${hash} not found`);\n\t\t\treturn false;\n\t\t}\n\t\tif (!(element instanceof Element)) {\n\t\t\tconsole.warn(`Element ${hash} is not a DOM node`);\n\t\t\treturn false;\n\t\t}\n\t\tconst top =\n\t\t\telement.getBoundingClientRect().top + window.pageYOffset - this.getOffset(element);\n\t\tthis.swup.scrollTo(top, this.shouldAnimate(context));\n\t\treturn true;\n\t}\n\n\t/**\n\t * Handles `transitionStart`\n\t * @param {PopStateEvent} popstate\n\t */\n\tonTransitionStart = (popstate) => {\n\t\tif (this.options.doScrollingRightAway && !this.swup.scrollToElement) {\n\t\t\tthis.doScrollingBetweenPages(popstate);\n\t\t}\n\t};\n\n\t/**\n\t * Handles `contentReplaced`\n\t * @param {PopStateEvent} popstate\n\t */\n\tonContentReplaced = (popstate) => {\n\t\tif (!this.options.doScrollingRightAway || this.swup.scrollToElement) {\n\t\t\tthis.doScrollingBetweenPages(popstate);\n\t\t}\n\n\t\tthis.restoreScrollContainers(popstate);\n\t};\n\n\t/**\n\t * Scrolls the window, based on context\n\t * @param {(PopStateEvent|boolean)} popstate\n\t * @returns {void}\n\t */\n\tdoScrollingBetweenPages = (popstate) => {\n\t\tconst swup = this.swup;\n\n\t\t// Bail early on popstate and inactive `animateHistoryBrowsing`\n\t\tif (popstate && !swup.options.animateHistoryBrowsing) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Try scrolling to a given anchor\n\t\tif (this.maybeScrollToAnchor(swup.scrollToElement, 'betweenPages')) {\n\t\t\tswup.scrollToElement = null;\n\t\t\treturn;\n\t\t}\n\n\t\t// Finally, scroll to either the stored scroll position or to the very top of the page\n\t\tconst scrollPositions = this.getStoredScrollPositions(this.getCurrentCacheKey()) || {};\n\t\tconst top = (scrollPositions.window && scrollPositions.window.top) || 0;\n\t\t// Give possible JavaScript time to execute before scrolling\n\t\trequestAnimationFrame(() => swup.scrollTo(top, this.shouldAnimate('betweenPages')));\n\t};\n\n\t/**\n\t * Stores the current scroll positions for the URL we just came from\n\t */\n\tonWillReplaceContent = () => {\n\t\tthis.storeScrollPositions(this.currentCacheKey);\n\t\tthis.currentCacheKey = this.getCurrentCacheKey();\n\t};\n\n\t/**\n\t * Handles `clickLink`\n\t * @param {PointerEvent}\n\t * @returns {void}\n\t */\n\tonClickLink = (event) => {\n\t\tthis.maybeResetScrollPositions(event.delegateTarget);\n\t};\n\n\t/**\n\t * Deletes the scroll positions for the URL a link is pointing to,\n\t * if shouldResetScrollPosition evaluates to true\n\t * @param {HTMLAnchorElement} htmlAnchorElement\n\t * @returns {void}\n\t */\n\tmaybeResetScrollPositions(htmlAnchorElement) {\n\t\tif (!this.options.shouldResetScrollPosition(htmlAnchorElement)) {\n\t\t\treturn;\n\t\t}\n\t\tconst { url } = Location.fromElement(htmlAnchorElement);\n\t\tthis.resetScrollPositions(url);\n\t}\n\n\t/**\n\t * Stores the scroll positions for the current URL\n\t * @param {string} url\n\t * @returns {void}\n\t */\n\tstoreScrollPositions(url) {\n\t\t// retrieve the current scroll position for all containers\n\t\tconst containers = queryAll(this.options.scrollContainers).map((el) => ({\n\t\t\ttop: el.scrollTop,\n\t\t\tleft: el.scrollLeft\n\t\t}));\n\n\t\t// construct the final object entry, with the window scroll positions added\n\t\tthis.scrollPositionsStore[url] = {\n\t\t\twindow: { top: window.scrollY, left: window.scrollX },\n\t\t\tcontainers\n\t\t};\n\t}\n\n\t/**\n\t * Resets stored scroll positions for a given URL\n\t * @param {string} url\n\t */\n\tresetScrollPositions(url) {\n\t\tconst cacheKey = this.getResolvedUrl(url);\n\t\tdelete this.scrollPositionsStore[cacheKey];\n\t\tthis.scrollPositionsStore[cacheKey] = null;\n\t}\n\n\t/**\n\t * Get the stored scroll positions for a given URL from the cache\n\t * @returns {(object|undefined)}\n\t */\n\tgetStoredScrollPositions(url) {\n\t\tconst cacheKey = this.getResolvedUrl(url);\n\t\treturn this.scrollPositionsStore[cacheKey];\n\t}\n\n\t/**\n\t * Restore the scroll positions for all matching scrollContainers\n\t * @returns void\n\t */\n\trestoreScrollContainers(popstate) {\n\t\t// get the stored scroll positions from the cache\n\t\tconst scrollPositions = this.getStoredScrollPositions(this.getCurrentCacheKey()) || {};\n\t\tif (scrollPositions.containers == null) {\n\t\t\treturn;\n\t\t}\n\n\t\t// cycle through all containers on the current page and restore their scroll positions, if appropriate\n\t\tqueryAll(this.options.scrollContainers).forEach((el, index) => {\n\t\t\tconst scrollPosition = scrollPositions.containers[index];\n\t\t\tif (scrollPosition == null) return;\n\t\t\tel.scrollTop = scrollPosition.top;\n\t\t\tel.scrollLeft = scrollPosition.left;\n\t\t});\n\t}\n\t/**\n\t * Get the current cache key for the scroll positions.\n\t * @returns {string}\n\t */\n\tgetCurrentCacheKey() {\n\t\treturn this.getResolvedUrl(getCurrentUrl());\n\t}\n\t/**\n\t * Apply `swup.resolveUrl` to a given URL\n\t *\n\t * @returns {string}\n\t */\n\tgetResolvedUrl(url) {\n\t\tif (typeof this.swup.resolveUrl === 'function') {\n\t\t\treturn this.swup.resolveUrl(url);\n\t\t}\n\t\treturn url;\n\t}\n}\n"],"names":["r","String","split","concat","slice","join","n","constructor","this","isSwupPlugin","requires","swup","version","mount","unmount","_beforeMount","name","Error","_afterUnmount","_checkRequirements","Object","entries","forEach","e","t","i","findPlugin","every","match","s","o","localeCompare","numeric","Array","isArray","u","document","from","querySelectorAll","m","URL","baseURI","super","toString","url","pathname","search","static","getAttribute","assign","bind","arguments","length","prototype","hasOwnProperty","call","apply","_raf","_positionY","_velocityY","_targetPositionY","_targetPositionYWithOffset","_direction","scrollTo","nodeType","Math","round","getBoundingClientRect","top","window","pageYOffset","parseInt","console","error","documentElement","scrollHeight","innerHeight","body","scrollTop","options","onStart","_animate","onAlreadyAtPositions","_update","_render","requestAnimationFrame","onTick","onEnd","acceleration","friction","abs","onCancel","addEventListener","cancelAnimationFrame","passive","ScrollPlugin","Plugin","getAnchorElement","hash","_this","querySelector","getOffset","element","offset","onSamePage","shouldAnimate","onSamePageWithHash","event","maybeScrollToAnchor","delegateTarget","onTransitionStart","popstate","doScrollingRightAway","scrollToElement","doScrollingBetweenPages","onContentReplaced","restoreScrollContainers","animateHistoryBrowsing","scrollPositions","getStoredScrollPositions","getCurrentCacheKey","onWillReplaceContent","storeScrollPositions","currentCacheKey","onClickLink","maybeResetScrollPositions","animateScroll","betweenPages","samePageWithHash","samePage","scrollFriction","scrollAcceleration","scrollContainers","shouldResetScrollPosition","htmlAnchorElement","_this2","_handlers","scrollDone","scrollStart","scrl","Scrl","triggerEvent","animate","scrollPositionsStore","previousScrollRestoration","history","scrollRestoration","on","off","context","warn","Element","Location","fromElement","resetScrollPositions","queryAll","map","el","left","scrollLeft","scrollY","scrollX","containers","cacheKey","getResolvedUrl","index","scrollPosition","location","getCurrentUrl","resolveUrl"],"mappings":"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"}